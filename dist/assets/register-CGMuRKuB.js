import{_ as E,b as U,r as g,c as b,d as i,o as _,e as w,f as e,h as t,j as u,t as V,i as o,m as h,n as z,p as I,s as L,q as O,bO as R,bP as G,k as T,v as F}from"./index-C27tGZCI.js";const M={class:"register"},$={class:"title"},A={class:"register-code"},S=["src"],j={key:0},D={key:1},H={style:{float:"right"}},J={class:"el-register-footer"},Q={__name:"register",setup(W){const x=U(),{proxy:k}=F(),s=g({username:"",password:"",confirmPassword:"",code:"",uuid:""}),C={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(n,r,a)=>{s.value.password!==r?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},y=g(""),c=g(!1),f=g(!0),q=b(()=>window.GLOBAL_CONFIG.titleName),N=b(()=>window.GLOBAL_CONFIG.copyright);function p(){k.$refs.registerRef.validate(n=>{n&&(c.value=!0,R(s.value).then(r=>{const a=s.value.username;G.alert("<font color='red'>恭喜你，您的账号 "+a+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{x.push("/login")}).catch(()=>{})}).catch(()=>{c.value=!1}))})}function v(){T().then(n=>{f.value=n.captchaEnabled===void 0?!0:n.captchaEnabled,f.value&&(y.value="data:image/gif;base64,"+n.img,s.value.uuid=n.uuid)})}return v(),(n,r)=>{const a=i("svg-icon"),m=i("el-input"),d=i("el-form-item"),P=i("el-button"),B=i("router-link"),K=i("el-form");return _(),w("div",M,[e(K,{ref:"registerRef",model:o(s),rules:C,class:"register-form"},{default:t(()=>[u("h3",$,V(o(q)),1),e(d,{prop:"username"},{default:t(()=>[e(m,{modelValue:o(s).username,"onUpdate:modelValue":r[0]||(r[0]=l=>o(s).username=l),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:t(()=>[e(a,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"password"},{default:t(()=>[e(m,{modelValue:o(s).password,"onUpdate:modelValue":r[1]||(r[1]=l=>o(s).password=l),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:h(p,["enter"])},{prefix:t(()=>[e(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","onKeyup"])]),_:1}),e(d,{prop:"confirmPassword"},{default:t(()=>[e(m,{modelValue:o(s).confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=l=>o(s).confirmPassword=l),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:h(p,["enter"])},{prefix:t(()=>[e(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","onKeyup"])]),_:1}),o(f)?(_(),z(d,{key:0,prop:"code"},{default:t(()=>[e(m,{size:"large",modelValue:o(s).code,"onUpdate:modelValue":r[3]||(r[3]=l=>o(s).code=l),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:h(p,["enter"])},{prefix:t(()=>[e(a,{"icon-class":"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","onKeyup"]),u("div",A,[u("img",{src:o(y),onClick:v,class:"register-code-img"},null,8,S)])]),_:1})):I("",!0),e(d,{style:{width:"100%"}},{default:t(()=>[e(P,{loading:o(c),size:"large",type:"primary",style:{width:"100%"},onClick:L(p,["prevent"])},{default:t(()=>[o(c)?(_(),w("span",D,"注 册 中...")):(_(),w("span",j,"注 册"))]),_:1},8,["loading","onClick"]),u("div",H,[e(B,{class:"link-type",to:"/login"},{default:t(()=>[O("使用已有账户登录")]),_:1})])]),_:1})]),_:1},8,["model"]),u("div",J,[u("span",null,V(o(N)),1)])])}}},Z=E(Q,[["__scopeId","data-v-dd7b25ef"]]);export{Z as default};
