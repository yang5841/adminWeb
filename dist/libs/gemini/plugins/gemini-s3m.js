!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("gemini")):"function"==typeof define&&define.amd?define(["exports","gemini"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["gemini-s3m"]={},e.gemini)}(this,(function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,t}var r=n(t);const o={UNLOADED:0,LOADING:1,PARSING:2,READY:3,FAILED:4};var i=Object.freeze(o);let a={};a=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){const e="function"==typeof require&&require;if(!s&&e)return e(a,!0);if(i)return i(a,!0);const t=new Error("Cannot find module '"+a+"'");throw t.code="MODULE_NOT_FOUND",t}const u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}var i="function"==typeof require&&require;for(let e=0;e<r.length;e++)o(r[e]);return o}({1:[function(e,t,n){const r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};const o={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(let i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){let t,n,r,o,i,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},i={arraySet:function(e,t,n,r,o){for(let i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],2:[function(e,t,n){const r=e("./common");let o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}const a=new r.Buf8(256);for(let e=0;e<256;e++)a[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;function s(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}a[254]=a[254]=1,n.string2buf=function(e){let t,n,o,i,a;const s=e.length;let u=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(o=e.charCodeAt(i+1),56320==(64512&o)&&(n=65536+(n-55296<<10)+(o-56320),i++)),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),a=0,i=0;a<u;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(o=e.charCodeAt(i+1),56320==(64512&o)&&(n=65536+(n-55296<<10)+(o-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},n.buf2binstring=function(e){return s(e,e.length)},n.binstring2buf=function(e){const t=new r.Buf8(e.length);for(let n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){let n,r,o,i;const u=t||e.length,c=new Array(2*u);for(r=0,n=0;n<u;)if(o=e[n++],o<128)c[r++]=o;else if(i=a[o],i>4)c[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&n<u;)o=o<<6|63&e[n++],i--;i>1?c[r++]=65533:o<65536?c[r++]=o:(o-=65536,c[r++]=55296|o>>10&1023,c[r++]=56320|1023&o)}return s(c,r)},n.utf8border=function(e,t){let n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){function r(e,t,n,r){let o=65535&e|0,i=e>>>16&65535|0,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+t[r++]|0,i=i+o|0}while(--a);o%=65521,i%=65521}return o|i<<16|0}t.exports=r},{}],4:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,n){function r(){let e;const t=[];for(let n=0;n<256;n++){e=n;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}const o=r();function i(e,t,n,r){const i=o,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[255&(e^t[n])];return-1^e}t.exports=i},{}],6:[function(e,t,n){function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],7:[function(e,t,n){const r=30,o=12;t.exports=function(e,t){let n,i,a,s,u,c,l,d,f,p,_,A,m,C,y,E,h,B,T,x,b,g,D,P,v;n=e.state,i=e.next_in,P=e.input,a=i+(e.avail_in-5),s=e.next_out,v=e.output,u=s-(t-e.avail_out),c=s+(e.avail_out-257),l=n.dmax,d=n.wsize,f=n.whave,p=n.wnext,_=n.window,A=n.hold,m=n.bits,C=n.lencode,y=n.distcode,E=(1<<n.lenbits)-1,h=(1<<n.distbits)-1;e:do{for(m<15&&(A+=P[i++]<<m,m+=8,A+=P[i++]<<m,m+=8),B=C[A&E];;){if(T=B>>>24,A>>>=T,m-=T,T=B>>>16&255,0===T)v[s++]=65535&B;else{if(!(16&T)){if(0==(64&T)){B=C[(65535&B)+(A&(1<<T)-1)];continue}if(32&T){n.mode=o;break e}e.msg="invalid literal/length code",n.mode=r;break e}for(x=65535&B,T&=15,T&&(m<T&&(A+=P[i++]<<m,m+=8),x+=A&(1<<T)-1,A>>>=T,m-=T),m<15&&(A+=P[i++]<<m,m+=8,A+=P[i++]<<m,m+=8),B=y[A&h];;){if(T=B>>>24,A>>>=T,m-=T,T=B>>>16&255,!(16&T)){if(0==(64&T)){B=y[(65535&B)+(A&(1<<T)-1)];continue}e.msg="invalid distance code",n.mode=r;break e}if(b=65535&B,T&=15,m<T&&(A+=P[i++]<<m,m+=8,m<T&&(A+=P[i++]<<m,m+=8)),b+=A&(1<<T)-1,b>l){e.msg="invalid distance too far back",n.mode=r;break e}if(A>>>=T,m-=T,T=s-u,b>T){if(T=b-T,T>f&&n.sane){e.msg="invalid distance too far back",n.mode=r;break e}if(g=0,D=_,0===p){if(g+=d-T,T<x){x-=T;do{v[s++]=_[g++]}while(--T);g=s-b,D=v}}else if(p<T){if(g+=d+p-T,T-=p,T<x){x-=T;do{v[s++]=_[g++]}while(--T);if(g=0,p<x){T=p,x-=T;do{v[s++]=_[g++]}while(--T);g=s-b,D=v}}}else if(g+=p-T,T<x){x-=T;do{v[s++]=_[g++]}while(--T);g=s-b,D=v}for(;x>2;)v[s++]=D[g++],v[s++]=D[g++],v[s++]=D[g++],x-=3;x&&(v[s++]=D[g++],x>1&&(v[s++]=D[g++]))}else{g=s-b;do{v[s++]=v[g++],v[s++]=v[g++],v[s++]=v[g++],x-=3}while(x>2);x&&(v[s++]=v[g++],x>1&&(v[s++]=v[g++]))}break}}break}}while(i<a&&s<c);x=m>>3,i-=x,m-=x<<3,A&=(1<<m)-1,e.next_in=i,e.next_out=s,e.avail_in=i<a?a-i+5:5-(i-a),e.avail_out=s<c?c-s+257:257-(s-c),n.hold=A,n.bits=m}},{}],8:[function(e,t,n){const r=e("../utils/common"),o=e("./adler32"),i=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),u=0,c=1,l=2,d=4,f=5,p=6,_=0,A=1,m=2,C=-2,y=-3,E=-4,h=-5,B=8,T=1,x=2,b=3,g=4,D=5,P=6,v=7,M=8,I=9,L=10,S=11,F=12,N=13,R=14,O=15,G=16,w=17,U=18,V=19,H=20,K=21,k=22,Y=23,z=24,J=25,X=26,j=27,W=28,q=29,Z=30,Q=31,$=852,ee=592,te=15;function ne(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function oe(e){let t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=T,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32($),t.distcode=t.distdyn=new r.Buf32(ee),t.sane=1,t.back=-1,_):C}function ie(e){let t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,oe(e)):C}function ae(e,t){let n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?C:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ie(e))):C}function se(e,t){let n,r;return e?(r=new re,e.state=r,r.window=null,n=ae(e,t),n!==_&&(e.state=null),n):C}function ue(e){return se(e,te)}let ce,le,de=!0;function fe(e){if(de){let t;for(ce=new r.Buf32(512),le=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,ce,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(l,e.lens,0,32,le,0,e.work,{bits:5}),de=!1}e.lencode=ce,e.lenbits=9,e.distcode=le,e.distbits=5}function pe(e,t,n,o){let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),o>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>o&&(i=o),r.arraySet(a.window,t,n-o,i,a.wnext),(o-=i)?(r.arraySet(a.window,t,n-o,o,0),a.wnext=o,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function _e(e,t){let n,$,ee,te,re,oe,ie,ae,se,ue,ce,le,de,_e,Ae,me,Ce,ye,Ee,he,Be,Te,xe=0;const be=new r.Buf8(4);let ge,De;const Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return C;n=e.state,n.mode===F&&(n.mode=N),re=e.next_out,ee=e.output,ie=e.avail_out,te=e.next_in,$=e.input,oe=e.avail_in,ae=n.hold,se=n.bits,ue=oe,ce=ie,Te=_;e:for(;;)switch(n.mode){case T:if(0===n.wrap){n.mode=N;break}for(;se<16;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(2&n.wrap&&35615===ae){n.check=0,be[0]=255&ae,be[1]=ae>>>8&255,n.check=i(n.check,be,2,0),ae=0,se=0,n.mode=x;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&ae)<<8)+(ae>>8))%31){e.msg="incorrect header check",n.mode=Z;break}if((15&ae)!==B){e.msg="unknown compression method",n.mode=Z;break}if(ae>>>=4,se-=4,Be=8+(15&ae),0===n.wbits)n.wbits=Be;else if(Be>n.wbits){e.msg="invalid window size",n.mode=Z;break}n.dmax=1<<Be,e.adler=n.check=1,n.mode=512&ae?L:F,ae=0,se=0;break;case x:for(;se<16;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(n.flags=ae,(255&n.flags)!==B){e.msg="unknown compression method",n.mode=Z;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Z;break}n.head&&(n.head.text=ae>>8&1),512&n.flags&&(be[0]=255&ae,be[1]=ae>>>8&255,n.check=i(n.check,be,2,0)),ae=0,se=0,n.mode=b;case b:for(;se<32;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}n.head&&(n.head.time=ae),512&n.flags&&(be[0]=255&ae,be[1]=ae>>>8&255,be[2]=ae>>>16&255,be[3]=ae>>>24&255,n.check=i(n.check,be,4,0)),ae=0,se=0,n.mode=g;case g:for(;se<16;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}n.head&&(n.head.xflags=255&ae,n.head.os=ae>>8),512&n.flags&&(be[0]=255&ae,be[1]=ae>>>8&255,n.check=i(n.check,be,2,0)),ae=0,se=0,n.mode=D;case D:if(1024&n.flags){for(;se<16;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}n.length=ae,n.head&&(n.head.extra_len=ae),512&n.flags&&(be[0]=255&ae,be[1]=ae>>>8&255,n.check=i(n.check,be,2,0)),ae=0,se=0}else n.head&&(n.head.extra=null);n.mode=P;case P:if(1024&n.flags&&(le=n.length,le>oe&&(le=oe),le&&(n.head&&(Be=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,$,te,le,Be)),512&n.flags&&(n.check=i(n.check,$,le,te)),oe-=le,te+=le,n.length-=le),n.length))break e;n.length=0,n.mode=v;case v:if(2048&n.flags){if(0===oe)break e;le=0;do{Be=$[te+le++],n.head&&Be&&n.length<65536&&(n.head.name+=String.fromCharCode(Be))}while(Be&&le<oe);if(512&n.flags&&(n.check=i(n.check,$,le,te)),oe-=le,te+=le,Be)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=M;case M:if(4096&n.flags){if(0===oe)break e;le=0;do{Be=$[te+le++],n.head&&Be&&n.length<65536&&(n.head.comment+=String.fromCharCode(Be))}while(Be&&le<oe);if(512&n.flags&&(n.check=i(n.check,$,le,te)),oe-=le,te+=le,Be)break e}else n.head&&(n.head.comment=null);n.mode=I;case I:if(512&n.flags){for(;se<16;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(ae!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Z;break}ae=0,se=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=F;break;case L:for(;se<32;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}e.adler=n.check=ne(ae),ae=0,se=0,n.mode=S;case S:if(0===n.havedict)return e.next_out=re,e.avail_out=ie,e.next_in=te,e.avail_in=oe,n.hold=ae,n.bits=se,m;e.adler=n.check=1,n.mode=F;case F:if(t===f||t===p)break e;case N:if(n.last){ae>>>=7&se,se-=7&se,n.mode=j;break}for(;se<3;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}switch(n.last=1&ae,ae>>>=1,se-=1,3&ae){case 0:n.mode=R;break;case 1:if(fe(n),n.mode=H,t===p){ae>>>=2,se-=2;break e}break;case 2:n.mode=w;break;case 3:e.msg="invalid block type",n.mode=Z}ae>>>=2,se-=2;break;case R:for(ae>>>=7&se,se-=7&se;se<32;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if((65535&ae)!=(ae>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Z;break}if(n.length=65535&ae,ae=0,se=0,n.mode=O,t===p)break e;case O:n.mode=G;case G:if(le=n.length,le){if(le>oe&&(le=oe),le>ie&&(le=ie),0===le)break e;r.arraySet(ee,$,te,le,re),oe-=le,te+=le,ie-=le,re+=le,n.length-=le;break}n.mode=F;break;case w:for(;se<14;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(n.nlen=257+(31&ae),ae>>>=5,se-=5,n.ndist=1+(31&ae),ae>>>=5,se-=5,n.ncode=4+(15&ae),ae>>>=4,se-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Z;break}n.have=0,n.mode=U;case U:for(;n.have<n.ncode;){for(;se<3;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}n.lens[Pe[n.have++]]=7&ae,ae>>>=3,se-=3}for(;n.have<19;)n.lens[Pe[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,ge={bits:n.lenbits},Te=s(u,n.lens,0,19,n.lencode,0,n.work,ge),n.lenbits=ge.bits,Te){e.msg="invalid code lengths set",n.mode=Z;break}n.have=0,n.mode=V;case V:for(;n.have<n.nlen+n.ndist;){for(;xe=n.lencode[ae&(1<<n.lenbits)-1],Ae=xe>>>24,me=xe>>>16&255,Ce=65535&xe,!(Ae<=se);){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(Ce<16)ae>>>=Ae,se-=Ae,n.lens[n.have++]=Ce;else{if(16===Ce){for(De=Ae+2;se<De;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(ae>>>=Ae,se-=Ae,0===n.have){e.msg="invalid bit length repeat",n.mode=Z;break}Be=n.lens[n.have-1],le=3+(3&ae),ae>>>=2,se-=2}else if(17===Ce){for(De=Ae+3;se<De;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}ae>>>=Ae,se-=Ae,Be=0,le=3+(7&ae),ae>>>=3,se-=3}else{for(De=Ae+7;se<De;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}ae>>>=Ae,se-=Ae,Be=0,le=11+(127&ae),ae>>>=7,se-=7}if(n.have+le>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Z;break}for(;le--;)n.lens[n.have++]=Be}}if(n.mode===Z)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Z;break}if(n.lenbits=9,ge={bits:n.lenbits},Te=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,ge),n.lenbits=ge.bits,Te){e.msg="invalid literal/lengths set",n.mode=Z;break}if(n.distbits=6,n.distcode=n.distdyn,ge={bits:n.distbits},Te=s(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,ge),n.distbits=ge.bits,Te){e.msg="invalid distances set",n.mode=Z;break}if(n.mode=H,t===p)break e;case H:n.mode=K;case K:if(oe>=6&&ie>=258){e.next_out=re,e.avail_out=ie,e.next_in=te,e.avail_in=oe,n.hold=ae,n.bits=se,a(e,ce),re=e.next_out,ee=e.output,ie=e.avail_out,te=e.next_in,$=e.input,oe=e.avail_in,ae=n.hold,se=n.bits,n.mode===F&&(n.back=-1);break}for(n.back=0;xe=n.lencode[ae&(1<<n.lenbits)-1],Ae=xe>>>24,me=xe>>>16&255,Ce=65535&xe,!(Ae<=se);){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(me&&0==(240&me)){for(ye=Ae,Ee=me,he=Ce;xe=n.lencode[he+((ae&(1<<ye+Ee)-1)>>ye)],Ae=xe>>>24,me=xe>>>16&255,Ce=65535&xe,!(ye+Ae<=se);){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}ae>>>=ye,se-=ye,n.back+=ye}if(ae>>>=Ae,se-=Ae,n.back+=Ae,n.length=Ce,0===me){n.mode=X;break}if(32&me){n.back=-1,n.mode=F;break}if(64&me){e.msg="invalid literal/length code",n.mode=Z;break}n.extra=15&me,n.mode=k;case k:if(n.extra){for(De=n.extra;se<De;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}n.length+=ae&(1<<n.extra)-1,ae>>>=n.extra,se-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Y;case Y:for(;xe=n.distcode[ae&(1<<n.distbits)-1],Ae=xe>>>24,me=xe>>>16&255,Ce=65535&xe,!(Ae<=se);){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(0==(240&me)){for(ye=Ae,Ee=me,he=Ce;xe=n.distcode[he+((ae&(1<<ye+Ee)-1)>>ye)],Ae=xe>>>24,me=xe>>>16&255,Ce=65535&xe,!(ye+Ae<=se);){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}ae>>>=ye,se-=ye,n.back+=ye}if(ae>>>=Ae,se-=Ae,n.back+=Ae,64&me){e.msg="invalid distance code",n.mode=Z;break}n.offset=Ce,n.extra=15&me,n.mode=z;case z:if(n.extra){for(De=n.extra;se<De;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}n.offset+=ae&(1<<n.extra)-1,ae>>>=n.extra,se-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Z;break}n.mode=J;case J:if(0===ie)break e;if(le=ce-ie,n.offset>le){if(le=n.offset-le,le>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Z;break}le>n.wnext?(le-=n.wnext,de=n.wsize-le):de=n.wnext-le,le>n.length&&(le=n.length),_e=n.window}else _e=ee,de=re-n.offset,le=n.length;le>ie&&(le=ie),ie-=le,n.length-=le;do{ee[re++]=_e[de++]}while(--le);0===n.length&&(n.mode=K);break;case X:if(0===ie)break e;ee[re++]=n.length,ie--,n.mode=K;break;case j:if(n.wrap){for(;se<32;){if(0===oe)break e;oe--,ae|=$[te++]<<se,se+=8}if(ce-=ie,e.total_out+=ce,n.total+=ce,ce&&(e.adler=n.check=n.flags?i(n.check,ee,ce,re-ce):o(n.check,ee,ce,re-ce)),ce=ie,(n.flags?ae:ne(ae))!==n.check){e.msg="incorrect data check",n.mode=Z;break}ae=0,se=0}n.mode=W;case W:if(n.wrap&&n.flags){for(;se<32;){if(0===oe)break e;oe--,ae+=$[te++]<<se,se+=8}if(ae!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Z;break}ae=0,se=0}n.mode=q;case q:Te=A;break e;case Z:Te=y;break e;case Q:return E;default:return C}return e.next_out=re,e.avail_out=ie,e.next_in=te,e.avail_in=oe,n.hold=ae,n.bits=se,(n.wsize||ce!==e.avail_out&&n.mode<Z&&(n.mode<j||t!==d))&&pe(e,e.output,e.next_out,ce-e.avail_out),ue-=e.avail_in,ce-=e.avail_out,e.total_in+=ue,e.total_out+=ce,n.total+=ce,n.wrap&&ce&&(e.adler=n.check=n.flags?i(n.check,ee,ce,e.next_out-ce):o(n.check,ee,ce,e.next_out-ce)),e.data_type=n.bits+(n.last?64:0)+(n.mode===F?128:0)+(n.mode===H||n.mode===O?256:0),(0===ue&&0===ce||t===d)&&Te===_&&(Te=h),Te}function Ae(e){if(!e||!e.state)return C;const t=e.state;return t.window&&(t.window=null),e.state=null,_}function me(e,t){let n;return e&&e.state?(n=e.state,0==(2&n.wrap)?C:(n.head=t,t.done=!1,_)):C}function Ce(e,t){const n=t.length;let r,i,a;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==S?C:r.mode===S&&(i=1,i=o(i,t,n,0),i!==r.check)?y:(a=pe(e,t,n,n),a?(r.mode=Q,E):(r.havedict=1,_))):C}n.inflateReset=ie,n.inflateReset2=ae,n.inflateResetKeep=oe,n.inflateInit=ue,n.inflateInit2=se,n.inflate=_e,n.inflateEnd=Ae,n.inflateGetHeader=me,n.inflateSetDictionary=Ce,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,n){const r=e("../utils/common"),o=15,i=852,a=592,s=0,u=1,c=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,_,A,m,C,y){const E=y.bits;let h,B,T,x,b,g,D=0,P=0,v=0,M=0,I=0,L=0,S=0,F=0,N=0,R=0,O=null,G=0;const w=new r.Buf16(o+1),U=new r.Buf16(o+1);let V,H,K,k=null,Y=0;for(D=0;D<=o;D++)w[D]=0;for(P=0;P<_;P++)w[t[n+P]]++;for(I=E,M=o;M>=1&&0===w[M];M--);if(I>M&&(I=M),0===M)return A[m++]=20971520,A[m++]=20971520,y.bits=1,0;for(v=1;v<M&&0===w[v];v++);for(I<v&&(I=v),F=1,D=1;D<=o;D++)if(F<<=1,F-=w[D],F<0)return-1;if(F>0&&(e===s||1!==M))return-1;for(U[1]=0,D=1;D<o;D++)U[D+1]=U[D]+w[D];for(P=0;P<_;P++)0!==t[n+P]&&(C[U[t[n+P]]++]=P);if(e===s?(O=k=C,g=19):e===u?(O=l,G-=257,k=d,Y-=257,g=256):(O=f,k=p,g=-1),R=0,P=0,D=v,b=m,L=I,S=0,T=-1,N=1<<I,x=N-1,e===u&&N>i||e===c&&N>a)return 1;for(;;){V=D-S,C[P]<g?(H=0,K=C[P]):C[P]>g?(H=k[Y+C[P]],K=O[G+C[P]]):(H=96,K=0),h=1<<D-S,B=1<<L,v=B;do{B-=h,A[b+(R>>S)+B]=V<<24|H<<16|K|0}while(0!==B);for(h=1<<D-1;R&h;)h>>=1;if(0!==h?(R&=h-1,R+=h):R=0,P++,0==--w[D]){if(D===M)break;D=t[n+C[P]]}if(D>I&&(R&x)!==T){for(0===S&&(S=I),b+=v,L=D-S,F=1<<L;L+S<M&&(F-=w[L+S],!(F<=0));)L++,F<<=1;if(N+=1<<L,e===u&&N>i||e===c&&N>a)return 1;T=R&x,A[T]=I<<24|L<<16|b-m|0}}return 0!==R&&(A[b+R]=D-S<<24|64<<16|0),y.bits=I,0}},{"../utils/common":1}],10:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,n){function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}],"/lib/inflate.js":[function(e,t,n){const r=e("./zlib/inflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),u=e("./zlib/zstream"),c=e("./zlib/gzheader"),l=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;const n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function f(e,t){const n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}function p(e,t){return(t=t||{}).raw=!0,f(e,t)}d.prototype.push=function(e,t){const n=this.strm,s=this.options.chunkSize,u=this.options.dictionary;let c,d,f,p,_,A,m=!1;if(this.ended)return!1;d=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?n.input=i.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(s),n.next_out=0,n.avail_out=s),c=r.inflate(n,a.Z_NO_FLUSH),c===a.Z_NEED_DICT&&u&&(A="string"==typeof u?i.string2buf(u):"[object ArrayBuffer]"===l.call(u)?new Uint8Array(u):u,c=r.inflateSetDictionary(this.strm,A)),c===a.Z_BUF_ERROR&&!0===m&&(c=a.Z_OK,m=!1),c!==a.Z_STREAM_END&&c!==a.Z_OK)return this.onEnd(c),this.ended=!0,!1;n.next_out&&(0!==n.avail_out&&c!==a.Z_STREAM_END&&(0!==n.avail_in||d!==a.Z_FINISH&&d!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(f=i.utf8border(n.output,n.next_out),p=n.next_out-f,_=i.buf2string(n.output,f),n.next_out=p,n.avail_out=s-p,p&&o.arraySet(n.output,n.output,f,p,0),this.onData(_)):this.onData(o.shrinkBuf(n.output,n.next_out)))),0===n.avail_in&&0===n.avail_out&&(m=!0)}while((n.avail_in>0||0===n.avail_out)&&c!==a.Z_STREAM_END);return c===a.Z_STREAM_END&&(d=a.Z_FINISH),d===a.Z_FINISH?(c=r.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===a.Z_OK):d!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),n.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=f,n.inflateRaw=p,n.ungzip=f},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js");var s=a;
//! Use DXT1 compression.
const u=1,c=2,l=4,d=32;
//! Use DXT3 compression.
function f(e,t,n,r){const o=e|t<<8,i=o>>11&31,a=o>>5&63,s=31&o;return n[r+0]=i<<3|i>>2,n[r+1]=a<<2|a>>4,n[r+2]=s<<3|s>>2,n[r+3]=255,o}function p(e,t,n,r){const o=new Uint8Array(16),i=f(t[n+0],t[n+1],o,0),a=f(t[n+2],t[n+3],o,4);for(var s=0;s<3;s++){const e=o[s],t=o[4+s];r&&i<=a?(o[8+s]=(e+t)/2,o[12+s]=0):(o[8+s]=(2*e+t)/3,o[12+s]=(e+2*t)/3)}o[11]=255,o[15]=r&&i<=a?0:255;const u=new Uint8Array(16);for(s=0;s<4;++s){const e=t[n+4+s];u[4*s+0]=3&e,u[4*s+1]=e>>2&3,u[4*s+2]=e>>4&3,u[4*s+3]=e>>6&3}for(s=0;s<16;++s){const t=4*u[s];for(let n=0;n<4;++n)e[4*s+n]=o[t+n]}}function _(e,t,n){for(let t=0;t<8;++t){const r=bytes[n+t],o=15&r,i=240&r;e[8*t+3]=o|o<<4,e[8*t+7]=i|i>>4}}function A(e,t,n){const r=t[n+0],o=t[n+1],i=new Uint8Array(8);if(i[0]=r,i[1]=o,r<=o){for(var a=1;a<5;++a)i[1+a]=((5-a)*r+a*o)/5;i[6]=0,i[7]=255}else for(a=1;a<7;++a)i[1+a]=((7-a)*r+a*o)/7;const s=new Uint8Array(16);n+=2;let u=0;for(a=0;a<2;++a){let e=0;for(var c=0;c<3;++c){e|=t[n++]<<8*c}for(c=0;c<8;++c){const t=e>>3*c&7;s[u++]=t}}for(a=0;a<16;++a)e[4*a+3]=i[s[a]]}function m(e,t,n,r){let o=0;0!=(r&(c|l))&&(o=8),p(e,t,n+o,0!=(r&u)),0!=(r&c)?_(e,0,n):0!=(r&l)&&A(e,t,n)}function C(e,t,n,r){const o=new Uint16Array(4),i=e;let a=0,s=0,u=0,c=0,l=0,d=0,f=0,p=0,_=0;const A=t/4,m=n/4;for(let e=0;e<m;e++)for(let n=0;n<A;n++)u=4*((m-e)*A+n),o[0]=r[u],o[1]=r[u+1],c=31&o[0],l=2016&o[0],d=63488&o[0],f=31&o[1],p=2016&o[1],_=63488&o[1],o[2]=5*c+3*f>>3|5*l+3*p>>3&2016|5*d+3*_>>3&63488,o[3]=5*f+3*c>>3|5*p+3*l>>3&2016|5*_+3*d>>3&63488,a=r[u+2],s=4*e*t+4*n,i[s]=o[3&a],i[s+1]=o[a>>2&3],i[s+2]=o[a>>4&3],i[s+3]=o[a>>6&3],s+=t,i[s]=o[a>>8&3],i[s+1]=o[a>>10&3],i[s+2]=o[a>>12&3],i[s+3]=o[a>>14],a=r[u+3],s+=t,i[s]=o[3&a],i[s+1]=o[a>>2&3],i[s+2]=o[a>>4&3],i[s+3]=o[a>>6&3],s+=t,i[s]=o[a>>8&3],i[s+1]=o[a>>10&3],i[s+2]=o[a>>12&3],i[s+3]=o[a>>14];return i}
/*! @brief Decompresses an image in memory.

     @param rgba		Storage for the decompressed pixels.
     @param width	The width of the source image.
     @param height	The height of the source image.
     @param blocks	The compressed DXT blocks.
     @param flags	Compression flags.

     The decompressed pixels will be written as a contiguous array of width*height
     16 rgba values, with each component as 1 byte each. In memory this is:

     { r1, g1, b1, a1, .... , rn, gn, bn, an } for n = width*height

     The flags parameter should specify either kDxt1, kDxt3 or kDxt5 compression,
     however, DXT1 will be used by default if none is specified. All other flags
     are ignored.

     Internally this function calls squish::Decompress for each block.
     */function y(e,t,n,r,o){const i=0!=(o&u)?8:16;let a=0;for(let s=0;s<n;s+=4)for(let u=0;u<t;u+=4){const c=new Uint8Array(64);m(c,r,a,o);let l=0;for(let r=0;r<4;++r)for(let o=0;o<4;++o){const i=u+o,a=s+r;if(i<t&&a<n){let r=4*(t*(n-a)+i);for(let t=0;t<4;++t)e[r++]=c[l++]}else l+=4}a+=i}}function E(e){}E.decode=function(e,t,n,r,o){if(null==e||null==r||0==n||0==t)return;let i=0;i=o>11||5===o?l:u|d,i&u&&i&d?C(e,t,n,r):y(e,t,n,r,i)};const h=function(){const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};let n,r="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";WebAssembly.validate(e)&&(r="B9h79tEBBBE5V9gBB9gVUUUUUEU9gIUUUB9gDUUB9gEUEUIMXBBEBEEDIDIDLLVE9wEEEVIEBEOWEUEC+Q/aEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBDy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBLe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBOk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBWl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBQL79iv9rBKQ/j6XLBZIK9+EVU8jJJJJBCZ9rHBCBHEINCBHDCBHIINABCWFADFAICJUAEAD4CEgGLe86BBAIALFHIADCEFGDCW9HMBKAEC+Q+YJJBFAI86BBAECITC+Q1JJBFAB8pIW83IBAECEFGECJD9HMBKK1HLSUD97EUO978jJJJJBCJ/KB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rAD/8QBBCJ/ABAD9uC/wfBgGOCJDAOCJD6eHWAICEFHOCBHdDNINAdAE9PMEAWAEAd9rAdAWFAE6eHQDNDNADtMBAQCSFGLC9wgGKCI2HXAKCETHMALCL4CIFCD4HpCBHSINAOHZCBHhDNINDNARAZ9rAp9PMBCBHOXVKAVCJ/CBFAhAK2FHoAZApFHOCBHIDNAKC/AB6MBARAO9rC/gB6MBCBHLINAoALFHIDNDNDNDNDNAZALCO4FrBBGaCIgpLBEDIBKAICBPhPKLBXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLBAOCZFHOKDNDNDNDNDNAaCD4CIgpLBEDIBKAICBPhPKLZXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLZAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLZAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLZAOCZFHOKDNDNDNDNDNAaCL4CIgpLBEDIBKAICBPhPKLAXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLAAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLAAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLAAOCZFHOKDNDNDNDNDNAaCO4pLBEDIBKAICBPhPKL8wXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBAaC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKL8wAOCLFAlPqBFAaC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBAaC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKL8wAOCWFAlPqBFAaC+Q+YJJBFrBBFHOXEKAIAOPBBBPKL8wAOCZFHOKALC/ABFHIALCJEFAK0MEAIHLARAO9rC/fB0MBKKDNAIAK9PMBAICI4HLINDNARAO9rCk9PMBCBHOXRKAoAIFHaDNDNDNDNDNAZAICO4FrBBALCOg4CIgpLBEDIBKAaCBPhPKLBXIKAaAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAaAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAaAOPBBBPKLBAOCZFHOKALCDFHLAICZFGIAK6MBKKDNAOtMBAOHZAhCEFGhCLsMDXEKKCBHOXIKDNAKtMBAVCJDFASFHIAVASFPBDBHlCBHaINAIAVCJ/CBFAaFGLPBLBGxCEP9tAxCEPSGcP9OP9hP9RGxALAKFPBLBGkCEP9tAkAcP9OP9hP9RGkPMBZEhDoIaLcVxOqRlGyALAMFPBLBG8aCEP9tA8aAcP9OP9hP9RG8aALAXFPBLBGeCEP9tAeAcP9OP9hP9RGePMBZEhDoIaLcVxOqRlG3PMBEZhDIoaLVcxORqlGcAcPMBEDIBEDIBEDIBEDIAlP9uGlPeBbDBAIADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAyA3PMWdkyQK8aeXM35pS8e8fGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAxAkPMWkdyQ8aKeX3M5p8eS8fGxA8aAePMWkdyQ8aKeX3M5p8eS8fGkPMBEZhDIoaLVcxORqlGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAxAkPMWdkyQK8aeXM35pS8e8fGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFHIAaCZFGaAK6MBKKASCLFGSAD6MBKKABAdAD2FAVCJDFAQAD2/8QBBAVAVCJDFAQCUFAD2FAD/8QBBKAQCBAOeAdFHdAOMBKC9+HOXEKCBC99ARAO9rADCAADCA0eseHOKAVCJ/KBF8kJJJJBAOKWBZ+BJJJBK+KoEZU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJE/8KBAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHKDNAEtMBCMCSAdCEseHXABHICBHdCBHMCBHpCBHLCBHOINDNAKAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFARCL4CU7AOFCSgCITFGSYDLHZASYDBHhDNARCSgGSAX9PMBAVARCU7ALFCSgCDTFYDBAdASeHRAStHSDNDNADCD9HMBABAh87EBABCLFAR87EBABCDFAZ87EBXEKAIAhbDBAICWFARbDBAICLFAZbDBKAdASFHdAVC/ABFAOCITFGoARbDBAoAZbDLAVALCDTFARbDBAVC/ABFAOCEFCSgGOCITFGZAhbDBAZARbDLALASFHLAOCEFHOXDKDNDNASCSsMBAMASFASC987FCEFHMXEKAK8sBBGSCfEgHRDNDNASCU9MMBAKCEFHKXEKAK8sBEGSCfBgCRTARCfBgvHRDNASCU9MMBAKCDFHKXEKAK8sBDGSCfBgCpTARvHRDNASCU9MMBAKCIFHKXEKAK8sBIGSCfBgCxTARvHRDNASCU9MMBAKCLFHKXEKAKrBLC3TARvHRAKCVFHKKARCE4CBARCEg9r7AMFHMKDNDNADCD9HMBABAh87EBABCLFAM87EBABCDFAZ87EBXEKAIAhbDBAICWFAMbDBAICLFAZbDBKAVC/ABFAOCITFGRAMbDBARAZbDLAVALCDTFAMbDBAVC/ABFAOCEFCSgGOCITFGRAhbDBARAMbDLALCEFHLAOCEFHOXEKDNARCPE0MBAVALAQARCSgFrBBGSCL4GZ9rCSgCDTFYDBAdCEFGhAZeHRAVALAS9rCSgCDTFYDBAhAZtGoFGhASCSgGZeHSAZtHZDNDNADCD9HMBABAd87EBABCLFAS87EBABCDFAR87EBXEKAIAdbDBAICWFASbDBAICLFARbDBKAVALCDTFAdbDBAVC/ABFAOCITFGaARbDBAaAdbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALAoFCSgGLCDTFASbDBAVC/ABFAOCDFCSgGOCITFGRAdbDBARASbDLAOCEFHOALAZFHLAhAZFHdXEKAdCBAKrBBGaeGZARC/+EsGcFHRAaCSgHhDNDNAaCL4GoMBARCEFHSXEKARHSAVALAo9rCSgCDTFYDBHRKDNDNAhMBASCEFHdXEKASHdAVALAa9rCSgCDTFYDBHSKDNDNActMBAKCEFHaXEKAK8sBEGaCfEgHZDNDNAaCU9MMBAKCDFHaXEKAK8sBDGaCfBgCRTAZCfBgvHZDNAaCU9MMBAKCIFHaXEKAK8sBIGaCfBgCpTAZvHZDNAaCU9MMBAKCLFHaXEKAK8sBLGaCfBgCxTAZvHZDNAaCU9MMBAKCVFHaXEKAKCOFHaAKrBVC3TAZvHZKAZCE4CBAZCEg9r7AMFGMHZKDNDNAoCSsMBAaHcXEKAa8sBBGKCfEgHRDNDNAKCU9MMBAaCEFHcXEKAa8sBEGKCfBgCRTARCfBgvHRDNAKCU9MMBAaCDFHcXEKAa8sBDGKCfBgCpTARvHRDNAKCU9MMBAaCIFHcXEKAa8sBIGKCfBgCxTARvHRDNAKCU9MMBAaCLFHcXEKAaCVFHcAarBLC3TARvHRKARCE4CBARCEg9r7AMFGMHRKDNDNAhCSsMBAcHKXEKAc8sBBGKCfEgHSDNDNAKCU9MMBAcCEFHKXEKAc8sBEGKCfBgCRTASCfBgvHSDNAKCU9MMBAcCDFHKXEKAc8sBDGKCfBgCpTASvHSDNAKCU9MMBAcCIFHKXEKAc8sBIGKCfBgCxTASvHSDNAKCU9MMBAcCLFHKXEKAcCVFHKAcrBLC3TASvHSKASCE4CBASCEg9r7AMFGMHSKDNDNADCD9HMBABAZ87EBABCLFAS87EBABCDFAR87EBXEKAIAZbDBAICWFASbDBAICLFARbDBKAVC/ABFAOCITFGaARbDBAaAZbDLAVALCDTFAZbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCDFCSgCITFGRAZbDBARASbDLAVALAotAoCSsvFGLCSgCDTFASbDBALAhtAhCSsvFHLAOCIFHOKAWCEFHWABCOFHBAICXFHIAOCSgHOALCSgHLApCIFGpAE6MBKKCBC99AKAQseHOKAVC/AEF8kJJJJBAOK/tLEDU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHOAIALFC98FHIDNAEtMBDNADCDsMBINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKAVCWFALCEgCDTvGDALCD4CBALCE4CEg9r7ADYDBFGLbDBABALbDBABCLFHBAECUFGEMBXDKKINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKABALCD4CBALCE4CEg9r7AVCWFALCEgCDTvGLYDBFGD87EBALADbDBABCDFHBAECUFGEMBKKCBC99AOAIseHOKAOK/xVDIUO978jJJJJBCA9rGI8kJJJJBDNDNADCL9HMBDNAEC98gGLtMBABHDCBHVINADADPBBBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdCBPhP+2EGQARCJJJJ94PhGKP9OP9RP/kEGRjBB/+9CPaARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGQP/kECfEPhP9OAOCJJJ94PhP9OP9QARAWP/mEAQP/kECWP+rECJ/+IPhP9OP9QAdAWP/mEAQP/kECZP+rECJJ/8RPhP9OP9QPKBBADCZFHDAVCLFGVAL6MBKKALAE9PMEAIAECIgGVCDTGDvCBCZAD9r/8KBAIABALCDTFGLAD/8QBBDNAVtMBAIAIPBLBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdCBPhP+2EGQARCJJJJ94PhGKP9OP9RP/kEGRjBB/+9CPaARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGQP/kECfEPhP9OAOCJJJ94PhP9OP9QARAWP/mEAQP/kECWP+rECJ/+IPhP9OP9QAdAWP/mEAQP/kECZP+rECJJ/8RPhP9OP9QPKLBKALAIAD/8QBBXEKABAEC98gGDZ+HJJJBADAE9PMBAIAECIgGLCITGVFCBCAAV9r/8KBAIABADCITFGDAV/8QBBAIALZ+HJJJBADAIAV/8QBBKAICAF8kJJJJBK+yIDDUR97DNAEtMBCBHDINABCZFGIAIPBBBGLCBPhGVCJJ98P3ECJJ98P3IGOP9OABPBBBGRALPMLVORXMpScxql358e8fCffEPhP9OP/6EARALPMBEDIWdQKZhoaky8aeGLCZP+sEP/6EGWP/gEALCZP+rECZP+sEP/6EGdP/gEP/kEP/lEGLjB/+fsPaAdALAVP+2EGVAdCJJJJ94PhGQP9OP9RP/kEGdAdP/mEALALP/mEAWAVAWAQP9OP9RP/kEGLALP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGVP/kECZP+rEAdAWP/mEAVP/kECffIPhP9OP9QGdALAWP/mEAVP/kECUPSCBPlDCBPlICBPlOCBPlRCBPlQCBPlKCBPlpCBPlSP9OGLPMWdkyQK8aeXM35pS8e8fP9QPKBBABARAOP9OAdALPMBEZhDIoaLVcxORqlP9QPKBBABCAFHBADCLFGDAE6MBKKK94EIU8jJJJJBCA9rGI8kJJJJBABAEC98gGLZ+JJJJBDNALAE9PMBAIAECIgGVCITGEFCBCAAE9r/8KBAIABALCITFGBAE/8QBBAIAVZ+JJJJBABAIAE/8QBBKAICAF8kJJJJBK/hILDUE97EUV978jJJJJBCZ9rHDDNAEtMBCBHIINADABPBBBGLABCZFGVPBBBGOPMLVORXMpScxql358e8fGRCZP+sEGWCLP+rEPKLBABjBBJzPaj/zL81zPaAWCIPhP9QP/6EP/nEGWALAOPMBEDIWdQKZhoaky8aeGLCZP+rECZP+sEP/6EP/mEGOAOP/mEAWALCZP+sEP/6EP/mEGdAdP/mEAWARCZP+rECZP+sEP/6EP/mEGRARP/mEP/kEP/kEP/lECBPhP+4EP/jEjB/+fsPaGWP/mEjBBN0PaGLP/kECffIPhGQP9OAdAWP/mEALP/kECZP+rEP9QGdARAWP/mEALP/kECZP+rEAOAWP/mEALP/kEAQP9OP9QGWPMBEZhDIoaLVcxORqlGLP5BADPBLBPeB+t+J83IBABCWFALP5EADPBLBPeE+t+J83IBAVAdAWPMWdkyQK8aeXM35pS8e8fGWP5BADPBLBPeD+t+J83IBABCkFAWP5EADPBLBPeI+t+J83IBABCAFHBAICLFGIAE6MBKKK/3EDIUE978jJJJJBC/AB9rHIDNADCD4AE2GLC98gGVtMBCBHDABHEINAEAEPBBBGOCWP+rECWP+sEP/6EAOCkP+sEClP+rECJJJ/8IPhP+uEP/mEPKBBAECZFHEADCLFGDAV6MBKKDNAVAL9PMBAIALCIgGDCDTGEvCBC/ABAE9r/8KBAIABAVCDTFGVAE/8QBBDNADtMBAIAIPBLBGOCWP+rECWP+sEP/6EAOCkP+sEClP+rECJJJ/8IPhP+uEP/mEPKLBKAVAIAE/8QBBKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIKKKEBCJWKLZ9tBB");const o=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(var r=0;r<e.length;++r){const t=e.charCodeAt(r);n[r]=t>96?t-71:t>64?t-65:t>47?t+4:t>46?63:62}let o=0;for(r=0;r<e.length;++r)n[o++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,o)}(r),{}).then((function(e){n=e.instance,n.exports.__wasm_call_ctors()}));function i(e,t,r,o,i,a){const s=n.exports.sbrk,u=r+3&-4,c=s(u*o),l=s(i.length),d=new Uint8Array(n.exports.memory.buffer);d.set(i,l);const f=e(c,r,o,l,i.length);if(0==f&&a&&a(c,u,o),t.set(d.subarray(c,c+r*o)),s(c-s(0)),0!=f)throw new Error("Malformed buffer data: "+f)}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:o,supported:!0,decodeVertexBuffer:function(e,t,r,o,s){i(n.exports.meshopt_decodeVertexBuffer,e,t,r,o,n.exports[a[s]])},decodeIndexBuffer:function(e,t,r,o){i(n.exports.meshopt_decodeIndexBuffer,e,t,r,o)},decodeIndexSequence:function(e,t,r,o){i(n.exports.meshopt_decodeIndexSequence,e,t,r,o)},decodeGltfBuffer:function(e,t,r,o,u,c){i(n.exports[s[u]],e,t,r,o,n.exports[a[c]])}}}(),B=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}(),T=B(void 0,(function(){return T.toString().search("(((.+)+)+)+$").toString().constructor(T).search("(((.+)+)+)+$")}));T();const x={Invalid:0,Position:1,PositionW:2,Normal:4,Tangent:8,FirstTexcoord:16,SecondTexcoord:32,Color:64,SecondColor:128,Custom0:512,Custom1:1024};function b(e,t,n){n=e.byteLength;e=e.subarray(0,0+n);return new TextDecoder("utf-8").decode(e)}function g(e,t,n){const r=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;return{string:b(new Uint8Array(e,n,r)),bytesOffset:n+=r,length:r}}function D(e,t,n,r,o,i){let a,s=0;const u=o.vertexAttributes,c=o.attrLocation;switch(t){case x.Normal:case x.FirstTexcoord:case x.SecondTexcoord:s=2*Uint16Array.BYTES_PER_ELEMENT,0==(16&i)&&(t===x.FirstTexcoord||t===x.SecondTexcoord)&&(s=2*Float32Array.BYTES_PER_ELEMENT),a=new Uint8Array(e*s);break;case x.Color:case x.SecondColor:s=4*Uint8Array.BYTES_PER_ELEMENT,a=new Uint8Array(4*e);break;case x.Custom0:case x.Custom1:s=Float32Array.BYTES_PER_ELEMENT*n,a=new Uint8Array(e*n*4);break;default:s=4*Uint16Array.BYTES_PER_ELEMENT,a=new Uint8Array(e*s)}let l,d;switch(h.decodeVertexBuffer(a,e,s,r,r.length),t){case x.Position:c.aPosition=u.length,u.push({index:c.aPosition,typedArray:new Uint16Array(a.buffer,0,a.length/2),componentsPerAttribute:4,componentDatatype:5122,offsetInBytes:0,strideInBytes:0,normalize:!1}),o.verticesCount=e;break;case x.Normal:c.aNormal=u.length,u.push({index:c.aNormal,typedArray:new Int16Array(a.buffer,0,a.length/2),componentsPerAttribute:2,componentDatatype:5122,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case x.FirstTexcoord:0==(16&i)?(d=5126,l=new Float32Array(a.buffer,0,a.length/4)):(d=5122,l=new Uint16Array(a.buffer,0,a.length/2)),c.aTexCoord0=u.length,u.push({index:c.aTexCoord0,typedArray:l,componentsPerAttribute:2,componentDatatype:d,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case x.SecondTexcoord:0==(16&i)?(d=5126,l=new Float32Array(a.buffer,0,a.length/4)):(d=5122,l=new Uint16Array(a.buffer,0,a.length/2)),c.aTexCoord1=u.length,u.push({index:c.aTexCoord1,typedArray:l,componentsPerAttribute:2,componentDatatype:d,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case x.Color:c.aColor=u.length,u.push({index:c.aColor,typedArray:a,componentsPerAttribute:4,componentDatatype:5121,offsetInBytes:0,strideInBytes:0,normalize:!0});break;case x.SecondColor:c.aSecondColor=u.length,u.push({index:c.aSecondColor,typedArray:a,componentsPerAttribute:4,componentDatatype:5120,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case x.Custom0:c.aCustom0=u.length,u.push({index:c.aCustom0,typedArray:new Float32Array(a.buffer,0,a.length/4),componentsPerAttribute:n,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case x.Custom1:c.aCustom1=u.length,u.push({index:c.aCustom1,typedArray:new Float32Array(a.buffer,0,a.length/4),componentsPerAttribute:n,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,normalize:!1})}}function P(e,t,n,r,o){const i=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT,r.compressOptions=i;const a=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT,r.minVerticesValue={x:0,y:0,z:0,w:0},r.minTexCoordValue=[{x:0,y:0},{x:0,y:0}],r.texCoordCompressConstant=[{x:0,y:0,z:0},{x:0,y:0,z:0}];for(let o=0;o<a;o++){const s=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT,r.vertCompressConstant=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,r.minVerticesValue.x=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,r.minVerticesValue.y=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,r.minVerticesValue.z=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT;const u=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT;const c=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT;const l=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT;const d=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT;const f=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT;const p=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT;const _=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT;const A=t.getFloat64(n,!0);n+=Float64Array.BYTES_PER_ELEMENT,r.minTexCoordValue[0].x=l,r.minTexCoordValue[0].y=d,r.minTexCoordValue[1].x=_,r.minTexCoordValue[1].y=A,r.texCoordCompressConstant[0].x=u,r.texCoordCompressConstant[0].y=c,r.texCoordCompressConstant[1].x=f,r.texCoordCompressConstant[1].y=p;const m=t.getInt32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT;for(let o=0;o<m;o++){const o=t.getInt32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT;let a=0;(o===x.Custom0||o===x.Custom1)&&(a=t.getInt32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT);const u=t.getInt32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT;const c=new Uint8Array(e,n,u);let l=(n+=Uint8Array.BYTES_PER_ELEMENT*u)%4;l&&(l=4-l),n+=l,D(s,o,a,c,r,i)}const C=g(e,t,n);n=C.bytesOffset,r.customVertexAttribute=JSON.parse(C.string);const y="aCustom"+r.customVertexAttribute.TextureCoordMatrix,E="aCustom"+r.customVertexAttribute.VertexWeight;void 0!==r.attrLocation[y]&&(r.attrLocation.aTextureCoordMatrix=r.attrLocation[y],o===a-1&&delete r.attrLocation[y]),void 0!==r.attrLocation[E]&&(r.attrLocation.aVertexWeight=r.attrLocation[E],o===a-1&&delete r.attrLocation[E]);let h=n%4;h&&(h=4-h),n+=h}return n}function v(e,t,n,r,o){const i=t.getInt32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT;for(let o=0;o<i;o++){const o={},i=t.getInt32(n,!0);if(n+=Int32Array.BYTES_PER_ELEMENT,i<1)continue;const a=t.getInt8(n,!0);n+=Int8Array.BYTES_PER_ELEMENT,t.getInt8(n,!0),n+=Int8Array.BYTES_PER_ELEMENT;const s=t.getInt8(n,!0);n+=Int8Array.BYTES_PER_ELEMENT,t.getInt8(n,!0),n+=Int8Array.BYTES_PER_ELEMENT;const u=t.getInt32(n,!0);let c;n+=Int32Array.BYTES_PER_ELEMENT,13!==s?(c=new Uint8Array(e,n,u),n+=Uint8Array.BYTES_PER_ELEMENT*u):(c=new Uint32Array(e,n,u),n+=Uint32Array.BYTES_PER_ELEMENT*u);let l,d=n%4;d&&(d=4-d),n+=d,13!==s?(l=new Uint8Array(i*Uint32Array.BYTES_PER_ELEMENT),h.decodeIndexBuffer(l,i,Uint32Array.BYTES_PER_ELEMENT,c)):l=c;const f=t.getInt32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT,o.indexType=a;const p=0===a?new Uint16Array(i):new Uint32Array(i);o.indicesCount=i;const _=new Uint32Array(l.buffer,l.byteOffset,l.byteLength/4);p.set(_,0),o.indicesTypedArray=p,o.primitiveType=s;for(let r=0;r<f;r++){const r=g(e,t,n);n=r.bytesOffset,o.materialCode=r.string}r.push(o),d=n%4,d&&(d=4-d),n+=d}return n}function M(e){let t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;function n(e,t){e||u("Assertion failed: "+t)}function r(e,t,n){let r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(n-t>16&&e.subarray&&oe)return oe.decode(e.subarray(t,n));for(r="";t<n;){let n=e[t++];if(128&n){const o=63&e[t++];if(192==(224&n))r+=String.fromCharCode((31&n)<<6|o);else{const i=63&e[t++];n=224==(240&n)?(15&n)<<12|o<<6|i:(7&n)<<18|o<<12|i<<6|63&e[t++],n<65536?r+=String.fromCharCode(n):(n-=65536,r+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else r+=String.fromCharCode(n)}return r}function o(e,t){return e?r(ae,e,t):""}function i(e,t){return e%t>0&&(e+=t-e%t),e}function a(e){ce=e,G.HEAP8=ie=new Int8Array(e),G.HEAP16=new Int16Array(e),G.HEAP32=se=new Int32Array(e),G.HEAPU8=ae=new Uint8Array(e),G.HEAPU16=new Uint16Array(e),G.HEAPU32=new Uint32Array(e),G.HEAPF32=new Float32Array(e),G.HEAPF64=new Float64Array(e)}function s(e){for(;e.length>0;){const t=e.shift();if("function"==typeof t)t();else{const e=t.func;"number"==typeof e?void 0===t.arg?G.dynCall_v(e):G.dynCall_vi(e,t.arg):e(void 0===t.arg?null:t.arg)}}}function u(e){throw G.onAbort&&G.onAbort(e),Q(e+=""),$(e),re=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function c(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}function l(){try{if(ee)return new Uint8Array(ee);if(Z)return Z(ye);throw"both async and sync fetching of the wasm failed"}catch(e){u(e)}}function d(){if(!d.strings){const e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:K};let t;for(t in Ee)e[t]=Ee[t];const n=[];for(t in e)n.push(t+"="+e[t]);d.strings=n}return d.strings}function f(e){function t(){if(!ar&&(ar=!0,!re)){if(_e=!0,s(de),s(fe),G.onRuntimeInitialized&&G.onRuntimeInitialized(),G.postRun)for("function"==typeof G.postRun&&(G.postRun=[G.postRun]);G.postRun.length;)pe.unshift(G.postRun.shift());s(pe)}}if(!(Ae>0)){if(G.preRun)for("function"==typeof G.preRun&&(G.preRun=[G.preRun]);G.preRun.length;)le.unshift(G.preRun.shift());s(le),Ae>0||(G.setStatus?(G.setStatus("Running..."),setTimeout((function(){setTimeout((function(){G.setStatus("")}),1),t()}),1)):t())}}function p(){}function _(e){return(e||p).__cache__}function A(e,t){const n=_(t);let r=n[e];return r||(r=Object.create((t||p).prototype),r.ptr=e,n[e]=r)}function m(e){if("string"==typeof e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t=r<=2047?t+2:r<=65535?t+3:t+4}if(n=0,(r=(t=Array(t+1)).length)>0){r=n+r-1;for(let o=0;o<e.length;++o){let i=e.charCodeAt(o);if(i>=55296&&i<=57343){i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)}if(i<=127){if(n>=r)break;t[n++]=i}else{if(i<=2047){if(n+1>=r)break;t[n++]=192|i>>6}else{if(i<=65535){if(n+2>=r)break;t[n++]=224|i>>12}else{if(n+3>=r)break;t[n++]=240|i>>18,t[n++]=128|i>>12&63}t[n++]=128|i>>6&63}t[n++]=128|63&i}}t[n]=0}e=sr.alloc(t,ie),sr.copy(t,ie,e)}return e}function C(){throw"cannot construct a Status, no constructor in IDL"}function y(){this.ptr=ve(),_(y)[this.ptr]=this}function E(){this.ptr=Se(),_(E)[this.ptr]=this}function h(){this.ptr=Oe(),_(h)[this.ptr]=this}function B(){this.ptr=Ve(),_(B)[this.ptr]=this}function T(){this.ptr=Ye(),_(T)[this.ptr]=this}function x(){this.ptr=je(),_(x)[this.ptr]=this}function b(){this.ptr=it(),_(b)[this.ptr]=this}function g(){this.ptr=ut(),_(g)[this.ptr]=this}function D(){this.ptr=_t(),_(D)[this.ptr]=this}function P(){this.ptr=yt(),_(P)[this.ptr]=this}function v(){this.ptr=Pt(),_(v)[this.ptr]=this}function M(){this.ptr=Lt(),_(M)[this.ptr]=this}function I(){this.ptr=Rt(),_(I)[this.ptr]=this}function L(){this.ptr=Gt(),_(L)[this.ptr]=this}function S(){this.ptr=Vt(),_(S)[this.ptr]=this}function F(){this.ptr=_n(),_(F)[this.ptr]=this}function N(){throw"cannot construct a VoidPtr, no constructor in IDL"}function R(){this.ptr=hn(),_(R)[this.ptr]=this}function O(){this.ptr=bn(),_(O)[this.ptr]=this}"undefined"!=typeof __filename&&(t=t||__filename);var G=void 0!==(e=e||{})?e:{};let w=!1,U=!1;G.onRuntimeInitialized=function(){w=!0,U&&"function"==typeof G.onModuleLoaded&&G.onModuleLoaded(G)},G.onModuleParsed=function(){U=!0,w&&"function"==typeof G.onModuleLoaded&&G.onModuleLoaded(G)},G.isVersionSupported=function(e){return"string"==typeof e&&(!((e=e.split(".")).length<2||e.length>3)&&(1==e[0]&&e[1]>=0&&e[1]<=3||!(0!=e[0]||e[1]>10)))};let V,H={};for(V in G)G.hasOwnProperty(V)&&(H[V]=G[V]);var K="./this.program",k=!1,Y=!1;let z=!1,J=!1;k="object"==typeof window,Y="function"==typeof importScripts,z="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!k&&!Y,J=!k&&!z&&!Y;var X="";let j,W;if(z){X=__dirname+"/";var q=function(e,t){return j||(j=require("fs")),W||(W=require("path")),e=W.normalize(e),j.readFileSync(e,t?null:"utf8")},Z=function(e){return(e=q(e,!0)).buffer||(e=new Uint8Array(e)),n(e.buffer),e};process.argv.length>1&&(K=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",u),G.inspect=function(){return"[Emscripten Module object]"}}else J?("undefined"!=typeof read&&(q=function(e){return read(e)}),Z=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(n("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(k||Y)&&(Y?X=self.location.href:document.currentScript&&(X=document.currentScript.src),t&&(X=t),X=0!==X.indexOf("blob:")?X.substr(0,X.lastIndexOf("/")+1):"",q=function(e){const t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},Y&&(Z=function(e){const t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var Q=G.print||console.log.bind(console),$=G.printErr||console.warn.bind(console);for(V in H)H.hasOwnProperty(V)&&(G[V]=H[V]);let ee,te;H=null,G.thisProgram&&(K=G.thisProgram),G.wasmBinary&&(ee=G.wasmBinary),"object"!=typeof WebAssembly&&$("no native wasm support detected");const ne=new WebAssembly.Table({initial:381,maximum:381,element:"anyfunc"});var re=!1,oe="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;let ie,ae,se;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");let ue=G.TOTAL_MEMORY||16777216;if(te=G.wasmMemory?G.wasmMemory:new WebAssembly.Memory({initial:ue/65536}))var ce=te.buffer;ue=ce.byteLength,a(ce),se[4604]=5261456;var le=[],de=[],fe=[],pe=[],_e=!1,Ae=0;let me=null;G.preloadedImages={},G.preloadedAudios={};var Ce,ye="draco_decoder.wasm";c(ye)||(Ce=ye,ye=G.locateFile?G.locateFile(Ce,X):X+Ce),de.push({func:function(){xe()}});var Ee={},he={buffers:[null,[],[]],printChar:function(e,t){const n=he.buffers[e];0===t||10===t?((1===e?Q:$)(r(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return he.varargs+=4,se[he.varargs-4>>2]},getStr:function(){return o(he.get())},get64:function(){const e=he.get();return he.get(),e},getZero:function(){he.get()}};const Be={__cxa_allocate_exception:function(e){return ir(e)},__cxa_throw:function(e,t,n){throw"uncaught_exception"in or?or.uncaught_exceptions++:or.uncaught_exceptions=1,e},abort:function(){u()},emscripten_get_sbrk_ptr:function(){return 18416},emscripten_memcpy_big:function(e,t,n){ae.set(ae.subarray(t,t+n),e)},emscripten_resize_heap:function(e){if(e>2147418112)return!1;for(var t=Math.max(ie.length,16777216);t<e;)t=t<=536870912?i(2*t,65536):Math.min(i((3*t+2147483648)/4,65536),2147418112);e:{try{te.grow(t-ce.byteLength+65535>>16),a(te.buffer);var n=1;break e}catch(e){}n=void 0}return!!n},environ_get:function(e,t){let n=0;return d().forEach((function(r,o){let i=t+n;for(o=se[e+4*o>>2]=i,i=0;i<r.length;++i)ie[o++>>0]=r.charCodeAt(i);ie[o>>0]=0,n+=r.length+1})),0},environ_sizes_get:function(e,t){const n=d();se[e>>2]=n.length;let r=0;return n.forEach((function(e){r+=e.length+1})),se[t>>2]=r,0},fd_close:function(e){return 0},fd_seek:function(e,t,n,r,o){return 0},fd_write:function(e,t,n,r){try{for(var o=0,i=0;i<n;i++){for(var a=se[t+8*i>>2],s=se[t+(8*i+4)>>2],c=0;c<s;c++)he.printChar(e,ae[a+c]);o+=s}return se[r>>2]=o,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||u(e),e.errno}},memory:te,setTempRet0:function(e){},table:ne},Te=function(){function e(e,t){G.asm=e.exports,Ae--,G.monitorRunDependencies&&G.monitorRunDependencies(Ae),0==Ae&&me&&(e=me,me=null,e())}function t(t){e(t.instance)}function n(e){return(ee||!k&&!Y||"function"!=typeof fetch?new Promise((function(e,t){e(l())})):fetch(ye,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ye+"'";return e.arrayBuffer()})).catch((function(){return l()}))).then((function(e){return WebAssembly.instantiate(e,r)})).then(e,(function(e){$("failed to asynchronously prepare wasm: "+e),u(e)}))}var r={env:Be,wasi_unstable:Be};if(Ae++,G.monitorRunDependencies&&G.monitorRunDependencies(Ae),G.instantiateWasm)try{return G.instantiateWasm(r,e)}catch(e){return $("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(ee||"function"!=typeof WebAssembly.instantiateStreaming||c(ye)||"function"!=typeof fetch)return n(t);fetch(ye,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){$("wasm streaming compile failed: "+e),$("falling back to ArrayBuffer instantiation"),n(t)}))}))}(),{}}();G.asm=Te;var xe=G.___wasm_call_ctors=function(){return G.asm.__wasm_call_ctors.apply(null,arguments)};const be=G._emscripten_bind_Status_code_0=function(){return G.asm.emscripten_bind_Status_code_0.apply(null,arguments)},ge=G._emscripten_bind_Status_ok_0=function(){return G.asm.emscripten_bind_Status_ok_0.apply(null,arguments)},De=G._emscripten_bind_Status_error_msg_0=function(){return G.asm.emscripten_bind_Status_error_msg_0.apply(null,arguments)},Pe=G._emscripten_bind_Status___destroy___0=function(){return G.asm.emscripten_bind_Status___destroy___0.apply(null,arguments)};var ve=G._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return G.asm.emscripten_bind_DracoUInt16Array_DracoUInt16Array_0.apply(null,arguments)};const Me=G._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return G.asm.emscripten_bind_DracoUInt16Array_GetValue_1.apply(null,arguments)},Ie=G._emscripten_bind_DracoUInt16Array_size_0=function(){return G.asm.emscripten_bind_DracoUInt16Array_size_0.apply(null,arguments)},Le=G._emscripten_bind_DracoUInt16Array___destroy___0=function(){return G.asm.emscripten_bind_DracoUInt16Array___destroy___0.apply(null,arguments)};var Se=G._emscripten_bind_PointCloud_PointCloud_0=function(){return G.asm.emscripten_bind_PointCloud_PointCloud_0.apply(null,arguments)};const Fe=G._emscripten_bind_PointCloud_num_attributes_0=function(){return G.asm.emscripten_bind_PointCloud_num_attributes_0.apply(null,arguments)},Ne=G._emscripten_bind_PointCloud_num_points_0=function(){return G.asm.emscripten_bind_PointCloud_num_points_0.apply(null,arguments)},Re=G._emscripten_bind_PointCloud___destroy___0=function(){return G.asm.emscripten_bind_PointCloud___destroy___0.apply(null,arguments)};var Oe=G._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return G.asm.emscripten_bind_DracoUInt8Array_DracoUInt8Array_0.apply(null,arguments)};const Ge=G._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return G.asm.emscripten_bind_DracoUInt8Array_GetValue_1.apply(null,arguments)},we=G._emscripten_bind_DracoUInt8Array_size_0=function(){return G.asm.emscripten_bind_DracoUInt8Array_size_0.apply(null,arguments)},Ue=G._emscripten_bind_DracoUInt8Array___destroy___0=function(){return G.asm.emscripten_bind_DracoUInt8Array___destroy___0.apply(null,arguments)};var Ve=G._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return G.asm.emscripten_bind_DracoUInt32Array_DracoUInt32Array_0.apply(null,arguments)};const He=G._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return G.asm.emscripten_bind_DracoUInt32Array_GetValue_1.apply(null,arguments)},Ke=G._emscripten_bind_DracoUInt32Array_size_0=function(){return G.asm.emscripten_bind_DracoUInt32Array_size_0.apply(null,arguments)},ke=G._emscripten_bind_DracoUInt32Array___destroy___0=function(){return G.asm.emscripten_bind_DracoUInt32Array___destroy___0.apply(null,arguments)};var Ye=G._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return G.asm.emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0.apply(null,arguments)};const ze=G._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return G.asm.emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1.apply(null,arguments)},Je=G._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return G.asm.emscripten_bind_AttributeOctahedronTransform_quantization_bits_0.apply(null,arguments)},Xe=G._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return G.asm.emscripten_bind_AttributeOctahedronTransform___destroy___0.apply(null,arguments)};var je=G._emscripten_bind_PointAttribute_PointAttribute_0=function(){return G.asm.emscripten_bind_PointAttribute_PointAttribute_0.apply(null,arguments)};const We=G._emscripten_bind_PointAttribute_size_0=function(){return G.asm.emscripten_bind_PointAttribute_size_0.apply(null,arguments)},qe=G._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return G.asm.emscripten_bind_PointAttribute_GetAttributeTransformData_0.apply(null,arguments)},Ze=G._emscripten_bind_PointAttribute_attribute_type_0=function(){return G.asm.emscripten_bind_PointAttribute_attribute_type_0.apply(null,arguments)},Qe=G._emscripten_bind_PointAttribute_data_type_0=function(){return G.asm.emscripten_bind_PointAttribute_data_type_0.apply(null,arguments)},$e=G._emscripten_bind_PointAttribute_num_components_0=function(){return G.asm.emscripten_bind_PointAttribute_num_components_0.apply(null,arguments)},et=G._emscripten_bind_PointAttribute_normalized_0=function(){return G.asm.emscripten_bind_PointAttribute_normalized_0.apply(null,arguments)},tt=G._emscripten_bind_PointAttribute_byte_stride_0=function(){return G.asm.emscripten_bind_PointAttribute_byte_stride_0.apply(null,arguments)},nt=G._emscripten_bind_PointAttribute_byte_offset_0=function(){return G.asm.emscripten_bind_PointAttribute_byte_offset_0.apply(null,arguments)},rt=G._emscripten_bind_PointAttribute_unique_id_0=function(){return G.asm.emscripten_bind_PointAttribute_unique_id_0.apply(null,arguments)},ot=G._emscripten_bind_PointAttribute___destroy___0=function(){return G.asm.emscripten_bind_PointAttribute___destroy___0.apply(null,arguments)};var it=G._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return G.asm.emscripten_bind_AttributeTransformData_AttributeTransformData_0.apply(null,arguments)};const at=G._emscripten_bind_AttributeTransformData_transform_type_0=function(){return G.asm.emscripten_bind_AttributeTransformData_transform_type_0.apply(null,arguments)},st=G._emscripten_bind_AttributeTransformData___destroy___0=function(){return G.asm.emscripten_bind_AttributeTransformData___destroy___0.apply(null,arguments)};var ut=G._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return G.asm.emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0.apply(null,arguments)};const ct=G._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return G.asm.emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1.apply(null,arguments)},lt=G._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return G.asm.emscripten_bind_AttributeQuantizationTransform_quantization_bits_0.apply(null,arguments)},dt=G._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return G.asm.emscripten_bind_AttributeQuantizationTransform_min_value_1.apply(null,arguments)},ft=G._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return G.asm.emscripten_bind_AttributeQuantizationTransform_range_0.apply(null,arguments)},pt=G._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return G.asm.emscripten_bind_AttributeQuantizationTransform___destroy___0.apply(null,arguments)};var _t=G._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return G.asm.emscripten_bind_DracoInt8Array_DracoInt8Array_0.apply(null,arguments)};const At=G._emscripten_bind_DracoInt8Array_GetValue_1=function(){return G.asm.emscripten_bind_DracoInt8Array_GetValue_1.apply(null,arguments)},mt=G._emscripten_bind_DracoInt8Array_size_0=function(){return G.asm.emscripten_bind_DracoInt8Array_size_0.apply(null,arguments)},Ct=G._emscripten_bind_DracoInt8Array___destroy___0=function(){return G.asm.emscripten_bind_DracoInt8Array___destroy___0.apply(null,arguments)};var yt=G._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return G.asm.emscripten_bind_MetadataQuerier_MetadataQuerier_0.apply(null,arguments)};const Et=G._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return G.asm.emscripten_bind_MetadataQuerier_HasEntry_2.apply(null,arguments)},ht=G._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return G.asm.emscripten_bind_MetadataQuerier_GetIntEntry_2.apply(null,arguments)},Bt=G._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return G.asm.emscripten_bind_MetadataQuerier_GetIntEntryArray_3.apply(null,arguments)},Tt=G._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return G.asm.emscripten_bind_MetadataQuerier_GetDoubleEntry_2.apply(null,arguments)},xt=G._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return G.asm.emscripten_bind_MetadataQuerier_GetStringEntry_2.apply(null,arguments)},bt=G._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return G.asm.emscripten_bind_MetadataQuerier_NumEntries_1.apply(null,arguments)},gt=G._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return G.asm.emscripten_bind_MetadataQuerier_GetEntryName_2.apply(null,arguments)},Dt=G._emscripten_bind_MetadataQuerier___destroy___0=function(){return G.asm.emscripten_bind_MetadataQuerier___destroy___0.apply(null,arguments)};var Pt=G._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return G.asm.emscripten_bind_DracoInt16Array_DracoInt16Array_0.apply(null,arguments)};const vt=G._emscripten_bind_DracoInt16Array_GetValue_1=function(){return G.asm.emscripten_bind_DracoInt16Array_GetValue_1.apply(null,arguments)},Mt=G._emscripten_bind_DracoInt16Array_size_0=function(){return G.asm.emscripten_bind_DracoInt16Array_size_0.apply(null,arguments)},It=G._emscripten_bind_DracoInt16Array___destroy___0=function(){return G.asm.emscripten_bind_DracoInt16Array___destroy___0.apply(null,arguments)};var Lt=G._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return G.asm.emscripten_bind_DracoFloat32Array_DracoFloat32Array_0.apply(null,arguments)};const St=G._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return G.asm.emscripten_bind_DracoFloat32Array_GetValue_1.apply(null,arguments)},Ft=G._emscripten_bind_DracoFloat32Array_size_0=function(){return G.asm.emscripten_bind_DracoFloat32Array_size_0.apply(null,arguments)},Nt=G._emscripten_bind_DracoFloat32Array___destroy___0=function(){return G.asm.emscripten_bind_DracoFloat32Array___destroy___0.apply(null,arguments)};var Rt=G._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return G.asm.emscripten_bind_GeometryAttribute_GeometryAttribute_0.apply(null,arguments)};const Ot=G._emscripten_bind_GeometryAttribute___destroy___0=function(){return G.asm.emscripten_bind_GeometryAttribute___destroy___0.apply(null,arguments)};var Gt=G._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return G.asm.emscripten_bind_DecoderBuffer_DecoderBuffer_0.apply(null,arguments)};const wt=G._emscripten_bind_DecoderBuffer_Init_2=function(){return G.asm.emscripten_bind_DecoderBuffer_Init_2.apply(null,arguments)},Ut=G._emscripten_bind_DecoderBuffer___destroy___0=function(){return G.asm.emscripten_bind_DecoderBuffer___destroy___0.apply(null,arguments)};var Vt=G._emscripten_bind_Decoder_Decoder_0=function(){return G.asm.emscripten_bind_Decoder_Decoder_0.apply(null,arguments)};const Ht=G._emscripten_bind_Decoder_GetEncodedGeometryType_1=function(){return G.asm.emscripten_bind_Decoder_GetEncodedGeometryType_1.apply(null,arguments)},Kt=G._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return G.asm.emscripten_bind_Decoder_DecodeBufferToPointCloud_2.apply(null,arguments)},kt=G._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return G.asm.emscripten_bind_Decoder_DecodeBufferToMesh_2.apply(null,arguments)},Yt=G._emscripten_bind_Decoder_GetAttributeId_2=function(){return G.asm.emscripten_bind_Decoder_GetAttributeId_2.apply(null,arguments)},zt=G._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return G.asm.emscripten_bind_Decoder_GetAttributeIdByName_2.apply(null,arguments)},Jt=G._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3.apply(null,arguments)},Xt=G._emscripten_bind_Decoder_GetAttribute_2=function(){return G.asm.emscripten_bind_Decoder_GetAttribute_2.apply(null,arguments)},jt=G._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return G.asm.emscripten_bind_Decoder_GetAttributeByUniqueId_2.apply(null,arguments)},Wt=G._emscripten_bind_Decoder_GetMetadata_1=function(){return G.asm.emscripten_bind_Decoder_GetMetadata_1.apply(null,arguments)},qt=G._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return G.asm.emscripten_bind_Decoder_GetAttributeMetadata_2.apply(null,arguments)},Zt=G._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return G.asm.emscripten_bind_Decoder_GetFaceFromMesh_3.apply(null,arguments)},Qt=G._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return G.asm.emscripten_bind_Decoder_GetTriangleStripsFromMesh_2.apply(null,arguments)},$t=G._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return G.asm.emscripten_bind_Decoder_GetTrianglesUInt16Array_3.apply(null,arguments)},en=G._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return G.asm.emscripten_bind_Decoder_GetTrianglesUInt32Array_3.apply(null,arguments)},tn=G._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeFloat_3.apply(null,arguments)},nn=G._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3.apply(null,arguments)},rn=G._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeIntForAllPoints_3.apply(null,arguments)},on=G._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3.apply(null,arguments)},an=G._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3.apply(null,arguments)},sn=G._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3.apply(null,arguments)},un=G._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3.apply(null,arguments)},cn=G._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3.apply(null,arguments)},ln=G._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return G.asm.emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3.apply(null,arguments)},dn=G._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return G.asm.emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5.apply(null,arguments)},fn=G._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return G.asm.emscripten_bind_Decoder_SkipAttributeTransform_1.apply(null,arguments)},pn=G._emscripten_bind_Decoder___destroy___0=function(){return G.asm.emscripten_bind_Decoder___destroy___0.apply(null,arguments)};var _n=G._emscripten_bind_Mesh_Mesh_0=function(){return G.asm.emscripten_bind_Mesh_Mesh_0.apply(null,arguments)};const An=G._emscripten_bind_Mesh_num_faces_0=function(){return G.asm.emscripten_bind_Mesh_num_faces_0.apply(null,arguments)},mn=G._emscripten_bind_Mesh_num_attributes_0=function(){return G.asm.emscripten_bind_Mesh_num_attributes_0.apply(null,arguments)},Cn=G._emscripten_bind_Mesh_num_points_0=function(){return G.asm.emscripten_bind_Mesh_num_points_0.apply(null,arguments)},yn=G._emscripten_bind_Mesh___destroy___0=function(){return G.asm.emscripten_bind_Mesh___destroy___0.apply(null,arguments)},En=G._emscripten_bind_VoidPtr___destroy___0=function(){return G.asm.emscripten_bind_VoidPtr___destroy___0.apply(null,arguments)};var hn=G._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return G.asm.emscripten_bind_DracoInt32Array_DracoInt32Array_0.apply(null,arguments)};const Bn=G._emscripten_bind_DracoInt32Array_GetValue_1=function(){return G.asm.emscripten_bind_DracoInt32Array_GetValue_1.apply(null,arguments)},Tn=G._emscripten_bind_DracoInt32Array_size_0=function(){return G.asm.emscripten_bind_DracoInt32Array_size_0.apply(null,arguments)},xn=G._emscripten_bind_DracoInt32Array___destroy___0=function(){return G.asm.emscripten_bind_DracoInt32Array___destroy___0.apply(null,arguments)};var bn=G._emscripten_bind_Metadata_Metadata_0=function(){return G.asm.emscripten_bind_Metadata_Metadata_0.apply(null,arguments)};const gn=G._emscripten_bind_Metadata___destroy___0=function(){return G.asm.emscripten_bind_Metadata___destroy___0.apply(null,arguments)},Dn=G._emscripten_enum_draco_StatusCode_OK=function(){return G.asm.emscripten_enum_draco_StatusCode_OK.apply(null,arguments)},Pn=G._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return G.asm.emscripten_enum_draco_StatusCode_DRACO_ERROR.apply(null,arguments)},vn=G._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return G.asm.emscripten_enum_draco_StatusCode_IO_ERROR.apply(null,arguments)},Mn=G._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return G.asm.emscripten_enum_draco_StatusCode_INVALID_PARAMETER.apply(null,arguments)},In=G._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return G.asm.emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION.apply(null,arguments)},Ln=G._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return G.asm.emscripten_enum_draco_StatusCode_UNKNOWN_VERSION.apply(null,arguments)},Sn=G._emscripten_enum_draco_DataType_DT_INVALID=function(){return G.asm.emscripten_enum_draco_DataType_DT_INVALID.apply(null,arguments)},Fn=G._emscripten_enum_draco_DataType_DT_INT8=function(){return G.asm.emscripten_enum_draco_DataType_DT_INT8.apply(null,arguments)},Nn=G._emscripten_enum_draco_DataType_DT_UINT8=function(){return G.asm.emscripten_enum_draco_DataType_DT_UINT8.apply(null,arguments)},Rn=G._emscripten_enum_draco_DataType_DT_INT16=function(){return G.asm.emscripten_enum_draco_DataType_DT_INT16.apply(null,arguments)},On=G._emscripten_enum_draco_DataType_DT_UINT16=function(){return G.asm.emscripten_enum_draco_DataType_DT_UINT16.apply(null,arguments)},Gn=G._emscripten_enum_draco_DataType_DT_INT32=function(){return G.asm.emscripten_enum_draco_DataType_DT_INT32.apply(null,arguments)},wn=G._emscripten_enum_draco_DataType_DT_UINT32=function(){return G.asm.emscripten_enum_draco_DataType_DT_UINT32.apply(null,arguments)},Un=G._emscripten_enum_draco_DataType_DT_INT64=function(){return G.asm.emscripten_enum_draco_DataType_DT_INT64.apply(null,arguments)},Vn=G._emscripten_enum_draco_DataType_DT_UINT64=function(){return G.asm.emscripten_enum_draco_DataType_DT_UINT64.apply(null,arguments)},Hn=G._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return G.asm.emscripten_enum_draco_DataType_DT_FLOAT32.apply(null,arguments)},Kn=G._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return G.asm.emscripten_enum_draco_DataType_DT_FLOAT64.apply(null,arguments)},kn=G._emscripten_enum_draco_DataType_DT_BOOL=function(){return G.asm.emscripten_enum_draco_DataType_DT_BOOL.apply(null,arguments)},Yn=G._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return G.asm.emscripten_enum_draco_DataType_DT_TYPES_COUNT.apply(null,arguments)},zn=G._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return G.asm.emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE.apply(null,arguments)},Jn=G._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return G.asm.emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD.apply(null,arguments)},Xn=G._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return G.asm.emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH.apply(null,arguments)},jn=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return G.asm.emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM.apply(null,arguments)},Wn=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return G.asm.emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM.apply(null,arguments)},qn=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return G.asm.emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM.apply(null,arguments)},Zn=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return G.asm.emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM.apply(null,arguments)},Qn=G._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return G.asm.emscripten_enum_draco_GeometryAttribute_Type_INVALID.apply(null,arguments)},$n=G._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return G.asm.emscripten_enum_draco_GeometryAttribute_Type_POSITION.apply(null,arguments)},er=G._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return G.asm.emscripten_enum_draco_GeometryAttribute_Type_NORMAL.apply(null,arguments)},tr=G._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return G.asm.emscripten_enum_draco_GeometryAttribute_Type_COLOR.apply(null,arguments)},nr=G._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return G.asm.emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD.apply(null,arguments)},rr=G._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return G.asm.emscripten_enum_draco_GeometryAttribute_Type_GENERIC.apply(null,arguments)};G._setThrew=function(){return G.asm.setThrew.apply(null,arguments)};var or=G.__ZSt18uncaught_exceptionv=function(){return G.asm._ZSt18uncaught_exceptionv.apply(null,arguments)};G._free=function(){return G.asm.free.apply(null,arguments)};var ir=G._malloc=function(){return G.asm.malloc.apply(null,arguments)};let ar;if(G.stackSave=function(){return G.asm.stackSave.apply(null,arguments)},G.stackAlloc=function(){return G.asm.stackAlloc.apply(null,arguments)},G.stackRestore=function(){return G.asm.stackRestore.apply(null,arguments)},G.__growWasmMemory=function(){return G.asm.__growWasmMemory.apply(null,arguments)},G.dynCall_ii=function(){return G.asm.dynCall_ii.apply(null,arguments)},G.dynCall_vi=function(){return G.asm.dynCall_vi.apply(null,arguments)},G.dynCall_iii=function(){return G.asm.dynCall_iii.apply(null,arguments)},G.dynCall_vii=function(){return G.asm.dynCall_vii.apply(null,arguments)},G.dynCall_iiii=function(){return G.asm.dynCall_iiii.apply(null,arguments)},G.dynCall_v=function(){return G.asm.dynCall_v.apply(null,arguments)},G.dynCall_viii=function(){return G.asm.dynCall_viii.apply(null,arguments)},G.dynCall_viiii=function(){return G.asm.dynCall_viiii.apply(null,arguments)},G.dynCall_iiiiiii=function(){return G.asm.dynCall_iiiiiii.apply(null,arguments)},G.dynCall_iidiiii=function(){return G.asm.dynCall_iidiiii.apply(null,arguments)},G.dynCall_jiji=function(){return G.asm.dynCall_jiji.apply(null,arguments)},G.dynCall_viiiiii=function(){return G.asm.dynCall_viiiiii.apply(null,arguments)},G.dynCall_viiiii=function(){return G.asm.dynCall_viiiii.apply(null,arguments)},G.asm=Te,G.then=function(e){if(ar)e(G);else{const t=G.onRuntimeInitialized;G.onRuntimeInitialized=function(){t&&t(),e(G)}}return G},me=function e(){ar||f(),ar||(me=e)},G.run=f,G.preInit)for("function"==typeof G.preInit&&(G.preInit=[G.preInit]);G.preInit.length>0;)G.preInit.pop()();f(),p.prototype=Object.create(p.prototype),p.prototype.constructor=p,p.prototype.__class__=p,p.__cache__={},G.WrapperObject=p,G.getCache=_,G.wrapPointer=A,G.castObject=function(e,t){return A(e.ptr,t)},G.NULL=A(0),G.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete _(e.__class__)[e.ptr]},G.compare=function(e,t){return e.ptr===t.ptr},G.getPointer=function(e){return e.ptr},G.getClass=function(e){return e.__class__};var sr={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(sr.needed){for(let e=0;e<sr.temps.length;e++)G._free(sr.temps[e]);sr.temps.length=0,G._free(sr.buffer),sr.buffer=0,sr.size+=sr.needed,sr.needed=0}sr.buffer||(sr.size+=128,sr.buffer=G._malloc(sr.size),n(sr.buffer)),sr.pos=0},alloc:function(e,t){return n(sr.buffer),e=(e=e.length*t.BYTES_PER_ELEMENT)+7&-8,sr.pos+e>=sr.size?(n(e>0),sr.needed+=e,t=G._malloc(e),sr.temps.push(t)):(t=sr.buffer+sr.pos,sr.pos+=e),t},copy:function(e,t,n){switch(t.BYTES_PER_ELEMENT){case 2:n>>=1;break;case 4:n>>=2;break;case 8:n>>=3}for(let r=0;r<e.length;r++)t[n+r]=e[r]}};return C.prototype=Object.create(p.prototype),C.prototype.constructor=C,C.prototype.__class__=C,C.__cache__={},G.Status=C,C.prototype.code=C.prototype.code=function(){return be(this.ptr)},C.prototype.ok=C.prototype.ok=function(){return!!ge(this.ptr)},C.prototype.error_msg=C.prototype.error_msg=function(){return o(De(this.ptr))},C.prototype.__destroy__=C.prototype.__destroy__=function(){Pe(this.ptr)},y.prototype=Object.create(p.prototype),y.prototype.constructor=y,y.prototype.__class__=y,y.__cache__={},G.DracoUInt16Array=y,y.prototype.GetValue=y.prototype.GetValue=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Me(t,e)},y.prototype.size=y.prototype.size=function(){return Ie(this.ptr)},y.prototype.__destroy__=y.prototype.__destroy__=function(){Le(this.ptr)},E.prototype=Object.create(p.prototype),E.prototype.constructor=E,E.prototype.__class__=E,E.__cache__={},G.PointCloud=E,E.prototype.num_attributes=E.prototype.num_attributes=function(){return Fe(this.ptr)},E.prototype.num_points=E.prototype.num_points=function(){return Ne(this.ptr)},E.prototype.__destroy__=E.prototype.__destroy__=function(){Re(this.ptr)},h.prototype=Object.create(p.prototype),h.prototype.constructor=h,h.prototype.__class__=h,h.__cache__={},G.DracoUInt8Array=h,h.prototype.GetValue=h.prototype.GetValue=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Ge(t,e)},h.prototype.size=h.prototype.size=function(){return we(this.ptr)},h.prototype.__destroy__=h.prototype.__destroy__=function(){Ue(this.ptr)},B.prototype=Object.create(p.prototype),B.prototype.constructor=B,B.prototype.__class__=B,B.__cache__={},G.DracoUInt32Array=B,B.prototype.GetValue=B.prototype.GetValue=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),He(t,e)},B.prototype.size=B.prototype.size=function(){return Ke(this.ptr)},B.prototype.__destroy__=B.prototype.__destroy__=function(){ke(this.ptr)},T.prototype=Object.create(p.prototype),T.prototype.constructor=T,T.prototype.__class__=T,T.__cache__={},G.AttributeOctahedronTransform=T,T.prototype.InitFromAttribute=T.prototype.InitFromAttribute=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!ze(t,e)},T.prototype.quantization_bits=T.prototype.quantization_bits=function(){return Je(this.ptr)},T.prototype.__destroy__=T.prototype.__destroy__=function(){Xe(this.ptr)},x.prototype=Object.create(p.prototype),x.prototype.constructor=x,x.prototype.__class__=x,x.__cache__={},G.PointAttribute=x,x.prototype.size=x.prototype.size=function(){return We(this.ptr)},x.prototype.GetAttributeTransformData=x.prototype.GetAttributeTransformData=function(){return A(qe(this.ptr),b)},x.prototype.attribute_type=x.prototype.attribute_type=function(){return Ze(this.ptr)},x.prototype.data_type=x.prototype.data_type=function(){return Qe(this.ptr)},x.prototype.num_components=x.prototype.num_components=function(){return $e(this.ptr)},x.prototype.normalized=x.prototype.normalized=function(){return!!et(this.ptr)},x.prototype.byte_stride=x.prototype.byte_stride=function(){return tt(this.ptr)},x.prototype.byte_offset=x.prototype.byte_offset=function(){return nt(this.ptr)},x.prototype.unique_id=x.prototype.unique_id=function(){return rt(this.ptr)},x.prototype.__destroy__=x.prototype.__destroy__=function(){ot(this.ptr)},b.prototype=Object.create(p.prototype),b.prototype.constructor=b,b.prototype.__class__=b,b.__cache__={},G.AttributeTransformData=b,b.prototype.transform_type=b.prototype.transform_type=function(){return at(this.ptr)},b.prototype.__destroy__=b.prototype.__destroy__=function(){st(this.ptr)},g.prototype=Object.create(p.prototype),g.prototype.constructor=g,g.prototype.__class__=g,g.__cache__={},G.AttributeQuantizationTransform=g,g.prototype.InitFromAttribute=g.prototype.InitFromAttribute=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!ct(t,e)},g.prototype.quantization_bits=g.prototype.quantization_bits=function(){return lt(this.ptr)},g.prototype.min_value=g.prototype.min_value=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),dt(t,e)},g.prototype.range=g.prototype.range=function(){return ft(this.ptr)},g.prototype.__destroy__=g.prototype.__destroy__=function(){pt(this.ptr)},D.prototype=Object.create(p.prototype),D.prototype.constructor=D,D.prototype.__class__=D,D.__cache__={},G.DracoInt8Array=D,D.prototype.GetValue=D.prototype.GetValue=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),At(t,e)},D.prototype.size=D.prototype.size=function(){return mt(this.ptr)},D.prototype.__destroy__=D.prototype.__destroy__=function(){Ct(this.ptr)},P.prototype=Object.create(p.prototype),P.prototype.constructor=P,P.prototype.__class__=P,P.__cache__={},G.MetadataQuerier=P,P.prototype.HasEntry=P.prototype.HasEntry=function(e,t){const n=this.ptr;return sr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:m(t),!!Et(n,e,t)},P.prototype.GetIntEntry=P.prototype.GetIntEntry=function(e,t){const n=this.ptr;return sr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:m(t),ht(n,e,t)},P.prototype.GetIntEntryArray=P.prototype.GetIntEntryArray=function(e,t,n){const r=this.ptr;sr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:m(t),n&&"object"==typeof n&&(n=n.ptr),Bt(r,e,t,n)},P.prototype.GetDoubleEntry=P.prototype.GetDoubleEntry=function(e,t){const n=this.ptr;return sr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:m(t),Tt(n,e,t)},P.prototype.GetStringEntry=P.prototype.GetStringEntry=function(e,t){const n=this.ptr;return sr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:m(t),o(xt(n,e,t))},P.prototype.NumEntries=P.prototype.NumEntries=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),bt(t,e)},P.prototype.GetEntryName=P.prototype.GetEntryName=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),o(gt(n,e,t))},P.prototype.__destroy__=P.prototype.__destroy__=function(){Dt(this.ptr)},v.prototype=Object.create(p.prototype),v.prototype.constructor=v,v.prototype.__class__=v,v.__cache__={},G.DracoInt16Array=v,v.prototype.GetValue=v.prototype.GetValue=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),vt(t,e)},v.prototype.size=v.prototype.size=function(){return Mt(this.ptr)},v.prototype.__destroy__=v.prototype.__destroy__=function(){It(this.ptr)},M.prototype=Object.create(p.prototype),M.prototype.constructor=M,M.prototype.__class__=M,M.__cache__={},G.DracoFloat32Array=M,M.prototype.GetValue=M.prototype.GetValue=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),St(t,e)},M.prototype.size=M.prototype.size=function(){return Ft(this.ptr)},M.prototype.__destroy__=M.prototype.__destroy__=function(){Nt(this.ptr)},I.prototype=Object.create(p.prototype),I.prototype.constructor=I,I.prototype.__class__=I,I.__cache__={},G.GeometryAttribute=I,I.prototype.__destroy__=I.prototype.__destroy__=function(){Ot(this.ptr)},L.prototype=Object.create(p.prototype),L.prototype.constructor=L,L.prototype.__class__=L,L.__cache__={},G.DecoderBuffer=L,L.prototype.Init=L.prototype.Init=function(e,t){const n=this.ptr;if(sr.prepare(),"object"==typeof e&&"object"==typeof e){const t=sr.alloc(e,ie);sr.copy(e,ie,t),e=t}t&&"object"==typeof t&&(t=t.ptr),wt(n,e,t)},L.prototype.__destroy__=L.prototype.__destroy__=function(){Ut(this.ptr)},S.prototype=Object.create(p.prototype),S.prototype.constructor=S,S.prototype.__class__=S,S.__cache__={},G.Decoder=S,S.prototype.GetEncodedGeometryType=S.prototype.GetEncodedGeometryType=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Ht(t,e)},S.prototype.DecodeBufferToPointCloud=S.prototype.DecodeBufferToPointCloud=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),A(Kt(n,e,t),C)},S.prototype.DecodeBufferToMesh=S.prototype.DecodeBufferToMesh=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),A(kt(n,e,t),C)},S.prototype.GetAttributeId=S.prototype.GetAttributeId=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Yt(n,e,t)},S.prototype.GetAttributeIdByName=S.prototype.GetAttributeIdByName=function(e,t){const n=this.ptr;return sr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:m(t),zt(n,e,t)},S.prototype.GetAttributeIdByMetadataEntry=S.prototype.GetAttributeIdByMetadataEntry=function(e,t,n){const r=this.ptr;return sr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:m(t),n=n&&"object"==typeof n?n.ptr:m(n),Jt(r,e,t,n)},S.prototype.GetAttribute=S.prototype.GetAttribute=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),A(Xt(n,e,t),x)},S.prototype.GetAttributeByUniqueId=S.prototype.GetAttributeByUniqueId=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),A(jt(n,e,t),x)},S.prototype.GetMetadata=S.prototype.GetMetadata=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),A(Wt(t,e),O)},S.prototype.GetAttributeMetadata=S.prototype.GetAttributeMetadata=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),A(qt(n,e,t),O)},S.prototype.GetFaceFromMesh=S.prototype.GetFaceFromMesh=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!Zt(r,e,t,n)},S.prototype.GetTriangleStripsFromMesh=S.prototype.GetTriangleStripsFromMesh=function(e,t){const n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Qt(n,e,t)},S.prototype.GetTrianglesUInt16Array=S.prototype.GetTrianglesUInt16Array=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!$t(r,e,t,n)},S.prototype.GetTrianglesUInt32Array=S.prototype.GetTrianglesUInt32Array=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!en(r,e,t,n)},S.prototype.GetAttributeFloat=S.prototype.GetAttributeFloat=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!tn(r,e,t,n)},S.prototype.GetAttributeFloatForAllPoints=S.prototype.GetAttributeFloatForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!nn(r,e,t,n)},S.prototype.GetAttributeIntForAllPoints=S.prototype.GetAttributeIntForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!rn(r,e,t,n)},S.prototype.GetAttributeInt8ForAllPoints=S.prototype.GetAttributeInt8ForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!on(r,e,t,n)},S.prototype.GetAttributeUInt8ForAllPoints=S.prototype.GetAttributeUInt8ForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!an(r,e,t,n)},S.prototype.GetAttributeInt16ForAllPoints=S.prototype.GetAttributeInt16ForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!sn(r,e,t,n)},S.prototype.GetAttributeUInt16ForAllPoints=S.prototype.GetAttributeUInt16ForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!un(r,e,t,n)},S.prototype.GetAttributeInt32ForAllPoints=S.prototype.GetAttributeInt32ForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!cn(r,e,t,n)},S.prototype.GetAttributeUInt32ForAllPoints=S.prototype.GetAttributeUInt32ForAllPoints=function(e,t,n){const r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!ln(r,e,t,n)},S.prototype.GetAttributeDataArrayForAllPoints=S.prototype.GetAttributeDataArrayForAllPoints=function(e,t,n,r,o){const i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),o&&"object"==typeof o&&(o=o.ptr),!!dn(i,e,t,n,r,o)},S.prototype.SkipAttributeTransform=S.prototype.SkipAttributeTransform=function(e){const t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),fn(t,e)},S.prototype.__destroy__=S.prototype.__destroy__=function(){pn(this.ptr)},F.prototype=Object.create(p.prototype),F.prototype.constructor=F,F.prototype.__class__=F,F.__cache__={},G.Mesh=F,F.prototype.num_faces=F.prototype.num_faces=function(){return An(this.ptr)},F.prototype.num_attributes=F.prototype.num_attributes=function(){return mn(this.ptr)},F.prototype.num_points=F.prototype.num_points=function(){return Cn(this.ptr)},F.prototype.__destroy__=F.prototype.__destroy__=function(){yn(this.ptr)},N.prototype=Object.create(p.prototype),N.prototype.constructor=N,N.prototype.__class__=N,N.__cache__={},G.VoidPtr=N,N.prototype.__destroy__=N.prototype.__destroy__=function(){En(this.ptr)},R.prototype=Object.create(p.prototype),R.prototype.constructor=R,R.prototype.__class__=R,R.__cache__={},G.DracoInt32Array=R,R.prototype.GetValue=R.prototype.GetValue=function(e){const t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Bn(t,e)},R.prototype.size=R.prototype.size=function(){return Tn(this.ptr)},R.prototype.__destroy__=R.prototype.__destroy__=function(){xn(this.ptr)},O.prototype=Object.create(p.prototype),O.prototype.constructor=O,O.prototype.__class__=O,O.__cache__={},G.Metadata=O,O.prototype.__destroy__=O.prototype.__destroy__=function(){gn(this.ptr)},function(){function e(){G.OK=Dn(),G.DRACO_ERROR=Pn(),G.IO_ERROR=vn(),G.INVALID_PARAMETER=Mn(),G.UNSUPPORTED_VERSION=In(),G.UNKNOWN_VERSION=Ln(),G.DT_INVALID=Sn(),G.DT_INT8=Fn(),G.DT_UINT8=Nn(),G.DT_INT16=Rn(),G.DT_UINT16=On(),G.DT_INT32=Gn(),G.DT_UINT32=wn(),G.DT_INT64=Un(),G.DT_UINT64=Vn(),G.DT_FLOAT32=Hn(),G.DT_FLOAT64=Kn(),G.DT_BOOL=kn(),G.DT_TYPES_COUNT=Yn(),G.INVALID_GEOMETRY_TYPE=zn(),G.POINT_CLOUD=Jn(),G.TRIANGULAR_MESH=Xn(),G.ATTRIBUTE_INVALID_TRANSFORM=jn(),G.ATTRIBUTE_NO_TRANSFORM=Wn(),G.ATTRIBUTE_QUANTIZATION_TRANSFORM=qn(),G.ATTRIBUTE_OCTAHEDRON_TRANSFORM=Zn(),G.INVALID=Qn(),G.POSITION=$n(),G.NORMAL=er(),G.COLOR=tr(),G.TEX_COORD=nr(),G.GENERIC=rr()}_e?e():fe.unshift(e)}(),"function"==typeof G.onModuleParsed&&G.onModuleParsed(),e}const I=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();var L=I(void 0,(function(){return L.toString().search("(((.+)+)+)+$").toString().constructor(L).search("(((.+)+)+)+$")}));L();const S={SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32};function F(){}let N;function R(e){return null!=e}const O={BYTE:5120,DOUBLE:5130,FLOAT:5126,INT:5124,SHORT:5122,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,fromTypedArray:function(e){return e instanceof Int8Array?O.BYTE:e instanceof Uint8Array?O.UNSIGNED_BYTE:e instanceof Int16Array?O.SHORT:e instanceof Uint16Array?O.UNSIGNED_SHORT:e instanceof Int32Array?O.INT:e instanceof Uint32Array?O.UNSIGNED_INT:e instanceof Float32Array?O.FLOAT:e instanceof Float64Array?O.DOUBLE:void 0},getSizeInBytes:function(e){if(!R(e))throw new Error("value is required.");switch(e){case O.BYTE:return Int8Array.BYTES_PER_ELEMENT;case O.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case O.SHORT:return Int16Array.BYTES_PER_ELEMENT;case O.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case O.INT:return Int32Array.BYTES_PER_ELEMENT;case O.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case O.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case O.DOUBLE:return Float64Array.BYTES_PER_ELEMENT;default:throw new Error("componentDatatype is not a valid value.")}}},G={UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123},w=65536;function U(e,t){const n=e.num_points(),r=e.num_faces(),o=new N.DracoInt32Array,i=3*r,a=G.createTypedArray(n,i);let s=0;for(let n=0;n<r;++n)t.GetFaceFromMesh(e,n,o),a[s+0]=o.GetValue(0),a[s+1]=o.GetValue(1),a[s+2]=o.GetValue(2),s+=3;let u=G.UNSIGNED_SHORT;return a instanceof Uint32Array&&(u=G.UNSIGNED_INT),N.destroy(o),{typedArray:a,numberOfIndices:i,indexDataType:u}}function V(e,t,n,r,o){let i,a;r.quantizationBits<=8?(a=new N.DracoUInt8Array,i=new Uint8Array(o),t.GetAttributeUInt8ForAllPoints(e,n,a)):(a=new N.DracoUInt16Array,i=new Uint16Array(o),t.GetAttributeUInt16ForAllPoints(e,n,a));for(let e=0;e<o;++e)i[e]=a.GetValue(e);return N.destroy(a),i}function H(e,t,n,r){let o,i;switch(n.data_type()){case 1:case 11:i=new N.DracoInt8Array,o=new Int8Array(r),t.GetAttributeInt8ForAllPoints(e,n,i);break;case 2:i=new N.DracoUInt8Array,o=new Uint8Array(r),t.GetAttributeUInt8ForAllPoints(e,n,i);break;case 3:i=new N.DracoInt16Array,o=new Int16Array(r),t.GetAttributeInt16ForAllPoints(e,n,i);break;case 4:i=new N.DracoUInt16Array,o=new Uint16Array(r),t.GetAttributeUInt16ForAllPoints(e,n,i);break;case 5:case 7:i=new N.DracoInt32Array,o=new Int32Array(r),t.GetAttributeInt32ForAllPoints(e,n,i);break;case 6:case 8:i=new N.DracoUInt32Array,o=new Uint32Array(r),t.GetAttributeUInt32ForAllPoints(e,n,i);break;case 9:case 10:i=new N.DracoFloat32Array,o=new Float32Array(r),t.GetAttributeFloatForAllPoints(e,n,i)}for(let e=0;e<r;++e)o[e]=i.GetValue(e);return N.destroy(i),o}function K(e,t,n){const r=e.num_points(),o=n.num_components();let i,a=new N.AttributeQuantizationTransform;if(a.InitFromAttribute(n)){const e=new Array(o);for(let t=0;t<o;++t)e[t]=a.min_value(t);i={quantizationBits:a.quantization_bits(),minValues:e,range:a.range(),octEncoded:!1}}N.destroy(a),a=new N.AttributeOctahedronTransform,a.InitFromAttribute(n)&&(i={quantizationBits:a.quantization_bits(),octEncoded:!0}),N.destroy(a);const s=r*o;let u;u=i?V(e,t,n,i,s):H(e,t,n,s);const c=O.fromTypedArray(u);return{array:u,data:{componentsPerAttribute:o,componentDatatype:c,byteOffset:n.byte_offset(),byteStride:O.getSizeInBytes(c)*o,normalized:n.normalized(),quantization:i}}}function k(e,t,n,r){const o=n.vertexAttributes,i=n.attrLocation;if(n.compressOptions=0,R(r.posUniqueID)&&r.posUniqueID>=0){n.compressOptions|=S.SVC_Vertex;const s=t.GetAttribute(e,r.posUniqueID),u=K(e,t,s),c=u.data.componentsPerAttribute;n.verticesCount=u.array.length/c,n.vertCompressConstant=u.data.quantization.range/(1<<u.data.quantization.quantizationBits);var a=u.data.quantization.minValues;n.minVerticesValue={x:a[0],y:a[1],z:a[2],w:a[3]},c>3&&(n.minVerticesValue.w=a[3]),i.aPosition=o.length,o.push({index:i.aPosition,typedArray:u.array,componentsPerAttribute:c,componentDatatype:u.data.componentDatatype,offsetInBytes:u.data.byteOffset,strideInBytes:u.data.byteStride,normalize:u.data.normalized})}if(R(r.normalUniqueID)&&r.normalUniqueID>=0){n.compressOptions|=S.SVC_Normal;const a=t.GetAttribute(e,r.normalUniqueID),s=K(e,t,a),u=s.data.quantization;n.normalRangeConstant=(1<<u.quantizationBits)-1,i.aNormal=o.length,o.push({index:i.aNormal,typedArray:s.array,componentsPerAttribute:s.data.componentsPerAttribute,componentDatatype:s.data.componentDatatype,offsetInBytes:s.data.byteOffset,strideInBytes:s.data.byteStride,normalize:s.data.normalized})}if(R(r.colorUniqueID)&&r.colorUniqueID>=0){n.compressOptions|=S.SVC_VertexColor;const a=t.GetAttribute(e,r.colorUniqueID),s=K(e,t,a);i.aColor=o.length,o.push({index:i.aColor,typedArray:s.array,componentsPerAttribute:s.data.componentsPerAttribute,componentDatatype:s.data.componentDatatype,offsetInBytes:s.data.byteOffset,strideInBytes:s.data.byteStride,normalize:s.data.normalized})}for(var s=0;s<r.texCoordUniqueIDs.length;s++){n.texCoordCompressConstant=[],n.minTexCoordValue=[];const u=r.texCoordUniqueIDs[s];if(u<0)continue;const c=t.GetAttribute(e,u),l=K(e,t,c);if(R(l.data.quantization)){n.compressOptions|=S.SVC_TexutreCoord,n.texCoordCompressConstant.push(l.data.quantization.range/(1<<l.data.quantization.quantizationBits));a=l.data.quantization.minValues;n.minTexCoordValue.push({x:a[0],y:a[1]})}const d="aTexCoord"+s;i[d]=o.length,o.push({index:i[d],typedArray:l.array,componentsPerAttribute:l.data.componentsPerAttribute,componentDatatype:l.data.componentDatatype,offsetInBytes:l.data.byteOffset,strideInBytes:l.data.byteStride,normalize:l.data.normalized}),n.textureCoordIsW=!0}for(s=0;s<r.vertexAttrUniqueIDs.length;s++){const a=r.vertexAttrUniqueIDs[s];if(a<0)continue;const u=t.GetAttribute(e,a),c=K(e,t,u);i.aVertexWeight=o.length,o.push({index:i.aVertexWeight,typedArray:c.array,componentsPerAttribute:c.data.componentsPerAttribute,componentDatatype:c.data.componentDatatype,offsetInBytes:c.data.byteOffset,strideInBytes:c.data.byteStride,normalize:c.data.normalized}),n.customVertexAttribute={VertexWeight:0}}}G.createTypedArray=function(e,t){if(!R(e))throw new Error("numberOfVertices is required.");return e>=w?new Uint32Array(t):new Uint16Array(t)},F.dracoDecodePointCloud=function(e,t,n,r,o){N=e;const i=new N.Decoder,a=["POSITION","NORMAL","COLOR"];for(let e=0;e<a.length;++e)i.SkipAttributeTransform(N[a[e]]);const s=new N.DecoderBuffer;s.Init(t,n);if(i.GetEncodedGeometryType(s)!==N.POINT_CLOUD)throw new Error("Draco geometry type must be POINT_CLOUD.");const u=new N.PointCloud,c=i.DecodeBufferToPointCloud(s,u);if(!c.ok()||0===u.ptr)throw new Error("Error decoding draco point cloud: "+c.error_msg());N.destroy(s),k(u,i,r,o),N.destroy(u),N.destroy(i)},F.dracoDecodeMesh=function(e,t,n,r,o,i){N=e;const a=new N.Decoder,s=["POSITION","NORMAL","COLOR","TEX_COORD"];for(let e=0;e<s.length;++e)a.SkipAttributeTransform(N[s[e]]);const u=new N.DecoderBuffer;u.Init(t,n);if(a.GetEncodedGeometryType(u)!==N.TRIANGULAR_MESH)throw new Error("Unsupported draco mesh geometry type.");const c=new N.Mesh;if(!a.DecodeBufferToMesh(u,c).ok()||0===c.ptr)return!1;N.destroy(u),k(c,a,r,i);const l=U(c,a);o.indicesTypedArray=l.typedArray,o.indicesCount=l.numberOfIndices,o.indexType=l.indexDataType,o.primitiveType=4,N.destroy(c),N.destroy(a)};const Y=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();var z=Y(void 0,(function(){return z.toString().search("(((.+)+)+)+$").toString().constructor(z).search("(((.+)+)+)+$")}));function J(e){return null!=e}z();const X=[];function j(e,t,n){n=e.byteLength;e=e.subarray(0,0+n);return new TextDecoder("utf-8").decode(e)}function W(e,t,n){const r=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;return{string:j(new Uint8Array(e,n,r)),bytesOffset:n+=r,length:r}}function q(e,t,n){if(!J(t))throw new Error("arraySlice: begin is undefined");if(!J(n))throw new Error("arraySlice: end is undefined");if("function"==typeof e.slice)return e.slice(t,n);let r=Array.prototype.slice.call(e,t,n);const o=X.length;for(let t=0;t<o;++t)if(e instanceof X[t]){r=new X[t](r);break}return r}function Z(e,t,n,r,o,i,a){3===o&&(t.getInt32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT),o>=2&&(t.getInt32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT);const s={};let u;s.posUniqueID=t.getInt32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT,s.normalUniqueID=t.getInt32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT,s.colorUniqueID=t.getInt32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT,s.secondColorUniqueID=t.getInt32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT,3===o?(u=t.getUint32(n,!0),n+=Int32Array.BYTES_PER_ELEMENT):(u=t.getUint16(n,!0),n+=Int16Array.BYTES_PER_ELEMENT);const c=[];for(let e=0;e<u;e++){const e=t.getInt32(n,!0);c.push(e),n+=Int32Array.BYTES_PER_ELEMENT}s.texCoordUniqueIDs=c;const l=[];if(3===o){const e=t.getUint32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT;for(let r=0;r<e;r++){const e=t.getInt32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT,l.push(e)}}s.vertexAttrUniqueIDs=l;const d=t.getInt32(n,!0);n+=Int32Array.BYTES_PER_ELEMENT;const f={};if(d>0){const r=(C=W(e,t,n)).string;n=C.bytesOffset,f.materialCode=r,i.push(f)}let p;3===o&&(p=n%4,p&&(p=4-p),n+=p);let _=new Object;const A=t.getUint32(n,!0);let m=q(e,n+=Int32Array.BYTES_PER_ELEMENT,n+A);var C;(m=new Uint8Array(m),d>0?F.dracoDecodeMesh(a,m,A,r,f,s):F.dracoDecodePointCloud(a,m,A,r,s),(!_.min||!_.max)&&(_=void 0),n+=A,3===o)&&(p=n%4,p&&(p=4-p),p=(n=(C=W(e,t,n+=p)).bytesOffset)%4,p&&(p=4-p),n+=p);return n}function Q(){}function $(){let e,t;const n=new Promise((function(n,r){e=n,t=r}));return{resolve:e,reject:t,promise:n}}function ee(e){const t=$(),n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status<200||n.status>=300)throw t.reject(n.response),new Error(n.response);t.resolve(n.response)},n.onerror=function(e){t.reject(new Error(e))},n.send(),t.promise}let te;function ne(){te||ee("S3M_module/S3MParser/draco_decoder_new.wasm").then((function(e){M({wasmBinary:e}).then((function(e){te=e}))}))}"undefined"!=typeof ArrayBuffer&&(X.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&X.push(Uint8ClampedArray),"undefined"!=typeof CanvasPixelArray&&X.push(CanvasPixelArray)),ne(),Q.s3tc=!0,Q.pvrtc=!1,Q.etc1=!1;const re={SV_Unkown:0,SV_Standard:1,SV_Compressed:2,SV_DracoCompressed:3},oe={Standard:0,Draco:1,MeshOpt:2},ie={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT},ae={NONE:0,LUMINANCE_8:1,LUMINANCE_16:2,ALPHA:3,ALPHA_4_LUMINANCE_4:4,LUMINANCE_ALPHA:5,RGB_565:6,BGR565:7,RGB:10,BGR:11,ARGB:12,ABGR:13,BGRA:14,WEBP:25,RGBA:28,DXT1:17,DXT2:18,DXT3:19,DXT4:20,DXT5:21,CRN_DXT5:26,STANDARD_CRN:27,KTX2:31},se={SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32};function ue(e,t){const n=new Uint8Array(e,t);return s.inflate(n).buffer}function ce(e,t,n){n=e.byteLength;e=e.subarray(0,0+n);return new TextDecoder("utf-8").decode(e)}function le(e,t,n){const r=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;return{string:ce(new Uint8Array(e,n,r)),bytesOffset:n+=r,length:r}}function de(e,t,n,r){const o={},i=[],a=new Array(16);for(let e=0;e<16;e++)a[e]=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT;o.matrix=a,o.skeletonNames=i;const s=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let r=0;r<s;r++){const r=le(e,t,n);i.push(r.string),n=r.bytesOffset}return r.push(o),n}function fe(e,t,n,r,o){const i={};i.rangeList=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,i.rangeMode=t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT;const a={};a.x=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,a.y=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,a.z=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT;const s=t.getFloat64(n,!0);if(n+=Float64Array.BYTES_PER_ELEMENT,i.boundingSphere={center:a,radius:s},o>=3){const e={};e.x=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,e.y=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,e.z=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT;const r={};r.x=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,r.y=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,r.z=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT;const o={};o.x=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,o.y=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,o.z=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT;const a={};a.x=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,a.y=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,a.z=t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,i.obb={xExtent:r,yExtent:o,zExtent:a,center:e}}const u=le(e,t,n);let c=u.string;n=u.bytesOffset;const l=c.indexOf("Geometry");if(-1!==l){const e=c.substring(l);c=c.replace(e,"")}i.childTile=c,i.geodes=[];const d=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let r=0;r<d;r++)n=de(e,t,n,i.geodes);if(r.push(i),o>=3){n=le(e,t,n).bytesOffset}return n}function pe(e,t,n,r){const o={},i=[];t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT;const a=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let o=0;o<a;o++)n=fe(e,t,n,i,r.version);o.pageLods=i;const s=n%4;return 0!==s&&(n+=4-s),r.groupNode=o,n}function _e(e,t,n,r){const o=t.getUint32(n,!0);if(r.verticesCount=o,(n+=Uint32Array.BYTES_PER_ELEMENT)<=0)return n;const i=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;let a=t.getUint16(n,!0);a=i*Float32Array.BYTES_PER_ELEMENT,n+=Uint16Array.BYTES_PER_ELEMENT;const s=o*i*Float32Array.BYTES_PER_ELEMENT,u=new Uint8Array(e,n,s);n+=s;const c=r.vertexAttributes,l=r.attrLocation;return l.aPosition=c.length,c.push({index:l.aPosition,typedArray:u,componentsPerAttribute:i,componentDatatype:5126,offsetInBytes:0,strideInBytes:a,normalize:!1}),n}function Ae(e,t,n,r){const o=t.getUint32(n,!0);if(n+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return n;const i=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;const a=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;const s=o*i*Float32Array.BYTES_PER_ELEMENT,u=new Uint8Array(e,n,s);n+=s;const c=r.vertexAttributes,l=r.attrLocation;return l.aNormal=c.length,c.push({index:l.aNormal,typedArray:u,componentsPerAttribute:i,componentDatatype:5126,offsetInBytes:0,strideInBytes:a,normalize:!1}),n}function me(e,t,n,r){const o=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const i=r.verticesCount;let a;if(o>0){t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT,n+=2*Uint8Array.BYTES_PER_ELEMENT;const r=o*Uint8Array.BYTES_PER_ELEMENT*4;a=new Uint8Array(e,n,r).slice(0,r),n+=r}else{a=new Uint8Array(4*i);for(let e=0;e<i;e++)a[4*e]=255,a[4*e+1]=255,a[4*e+2]=255,a[4*e+3]=255}const s=r.vertexAttributes,u=r.attrLocation;return u.aColor=s.length,s.push({index:u.aColor,typedArray:a,componentsPerAttribute:4,componentDatatype:5121,offsetInBytes:0,strideInBytes:4,normalize:!0}),r.vertexColor=a,n}function Ce(e,t,n,r){const o=t.getUint32(n,!0);if(n+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return n;t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT,n+=2*Uint8Array.BYTES_PER_ELEMENT;const i=o*Uint8Array.BYTES_PER_ELEMENT*4,a=new Uint8Array(e,n,i);n+=i;const s=r.vertexAttributes,u=r.attrLocation;return u.aSecondColor=s.length,s.push({index:u.aSecondColor,typedArray:a,componentsPerAttribute:4,componentDatatype:5121,offsetInBytes:0,strideInBytes:4,normalize:!0}),n}function ye(e,t,n,r){const o=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT,n+=Uint16Array.BYTES_PER_ELEMENT;for(let i=0;i<o;i++){const o=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const a=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT;const s=o*a*Float32Array.BYTES_PER_ELEMENT,u=new Uint8Array(e,n,s);n+=s;const c="aTexCoord"+i,l=r.vertexAttributes,d=r.attrLocation;d[c]=l.length,l.push({index:d[c],typedArray:u,componentsPerAttribute:a,componentDatatype:5126,offsetInBytes:0,strideInBytes:a*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}return n}function Ee(e,t,n,r,o){const i=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT,n+=Uint16Array.BYTES_PER_ELEMENT;const a=r.vertexAttributes,s=r.attrLocation,u=new Uint8Array(e);for(let c=0;c<i;c++){const i=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const c=t.getUint16(n,!0);if(n+=Uint16Array.BYTES_PER_ELEMENT,16===c){n-=Uint16Array.BYTES_PER_ELEMENT;const e=3===o?Uint16Array.BYTES_PER_ELEMENT:Uint32Array.BYTES_PER_ELEMENT,t=i*(c*Float32Array.BYTES_PER_ELEMENT+e),l=u.subarray(n,n+t);n+=t;const d=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*c*i);r.instanceCount=i,r.instanceMode=c,r.instanceBuffer=d,r.instanceIndex=1;const f=Float32Array.BYTES_PER_ELEMENT*c+e;for(let t=0;t<i;t++){const n=t*f+e,r=l.subarray(n,n+f);d.set(r,t*(f-e))}const p=16*Float32Array.BYTES_PER_ELEMENT;s.uv2=a.length,a.push({index:s.uv2,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:0,strideInBytes:p,instanceDivisor:1}),s.uv3=a.length,a.push({index:s.uv3,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),s.uv4=a.length,a.push({index:s.uv4,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),s.secondary_colour=a.length,a.push({index:s.secondary_colour,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1})}else{t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT;const o=i*c*Float32Array.BYTES_PER_ELEMENT;if(17===c||29===c){const t=new Uint8Array(e,n,o);r.instanceCount=i,r.instanceMode=c,r.instanceBuffer=t,r.instanceIndex=1;const u=c*i*4,l=t.slice(0,u);let d;r.vertexColorInstance=l,17===c?(d=17*Float32Array.BYTES_PER_ELEMENT,s.uv2=a.length,a.push({index:s.uv2,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:0,strideInBytes:d,instanceDivisor:1}),s.uv3=a.length,a.push({index:s.uv3,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv4=a.length,a.push({index:s.uv4,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.secondary_colour=a.length,a.push({index:s.secondary_colour,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv6=a.length,a.push({index:s.uv6,componentsPerAttribute:4,componentDatatype:5121,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1})):29===c&&(d=29*Float32Array.BYTES_PER_ELEMENT,s.uv1=a.length,a.push({index:s.uv1,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:0,strideInBytes:d,instanceDivisor:1}),s.uv2=a.length,a.push({index:s.uv2,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv3=a.length,a.push({index:s.uv3,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv4=a.length,a.push({index:s.uv4,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv5=a.length,a.push({index:s.uv5,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv6=a.length,a.push({index:s.uv6,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv7=a.length,a.push({index:s.uv7,componentsPerAttribute:3,componentDatatype:5126,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.secondary_colour=a.length,a.push({index:s.secondary_colour,componentsPerAttribute:4,componentDatatype:5121,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}),s.uv9=a.length,a.push({index:s.uv9,componentsPerAttribute:4,componentDatatype:5121,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:d,instanceDivisor:1}))}else{const e=i*c;r.instanceBounds=new Float32Array(e);for(let o=0;o<e;o++)r.instanceBounds[o]=t.getFloat32(n+o*Float32Array.BYTES_PER_ELEMENT,!0)}n+=o}}return n}function he(e,t,n,r){const o=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let i=0;i<o;i++){const o=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const a=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;const s=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;const u=o*a*ie[s],c=new Uint8Array(e,n,u);n+=u;const l=r.vertexAttributes,d=r.attrLocation,f="aCustom"+i;d[f]=l.length,l.push({index:d[f],typedArray:c,componentsPerAttribute:a,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,normalize:!1})}return n}function Be(e,t,n,r){const o=t.getUint32(n,!0);if(r.verticesCount=o,(n+=Uint32Array.BYTES_PER_ELEMENT)<=0)return n;const i=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;let a=t.getUint16(n,!0);a=i*Int16Array.BYTES_PER_ELEMENT,n+=Uint16Array.BYTES_PER_ELEMENT;const s=t.getFloat32(n,!0);n+=Float32Array.BYTES_PER_ELEMENT;const u={};u.x=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,u.y=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,u.z=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,u.w=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,r.vertCompressConstant=s,r.minVerticesValue=u;const c=o*i*Int16Array.BYTES_PER_ELEMENT,l=new Uint8Array(e,n,c);n+=c;const d=r.vertexAttributes,f=r.attrLocation;return f.aPosition=d.length,d.push({index:f.aPosition,typedArray:l,componentsPerAttribute:i,componentDatatype:5122,offsetInBytes:0,strideInBytes:a,normalize:!1}),n}function Te(e,t,n,r){const o=t.getUint32(n,!0);if(n+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return n;t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT;const i=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;const a=2*o*Int16Array.BYTES_PER_ELEMENT,s=new Uint8Array(e,n,a);n+=a;const u=r.vertexAttributes,c=r.attrLocation;return c.aNormal=u.length,u.push({index:c.aNormal,typedArray:s,componentsPerAttribute:2,componentDatatype:5122,offsetInBytes:0,strideInBytes:i,normalize:!1}),n}function xe(e,t,n,r){r.texCoordCompressConstant=[],r.minTexCoordValue=[];const o=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT,n+=Uint16Array.BYTES_PER_ELEMENT;for(let i=0;i<o;i++){const o=t.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT,n+=3*Uint8Array.BYTES_PER_ELEMENT;const a=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const s=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT;const u=t.getFloat32(n,!0);n+=Float32Array.BYTES_PER_ELEMENT,r.texCoordCompressConstant.push(u);const c={};c.x=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,c.y=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,c.z=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,c.w=t.getFloat32(n,!0),n+=Float32Array.BYTES_PER_ELEMENT,r.minTexCoordValue.push(c);let l=a*s*Int16Array.BYTES_PER_ELEMENT;const d=new Uint8Array(e,n,l),f=(n+=l)%4;0!==f&&(n+=4-f);let p="aTexCoord"+i;const _=r.vertexAttributes,A=r.attrLocation;if(A[p]=_.length,_.push({index:A[p],typedArray:d,componentsPerAttribute:s,componentDatatype:5122,offsetInBytes:0,strideInBytes:s*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),o){l=a*Float32Array.BYTES_PER_ELEMENT;const t=new Uint8Array(e,n,l);n+=l,r.texCoordZMatrix=!0,p="aTexCoordZ"+i,A[p]=_.length,_.push({index:A[p],typedArray:t,componentsPerAttribute:1,componentDatatype:5126,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return n}function be(e,t,n,r){const o=t.getUint32(n,!0);if(n+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return n;const i=t.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(n,!0),n+=Uint16Array.BYTES_PER_ELEMENT;return n+=o*i*Float32Array.BYTES_PER_ELEMENT}function ge(e,t,n,r,o){if(o>=3&&(t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT),n=me(e,t,n=Ae(e,t,n=_e(e,t,n,r),r),r),o<3&&(n=Ce(e,t,n,r)),n=Ee(e,t,n=ye(e,t,n,r),r,o),o>=3){const o=le(e,t,n=he(e,t,n,r));n=o.bytesOffset,r.customVertexAttribute=JSON.parse(o.string);const i="aCustom"+r.customVertexAttribute.TextureCoordMatrix,a="aCustom"+r.customVertexAttribute.VertexWeight;void 0!==r.attrLocation[i]&&(r.attrLocation.aTextureCoordMatrix=r.attrLocation[i],delete r.attrLocation[i]),void 0!==r.attrLocation[a]&&(r.attrLocation.aVertexWeight=r.attrLocation[a],delete r.attrLocation[a]);let s=n%4;s&&(s=4-s),n=be(0,t,n+=s)}return n}function De(e,t,n,r,o){const i=t.getUint32(n,!0);return r.compressOptions=i,n+=Uint32Array.BYTES_PER_ELEMENT,n=(i&se.SVC_Vertex)===se.SVC_Vertex?Be(e,t,n,r):_e(e,t,n,r),n=Ce(e,t,n=me(e,t,n=(i&se.SVC_Normal)===se.SVC_Normal?Te(e,t,n,r):Ae(e,t,n,r),r),r),n=(i&se.SVC_TexutreCoord)===se.SVC_TexutreCoord?xe(e,t,n,r):ye(e,t,n,r),(i&se.SVC_TexutreCoordIsW)===se.SVC_TexutreCoordIsW&&(r.textureCoordIsW=!0),n=Ee(e,t,n,r,o)}function Pe(e,t,n,r,o){const i=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let a=0;a<i;a++){const i={};o>=3&&(t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT);const a=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const s=t.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT,t.getUint8(n,!0),n+=Uint8Array.BYTES_PER_ELEMENT;const u=t.getUint8(n,!0);if(n+=Uint8Array.BYTES_PER_ELEMENT,n+=Uint8Array.BYTES_PER_ELEMENT,a>0){let t,r=null;1===s||3===s?(t=a*Uint32Array.BYTES_PER_ELEMENT,r=new Uint8Array(e,n,t)):(t=a*Uint16Array.BYTES_PER_ELEMENT,r=new Uint8Array(e,n,t),a%2!=0&&(t+=2)),i.indicesTypedArray=r,n+=t}i.indicesCount=a,i.indexType=s,i.primitiveType=u;const c=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let r=0;r<c;r++){const r=le(e,t,n),o=r.string;n=r.bytesOffset,i.materialCode=o}if(0!==n%4){n+=4-n%4}r.push(i)}return n}function ve(e,t,n,r,o){t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT;const i=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let a=0;a<i;a++){o>=3&&(t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT);const i=le(e,t,n),a=i.string,s=(n=i.bytesOffset)%4;0!==s&&(n+=4-s);let u=t.getUint32(n,!0);if(n+=Int32Array.BYTES_PER_ELEMENT,o>=3)switch(u){case oe.Standard:u=re.SV_Standard;break;case oe.Draco:u=re.SV_DracoCompressed;break;case oe.MeshOpt:u=re.SV_Compressed}const c={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1},l=[];let d;u===re.SV_Standard?n=ge(e,t,n,c,o):u===re.SV_Compressed&&o>=3?n=P(e,t,n,c):u===re.SV_Compressed?n=De(e,t,n,c,o):u===re.SV_DracoCompressed&&(n=Z(e,t,n,c,o,l,te)),u===re.SV_Compressed&&o>=3?n=v(e,t,n,l):u===re.SV_DracoCompressed||(n=Pe(e,t,n,l,o)),2===l.length&&13===l[1].primitiveType&&l[1].indicesCount>=3&&(d=S3MEdgeProcessor.createEdgeDataByIndices(c,l[1])),r[a]={vertexPackage:c,arrIndexPackage:l,edgeGeometry:d},o>=3&&(t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT,t.getFloat64(n,!0),n+=Float64Array.BYTES_PER_ELEMENT)}if(o<3){n+=t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT}return n}function Me(e,t,n,r,o){const i=t.getUint32(n,!0),a=n+=Uint32Array.BYTES_PER_ELEMENT,s=a+i,u=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let i=0;i<u;i++){const i=le(e,t,n),s=i.string,u=((n=i.bytesOffset)-a)%4;0!==u&&(n+=4-u),t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT;const c=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const l=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let d=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const f=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const p=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let _=new Uint8Array(e,n,f);n+=f,3.01===o&&(d=Ge(d));let A=p===ae.RGB||p===ae.BGR?33776:33779;if(22===d&&(A=36196),!Q.s3tc&&(33776===A||33779===A)){const e=new Uint8Array(c*l*4);E.decode(e,c,l,_,p),_=e,d=0,A=p===ae.RGB||p===ae.RGB?273:4369}r[s]={id:s,width:c,height:l,compressType:d,nFormat:p,internalFormat:A,arrayBufferView:_}}return s}function Ie(e,t,n,r){const o=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const i=ce(new Uint8Array(e,n,o));return n+=o,r.materials=JSON.parse(i),n}const Le={red:0,green:0,blue:0,alpha:0};function Se(e,t,n){return n.red=e[t++],n.green=e[t++],n.blue=e[t++],n.alpha=e[t],n}const Fe=65536;function Ne(e,t,n,r,o,i){if(i>=3&&(r=t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT),1==(1&r)){t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT;const r=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let a=0;a<r;a++){const r=le(e,t,n),a=r.string;n=r.bytesOffset;const s=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const u={};o[a].pickInfo=u;if(-1==o[a].vertexPackage.instanceIndex){const e=new Float32Array(o[a].vertexPackage.verticesCount);for(let r=0;r<s;r++){const o=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;const i=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let a=0,s=0;u[o]={batchId:r};for(let o=0;o<i;o++)s=t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT,a=t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT,e.fill(r,s,s+a);u[o].vertexColorOffset=s,u[o].vertexCount=a}Re(o[a].vertexPackage,e,void 0)}else{const e=o[a].vertexPackage.instanceCount,r=o[a].vertexPackage.instanceBuffer,c=o[a].vertexPackage.instanceMode,l=new Float32Array(e),d=[];for(let e=0;e<s;e++){const e=t.getUint32(n,!0);d.push(e),n+=Uint32Array.BYTES_PER_ELEMENT;const r=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(let e=0;e<r;e++)t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT,i>=3&&(t.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT)}let f=17===c?16:28;f*=Float32Array.BYTES_PER_ELEMENT;for(let t=0;t<e;t++){l[t]=t;Se(r,t*c*Float32Array.BYTES_PER_ELEMENT+f,Le);const e=2===i?d[t]:Le.red+256*Le.green+Le.blue*Fe;void 0===u[e]&&(u[e]={vertexColorCount:1,instanceIds:[],vertexColorOffset:t}),u[e].instanceIds.push(t)}Re(o[a].vertexPackage,l,1)}}}return n}function Re(e,t,n){const r=e.vertexAttributes,o=e.attrLocation,i=r.length;o[1===n?"instanceId":"batchId"]=i,r.push({index:i,typedArray:t,componentsPerAttribute:1,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,instanceDivisor:n})}const Oe={TC_NONE:0,TC_DXT1_RGB:33776,TC_DXT1_RGBA:33777,TC_DXT3:33778,TC_DXT5:33779,TC_WEBP:38e3,TC_CRN:38001,TC_KTX2:38002,TC_CRN_DXT5:5e4};function Ge(e){let t=ae.NONE;switch(e){case Oe.TC_DXT1_RGB:case Oe.TC_DXT5:t=ae.BGRA;break;case Oe.TC_WEBP:t=ae.WEBP;break;case Oe.TC_CRN:t=ae.STANDARD_CRN;break;case Oe.TC_KTX2:t=ae.KTX2;break;case Oe.TC_CRN_DXT5:t=ae.CRN_DXT5;break;default:t=ae.NONE}return t}Q.parseBuffer=function(e){let t=0;const n={version:void 0,groupNode:void 0,geoPackage:{},matrials:void 0,texturePackage:{}};let r=new DataView(e);n.version=r.getFloat32(t,!0),n.version=Number(n.version.toFixed(2)),t+=Float32Array.BYTES_PER_ELEMENT,n.version>=2&&(r.getUint32(t,!0),t+=Uint32Array.BYTES_PER_ELEMENT),n.version>=3&&(r.getUint32(t,!0),t+=Uint32Array.BYTES_PER_ELEMENT),r.getUint32(t,!0),t+=Uint32Array.BYTES_PER_ELEMENT;const o=ue(e,t);r=new DataView(o),t=0;const i=r.getUint32(t,!0);return t+=Uint32Array.BYTES_PER_ELEMENT,t=pe(o,r,t,n),t=ve(o,r,t,n.geoPackage,n.version),t=Me(o,r,t,n.texturePackage,n.version),t=Ie(o,r,t,n),Ne(o,r,t,i,n.geoPackage,n.version),n};const we=4369,Ue=6410;function Ve(e,t,n){const r=e._gl;this.contextId=e.id,this.textureId=t,this.layerId=n.layerId,this.rootName=n.rootName,this.context=e,this.width=n.width,this.height=n.height,this.compressType=n.compressType,this.internalFormat=n.internalFormat,this.pixelFormat=n.pixelFormat,this.arrayBufferView=n.arrayBufferView,this.wrapS=Cesium.defaultValue(n.wrapS,Cesium.TextureWrap.CLAMP_TO_EDGE),this.wrapT=Cesium.defaultValue(n.wrapT,Cesium.TextureWrap.CLAMP_TO_EDGE),this._target=r.TEXTURE_2D,this._texture=void 0,this.refCount=1,this.ready=!n.isTexBlock,this.renderable=!n.isTexBlock,this.isTexBlock=n.isTexBlock,this.arrayBufferView&&this.init()}function He(e,t,n,r){const o=e.length;let i=n,a=r,s=0;for(;;){if(s+=Cesium.PixelFormat.compressedTextureSizeInBytes(t,i,a),i>>=1,a>>=1,0===i&&0===a)break;i=Math.max(i,1),a=Math.max(a,1)}return s===o}function Ke(){this.ambientColor=new Cesium.Color,this.diffuseColor=new Cesium.Color,this.specularColor=new Cesium.Color(0,0,0,0),this.shininess=50,this.bTransparentSorting=!1,this.alphaMode=void 0,this.texMatrix=Cesium.Matrix4.clone(Cesium.Matrix4.IDENTITY,new Cesium.Matrix4),this.textures=[],this._RGBTOBGR=!1}Ve.prototype.init=function(){const e=this.context._gl;this._texture||(this._texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,this._texture);const t=this.internalFormat;t!==Ue&&t!==we||e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0);let n=0;if(this.arrayBufferView){let r=0,o=this.width,i=this.height;const a=He(this.arrayBufferView,t,o,i);do{const a=Cesium.PixelFormat.compressedTextureSizeInBytes(t,o,i),s=new Uint8Array(this.arrayBufferView.buffer,this.arrayBufferView.byteOffset+r,a);t===we?e.texImage2D(e.TEXTURE_2D,n++,e.RGBA,o,i,0,e.RGBA,e.UNSIGNED_BYTE,s):e.compressedTexImage2D(e.TEXTURE_2D,n++,t,o,i,0,s),o=Math.max(o>>1,1),i=Math.max(i>>1,1),r+=a}while(r<this.arrayBufferView.byteLength&&a)}else{const n=Cesium.PixelFormat.compressedTextureSizeInBytes(t,this.width,this.height);t===we?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this._width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(this.width*this.height*4)):e.compressedTexImage2D(e.TEXTURE_2D,0,t,this.width,this.height,0,new Uint8Array(n))}n>1?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.wrapT),e.texParameteri(this._target,this.context._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,1),e.bindTexture(e.TEXTURE_2D,null),this.arrayBufferView=void 0,this.ready=!0},Ve.prototype.copyFrom=function(e){const t=this.context._gl,n=this._target;t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture);const r=e.xOffset,o=e.yOffset,i=e.width,a=e.height,s=e.arrayBufferView,u=this.internalFormat;t.UNSIGNED_BYTE,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.compressedTexSubImage2D(n,0,r,o,i,a,u,s),t.bindTexture(n,null)},Ve.prototype.update=function(e){this.context=e.context,this.contextId=e.context.id,this.layerId=e.layerId,this.rootName=e.rootName,this.textureId=e.textureId,this.width=e.width,this.height=e.height,this.internalFormat=e.internalFormat,this.arrayBufferView=e.arrayBufferView,this.refCount=1,this.ready=!1,this.renderable=!1,defined(this.arrayBufferView)&&this.init()},Ve.prototype.isDestroyed=function(){return!1},Ve.prototype.destroy=function(){this.context._gl.deleteTexture(this._texture),this._texture=null,this.id=0,Cesium.destroyObject(this)},Ke.prototype.isDestroyed=function(){return!1},Ke.prototype.destroy=function(){const e=this.textures.length;for(let t=0;t<e;t++){this.textures[t].destroy()}return this.textures.length=0,this.ambientColor=void 0,this.diffuseColor=void 0,this.specularColor=void 0,Cesium.destroyObject(this)},Ke.prototype.createCRN=function(e,t,n,r,o,i,a,s,u,c){let l;if(u=defaultValue(u,!0),s?l=loadCRN(o.imageBuffer,!0,!0):S3MTaskManager.CRNTaskProcessorReady&&(l=loadCRNForS3M(S3MTaskManager.CRNProcessor,o.imageBuffer,!0)),!defined(l))return;const d=this;return l.then((function(t){if(d.isDestroyed())return;c=defaultValue(c,{});const s=DDSTextureManager.CreateTexture(e,n,o.width,o.height,o.nFormat,S3MCompressType.enrS3TCDXTN,t.bufferView,!1,i,a,u);c.isEmissiveTex?d.emissiveTexture=s:c.isNormalTexture?d.normalTexture=s:0===r&&d._textures.length>0?d._textures.splice(0,0,s):d._textures.push(s)})),l},Ke.prototype.createWebp=async function(e,t,n){const r=Cesium.defaultValue(n.mipmapEnabled,!0),o=n.arrayBufferView;let i=n.wrapS,a=n.wrapT;const s=o.length;let u=o.byteOffset;const c=new DataView(o.buffer);let l=0;const d=[];for(;l<s;){const e=c.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT,l+=Uint32Array.BYTES_PER_ELEMENT;const t=o.subarray(l,l+e);u+=e,l+=e;const n=Cesium.loadImageFromTypedArray({uint8Array:t,format:"image/webp"});d.push(n)}const f=this;return Promise.all(d).then((n=>{const o=n[0];if(Cesium.defined(o)){let r=!0;Cesium.Math.isPowerOfTwo(o.width)&&Cesium.Math.isPowerOfTwo(o.height)||(i=Cesium.TextureWrap.CLAMP_TO_EDGE,a=Cesium.TextureWrap.CLAMP_TO_EDGE,r=!1),r=r;var s=new Cesium.Texture({context:t,source:o,pixelFormat:Cesium.PixelFormat.RGBA,flipY:!1,sampler:new Cesium.Sampler({wrapS:i,wrapT:a,minificationFilter:0!==n.length&&r?Cesium.TextureMinificationFilter.LINEAR_MIPMAP_LINEAR:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})});t.textureCache.addTexture(e,s),f.textures.push(s)}const u=t._gl,c=Cesium.PixelFormat.RGBA,l=Cesium.PixelDatatype.UNSIGNED_BYTE;if(n.length>1&&r){u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,s._texture);for(let e=1,t=n.length;e<t;e++){const t=n[e];u.texImage2D(u.TEXTURE_2D,e,c,c,l,t)}u.bindTexture(u.TEXTURE_2D,null)}}))};var ke="\n    attribute vec4 aPosition;\n    attribute vec4 aColor;\n    attribute vec3 aNormal;\n#ifdef TexCoord\n    attribute vec4 aTexCoord0;\n    varying vec4 vTexCoord;\n    uniform vec2 decodeTexCoord0Min;\n#ifdef COMPUTE_TEXCOORD\n    uniform float uTexture0Width;\n    varying vec4 vTexCoordTransform;\n    varying vec4 vTexMatrix;\n#endif\n#ifdef USE_TextureCoordMatrix\n    attribute vec2 aTextureCoordMatrix;\n#endif\n#endif\n#ifdef COMPRESS_VERTEX\n    uniform vec4 decodePositionMin;\n    uniform float decodePositionNormConstant;\n#endif\n\n// meshopt判断\n#ifdef MeshOPT_Compress\n    uniform vec3 decodeTexCoord0vNormConstant;\n    uniform vec3 decode_texCoord1_vNormConstant;\n#else\n    uniform float decode_texCoord0_normConstant;\n    uniform float decode_texCoord1_normConstant;\n#endif\n\n#ifdef HYPSOMETRIC\n    varying float wValue;    \n#endif\n#ifdef FLATTEN\n    uniform mat4 uGeoMatrix;\n    uniform mat4 uInverseGeoMatrix;\n    uniform sampler2D uFlattenTexture;\n    uniform vec4 uFlattenRect;\n#endif\n    \n    uniform vec4 uSelectedColor;\n    \n    varying vec4 vSecondColor;\n    varying vec4 vPositionMC;\n    varying vec3 vPositionEC;\n#ifdef VertexColor\n    varying vec4 vColor;\n#endif\n    \n    const float SHIFT_LEFT8 = 256.0;\n    const float SHIFT_RIGHT8 = 1.0 / 256.0;\n    const float SHIFT_RIGHT4 = 1.0 / 16.0;\n    const float SHIFT_LEFT4 = 16.0;\n    void getTextureMatrixFromZValue(in float nZ, inout float XTran, inout float YTran, inout float scale)\n    {\n        if(nZ <= 0.0)\n        {\n            return;\n        }\n        float nDel8 = floor(nZ * SHIFT_RIGHT8);\n        float nDel16 = floor(nDel8 * SHIFT_RIGHT8);\n        float nDel20 = floor(nDel16 * SHIFT_RIGHT4);\n        YTran = nZ - nDel8 * SHIFT_LEFT8;\n        XTran = nDel8 - nDel16 * SHIFT_LEFT8;\n        float nLevel = nDel16 - nDel20 * SHIFT_LEFT4;\n        scale = 1.0 / pow(2.0, nLevel);\n    }\n    \n#ifdef FLATTEN\n    float unpackValue(vec4 packedValue)\n    {\n        float SHIFT_LEFT16 = 65536.0;\n        float SHIFT_LEFT8 = 256.0;\n        vec4 value = packedValue * 255.0;\n        return value.r * SHIFT_LEFT16 + value.g * SHIFT_LEFT8 + value.b - 9000.0;\n    }\n    vec4 calculateHeight(vec4 vertexPos)\n    {\n        vec4 vecPos = uGeoMatrix * vec4(vertexPos.xyz, 1.0);\n        vec2 vecRatio = vec2(uFlattenRect.z - uFlattenRect.x, uFlattenRect.w - uFlattenRect.y);\n        vec2 vecTexCoord = vec2(vecPos.x - uFlattenRect.x, vecPos.y - uFlattenRect.y);\n        vecTexCoord.x = vecTexCoord.x / vecRatio.x;\n        vecTexCoord.y = vecTexCoord.y / vecRatio.y;\n        if(vecTexCoord.x > 1.0 || vecTexCoord.x < 0.0 || vecTexCoord.y > 1.0 || vecTexCoord.y < 0.0)\n        {\n            return vertexPos;\n        }\n        float fHeight = unpackValue(texture2D(uFlattenTexture, vecTexCoord.xy));\n        fHeight = fHeight;\n        if(vecPos.z > fHeight)\n        {\n            vecPos.z = fHeight;\n            vecPos.w = vecPos.z;\n        }\n        return uInverseGeoMatrix * vec4(vecPos.xyz, 1.0);\n    }\n#endif\n    void main()\n    {\n\n    #ifdef TexCoord\n        vTexCoord.xy = aTexCoord0.xy;\n    #ifdef COMPUTE_TEXCOORD\n        vTexMatrix = vec4(0.0,0.0,1.0,0.0);\n        vTexCoordTransform.x = aTexCoord0.z;\n            #ifdef USE_TextureCoordMatrix\n                vTexCoordTransform.x = aTextureCoordMatrix.x;\n            #endif\n        if(vTexCoordTransform.x < -90000.0)\n        {\n            vTexMatrix.z = -1.0;\n        }\n        getTextureMatrixFromZValue(floor(vTexCoordTransform.x), vTexMatrix.x, vTexMatrix.y, vTexMatrix.z);\n        vTexMatrix.w = log2(uTexture0Width * vTexMatrix.z);\n        // meshopt压缩 这里对照主版本的  主版本命名的都是通过下划线，但是插件获取uniform是通过函数，所以需要大写\n        #ifdef MeshOPT_Compress\n            vec2 texCoord0;\n            texCoord0.x = aTexCoord0.x * decodeTexCoord0vNormConstant.x;\n            texCoord0.y = aTexCoord0.y * decodeTexCoord0vNormConstant.y;\n            vTexCoord.xy = decodeTexCoord0Min + texCoord0.xy;\n        #endif\n    #endif    \n    #endif\n\n    #ifdef COMPRESS_VERTEX\n        vec4 vertexPos = vec4(1.0);\n        vertexPos = decodePositionMin + vec4(aPosition.xyz, 1.0) * decodePositionNormConstant;\n    #else\n        vec4 vertexPos = aPosition;\n    #endif\n#ifdef FLATTEN\n    vertexPos = calculateHeight(vertexPos);\n#endif\n    vertexPos.w = 1.0;\n    #ifdef HYPSOMETRIC\n        wValue = vertexPos.w;\n    #endif\n        vec4 positionMC = vec4(vertexPos.xyz, 1.0);\n#ifdef VertexColor\n        vColor = aColor;\n#endif\n        vPositionMC = positionMC;\n        vPositionEC = (czm_modelView * positionMC).xyz;\n        gl_Position = czm_modelViewProjection * vec4(vertexPos.xyz, 1.0);\n    }\n",Ye="\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n    uniform vec4 uDiffuseColor;\n    uniform vec4 uAmbientColor;\n#ifdef TexCoord\n    varying vec4 vTexCoord;\n#ifdef COMPUTE_TEXCOORD\n    uniform sampler2D uTexture;\n    uniform float uTexture0Width;\n    varying vec4 vTexCoordTransform;\n    varying vec4 vTexMatrix;\n#endif\n#endif\n\n\n#ifdef VertexColor\n    varying vec4 vColor;\n#endif\n    varying vec4 vSecondColor;\n    varying vec4 vPositionMC;\n    varying vec3 vPositionEC;\n    void calculateMipLevel(in vec2 inTexCoord, in float vecTile, in float fMaxMip, inout float mipLevel)\n    {\n        vec2 dx = dFdx(inTexCoord * vecTile);\n        vec2 dy = dFdy(inTexCoord * vecTile);\n        float dotX = dot(dx, dx);\n        float dotY = dot(dy, dy);\n        float dMax = max(dotX, dotY);\n        float dMin = min(dotX, dotY);\n        float offset = (dMax - dMin) / (dMax + dMin);\n        offset = clamp(offset, 0.0, 1.0);\n        float d = dMax * (1.0 - offset) + dMin * offset;\n        mipLevel = 0.5 * log2(d);\n        mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);\n    }\n\n    void calculateMipLevel(in vec2 inTexCoord, in vec2 vecTile, in float fMaxMip, inout float mipLevel)\n    {\n        vec2 dx = dFdx(inTexCoord * vecTile.x);\n        vec2 dy = dFdy(inTexCoord * vecTile.y);\n        float dotX = dot(dx, dx);\n        float dotY = dot(dy, dy);\n        float dMax = max(dotX, dotY);\n        float dMin = min(dotX, dotY);\n        float offset = (dMax - dMin) / (dMax + dMin);\n        offset = clamp(offset, 0.0, 1.0);\n        float d = dMax * (1.0 - offset) + dMin * offset;\n        mipLevel = 0.5 * log2(d);\n        mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);\n    }\n    \n    void calculateTexCoord(in vec3 inTexCoord, in float scale, in float XTran, in float YTran, in float fTile, in float mipLevel, inout vec2 outTexCoord)\n    {\n        if(inTexCoord.z < -9000.0)\n        {\n            outTexCoord = inTexCoord.xy;\n        }\n        else\n        {\n            vec2 fTexCoord = fract(inTexCoord.xy);\n            float offset = 1.0 * pow(2.0, mipLevel) / fTile;\n            fTexCoord = clamp(fTexCoord, offset, 1.0 - offset);\n            outTexCoord.x = (fTexCoord.x + XTran) * scale;\n            outTexCoord.y = (fTexCoord.y + YTran) * scale;\n        }\n    }\n    \n    vec4 getTexColorForS3M(sampler2D curTexture, vec3 oriTexCoord, float texTileWidth, float fMaxMipLev, float fTexCoordScale, vec2 vecTexCoordTranslate)\n    {\n        vec4 color = vec4(1.0);\n        float mipLevel = 0.0;\n    #ifdef GL_OES_standard_derivatives\n        calculateMipLevel(oriTexCoord.xy, texTileWidth, fMaxMipLev, mipLevel);\n    #endif\n        vec2 realTexCoord;\n        calculateTexCoord(oriTexCoord, fTexCoordScale, vecTexCoordTranslate.x, vecTexCoordTranslate.y, texTileWidth, mipLevel, realTexCoord);\n        if(oriTexCoord.z < -9000.0)\n        {\n            color = texture2D(curTexture, realTexCoord.xy);\n        }\n        else\n        {\n            #ifdef GL_EXT_shader_texture_lod\n                color = texture2DLodEXT(curTexture, realTexCoord.xy, mipLevel);\n            #else\n                color = texture2D(curTexture, realTexCoord.xy, mipLevel);\n            #endif\n        }\n        #ifdef RGBTOBGR\n            color = color.bgra;\n        #endif\n        return color;\n    }\n#ifdef COMPUTE_TEXCOORD\n    vec4 getTextureColor()\n    {\n        if(vTexMatrix.z < 0.0)\n        {\n            return vec4(1.0);\n        }\n        float texTileWidth0 = vTexMatrix.z * uTexture0Width;\n        vec3 realTexCoord = vec3(vTexCoord.xy, vTexCoordTransform.x);\n        vec4 FColor = getTexColorForS3M(uTexture, realTexCoord, texTileWidth0, vTexMatrix.w, vTexMatrix.z, vTexMatrix.xy);\n    #ifdef TexCoord2\n        float texTileWidth1 = vTexMatrix2.z * uTexture1Width;\n        realTexCoord = vec3(vTexCoord.zw, vTexCoordTransform.y);\n        vec4 SColor = getTexColorForS3M(uTexture2, realTexCoord, texTileWidth1, vTexMatrix2.w, vTexMatrix2.z, vTexMatrix2.xy);\n        SColor.r = clamp(SColor.r, 0.0, 1.0);\n        SColor.g = clamp(SColor.g, 0.0, 1.0);\n        SColor.b = clamp(SColor.b, 0.0, 1.0);\n        return FColor * SColor;\n    #else\n        return FColor;\n    #endif\n    }\n#endif\n      \n    void main()\n    {\n    vec4 baseColorWithAlpha = vec4(1.0);\n    #ifdef VertexColor\n        vec4 baseColorWithAlpha = vColor;\n    #endif\n    #ifdef COMPUTE_TEXCOORD\n        baseColorWithAlpha *= getTextureColor();\n    #endif    \n        vec4 outColor = baseColorWithAlpha;\n        gl_FragColor = outColor;\n        // gl_FragColor = vec4(1.0);\n    }\n";function ze(){this.context=void 0,this.model=void 0,this.index=void 0}function Je(){this.model=void 0,this.context=void 0,this.index=0}ze.prototype.set=function(e,t,n){this.context=e,this.model=t,this.index=n},ze.prototype.execute=function(){const e=this.context,t=this.index,n=this.model.vertexPackage,r=n.vertexAttributes[t];if(!Cesium.defined(r))throw new Cesium.DeveloperError("attribute is null");if(-1!==n.instanceIndex&&!Cesium.defined(this.model.instanceBuffer)){if(!Cesium.defined(n.instanceBuffer))throw new Cesium.DeveloperError("instance buffer is null");this.model.instanceBuffer=Cesium.Buffer.createVertexBuffer({context:e,typedArray:n.instanceBuffer,usage:Cesium.BufferUsage.STATIC_DRAW})}1!==r.instanceDivisor||Cesium.defined(r.typedArray)?Cesium.defined(r.vertexBuffer)||(r.vertexBuffer=Cesium.Buffer.createVertexBuffer({context:e,typedArray:r.typedArray,usage:Cesium.BufferUsage.STATIC_DRAW}),r.typedArray=null,delete r.typedArray):r.vertexBuffer=this.model.instanceBuffer},Je.prototype.set=function(e,t,n){this.model=t,this.context=e,this.index=n},Je.prototype.execute=function(){const e=this.context,t=this.model.arrIndexPackage[this.index],n=this.model.vertexPackage.verticesCount;if(!Cesium.defined(t))throw new Cesium.DeveloperError("index package is null");if(Cesium.defined(t.indexBuffer))return;if(!Cesium.defined(t.indicesTypedArray))throw new Cesium.DeveloperError("index buffer is null");let r=Cesium.IndexDatatype.UNSIGNED_SHORT;(1===t.indexType||n>=Cesium.Math.SIXTY_FOUR_KILOBYTES)&&e.elementIndexUint&&(r=Cesium.IndexDatatype.UNSIGNED_INT),Cesium.defined(t.indexBuffer)||(t.indexBuffer=Cesium.Buffer.createIndexBuffer({context:e,typedArray:t.indicesTypedArray,usage:Cesium.BufferUsage.STATIC_DRAW,indexDatatype:r})),t.indicesTypedArray=null,delete t.indicesTypedArray};const Xe={VertexNormal:"VertexNormal",VertexColor:"VertexColor",TexCoord:"TexCoord",TexCoord2:"TexCoord2",Instance:"Instance",COMPRESS_VERTEX:"COMPRESS_VERTEX",COMPRESS_NORMAL:"COMPRESS_NORMAL",COMPRESS_COLOR:"COMPRESS_COLOR",COMPRESS_TEXCOORD:"COMPRESS_TEXCOORD",UseLineColor:"USE_LINECOLOR",InstanceBim:"InstanceBim",InstancePipe:"InstancePipe",COMPUTE_TEXCOORD:"COMPUTE_TEXCOORD"};var je=Object.freeze(Xe);const We={SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32};var qe=Object.freeze(We);const Ze={BIM:17,BIM2:16,PIPELINE:29};var Qe=Object.freeze(Ze);function $e(){this.model=void 0,this.context=void 0}function et(e,t){const n=t.length;for(let r=0;r<n;++r){const n=e.getExtension(t[r]);if(n)return n}}function tt(e){return 1!==e._brightness||1!==e._contrast||0!==e._hue||1!==e._saturation||1!==e._gamma}Cesium.defined,$e.prototype.set=function(e,t){this.model=t,this.context=e},$e.prototype.execute=function(){const e=this.context,t=this.model,n=t.layer;let r=t.vs,o=t.fs;const i=t.attributeLocations,a=t.material,s=t.vertexPackage;if(e.webgl2&&Cesium.VERSION.length>4){r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,o=["#define varying in","#define gl_FragColor out_FragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o}const u=t.batchTable?t.batchTable.getVertexShaderCallback()(r):r;void 0===e.texturelod&&(e.texturelod=Cesium.defaultValue(et(e._gl,["EXT_shader_texture_lod"]),!1));const c=new Cesium.ShaderSource({sources:[u]}),l=new Cesium.ShaderSource({sources:[o]});if(Cesium.defined(i.aNormal)&&(c.defines.push(je.VertexNormal),l.defines.push(je.VertexNormal)),Cesium.defined(i.aColor)&&c.defines.push(je.VertexColor),a&&a._RGBTOBGR&&l.defines.push("RGBTOBGR"),a&&a.textures.length>0&&(c.defines.push(je.COMPUTE_TEXCOORD),l.defines.push(je.COMPUTE_TEXCOORD)),a&&2===a.textures.length&&(c.defines.push(je.TexCoord2),l.defines.push(je.TexCoord2)),Cesium.defined(i.aTexCoord0)&&(c.defines.push("TexCoord"),l.defines.push("TexCoord")),s.instanceIndex>-1&&c.defines.push(je.Instance),s.instanceMode!==Qe.BIM&&s.instanceMode!==Qe.BIM2||c.defines.push(je.InstanceBim),s.instanceMode===Qe.PIPELINE&&c.defines.push(je.InstancePipe),Cesium.defined(s.compressOptions)){const e=s.compressOptions;(e&qe.SVC_Vertex)===qe.SVC_Vertex&&c.defines.push(je.COMPRESS_VERTEX),(e&qe.SVC_Normal)===qe.SVC_Normal&&c.defines.push(je.COMPRESS_NORMAL),(e&qe.SVC_VertexColor)===qe.SVC_VertexColor&&c.defines.push(je.COMPRESS_COLOR),(e&qe.SVC_TexutreCoord)===qe.SVC_TexutreCoord&&c.defines.push(je.COMPRESS_TEXCOORD)}s.textureCoordIsW&&i.TexCoord&&c.defines.push(je.TEXTURE_COORD_ONE_IS_W),Cesium.defined(s.customVertexAttribute)&&Cesium.defined(s.customVertexAttribute.TextureCoordMatrix)&&c.defines.push("USE_TextureCoordMatrix"),"MESHOPT"===n._vertexCompressionType&&c.defines.push("MeshOPT_Compress"),s.textureCoordIsW&&i.aTexCoord0&&c.defines.push("TEXTURE_COORD_ONE_IS_W"),a.batchTable&&(c.defines.push(je.TextureAtlas),l.defines.push(je.TextureAtlas)),a.batchTableBake&&(c.defines.push(je.TextureAtlasSec),l.defines.push(je.TextureAtlasSec)),Cesium.defined(t.arrIndexPackage)&&t.arrIndexPackage.length>0&&2===t.arrIndexPackage[0].primitiveType&&l.defines.push(je.UseLineColor),tt(n)&&l.defines.push(je.ADJUST_COLOR),e.webgl2&&(c.defines.push("WEBGL2"),l.defines.push("WEBGL2")),t.shaderProgram=Cesium.ShaderProgram.fromCache({context:e,vertexShaderSource:c,fragmentShaderSource:l,attributeLocations:i})};const nt={RESET:0,SetColor:1,SELECTED:2,HIDE:4,OFFSET:8,CLIP:16,BLOOM:32,ALL:255};var rt=Object.freeze(nt);function ot(e){let t,n;for(this.layer=e.layer,this.vertexPackage=e.vertexPackage,this.arrIndexPackage=e.arrIndexPackage,this.vertexBufferToCreate=new Cesium.Queue,this.indexBufferToCreate=new Cesium.Queue,this.shaderProgramToCreate=new Cesium.Queue,t=0,n=this.vertexPackage.vertexAttributes.length;t<n;t++)this.vertexBufferToCreate.enqueue(t);for(t=0,n=this.arrIndexPackage.length;t<n;t++)this.indexBufferToCreate.enqueue(t);this.shaderProgramToCreate.enqueue(0),this.boundingVolume=e.boundingVolume,this.material=Cesium.defaultValue(e.material,new Ke),this.geoName=e.geoName,this.modelMatrix=e.modelMatrix,this.geoMatrix=e.geoMatrix,this.invGeoMatrix=Cesium.Matrix4.inverse(this.geoMatrix,new Cesium.Matrix4),this.instanceCount=e.vertexPackage.instanceCount,this.attributeLocations=e.vertexPackage.attrLocation,this.shaderProgram=void 0,this.vertexArray=void 0,this.colorCommand=void 0,this.pickInfo=Cesium.defaultValue(e.pickInfo,{}),this.selectionInfoMap=new Cesium.AssociativeArray,this.batchTable=void 0,this.batchTableDirty=!1,this.pickColorIdentifier="vSecondColor",this.idsOperationMap=new Cesium.AssociativeArray,this.idsColorMap=new Cesium.AssociativeArray,this.useWValue=4===e.vertexPackage.vertexAttributes[0].componentsPerAttribute,this.edgeGeometry=e.edgeGeometry,this.createBoundingBoxForInstance(),this.ready=!1}const it=new ze,at=new Je,st=new $e;function ut(e,t){const n=e.layer.context,r=e.vertexBufferToCreate;for(;r.length;){const o=r.peek();if(it.set(n,e,o),!t.jobScheduler.execute(it,Cesium.JobType.BUFFER))break;r.dequeue()}}function ct(e,t){const n=e.layer.context,r=e.indexBufferToCreate;for(;r.length;){const o=r.peek();if(at.set(n,e,o),!t.jobScheduler.execute(at,Cesium.JobType.BUFFER))break;r.dequeue()}}function lt(e,t){const n=e.layer.context,r=e.shaderProgramToCreate;for(;r.length&&(r.peek(),st.set(n,e),t.jobScheduler.execute(st,Cesium.JobType.PROGRAM));)r.dequeue()}function dt(e,t){if(Cesium.defined(e.batchTable)||!e.pickInfo)return;const n=e.layer.context,r=[];r.push({functionName:"s3m_batchTable_color",componentDatatype:Cesium.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"s3m_batchTable_operation",componentDatatype:Cesium.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4},{functionName:"s3m_batchTable_pickColor",componentDatatype:Cesium.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});const o=e.pickInfo,i=Object.keys(o),a=e.instanceCount>0?e.instanceCount:i.length;e.batchTable=new Cesium.BatchTable(n,r,a)}ot.prototype.createBuffers=function(e){ut(this,e),ct(this,e)},ot.prototype.createShaderProgram=function(e){lt(this,e)},ot.prototype.createBatchTable=function(e){dt(this)};const ft=new Cesium.Cartesian3;ot.prototype.createBoundingBoxForInstance=function(){const e=this.vertexPackage;if(!Cesium.defined(e)||-1===e.instanceIndex||!Cesium.defined(e.instanceBounds))return;const t=e.instanceBounds,n=new Cesium.Cartesian3(t[0],t[1],t[2]),r=new Cesium.Cartesian3(t[3],t[4],t[5]),o=Cesium.Cartesian3.lerp(n,r,.5,ft),i=Cesium.Cartesian3.distance(o,n),a=new Cesium.Cartesian3;Cesium.Matrix4.multiplyByPoint(this.modelMatrix,o,a),this.boundingVolume.center=a,this.boundingVolume.radius=i,e.instanceBounds=void 0};const pt=new Cesium.Cartesian4;function _t(e){ot.call(this,e),this.vs=ke,this.fs=Ye}function At(){return Cesium.RenderState.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:Cesium.DepthFunction.LESS_OR_EQUAL},blending:Cesium.BlendingState.ALPHA_BLEND,stencilTest:{backFunction:Cesium.StencilFunction.ALWAYS,backOperation:{fail:Cesium.StencilOperation.KEEP,zFail:Cesium.StencilOperation.KEEP,zPass:Cesium.StencilOperation.REPLACE},enabled:!0,frontFunction:Cesium.StencilFunction.ALWAYS,frontOperation:{fail:Cesium.StencilOperation.KEEP,zFail:Cesium.StencilOperation.KEEP,zPass:Cesium.StencilOperation.REPLACE},mask:Cesium.StencilConstants.CESIUM_3D_TILE_MASK,reference:Cesium.StencilConstants.CESIUM_3D_TILE_MASK}})}function mt(e,t,n){const r={uDiffuseColor:function(){return e.diffuseColor},uGeoMatrix:function(){return n.geoMatrix},uInverseGeoMatrix:function(){return n.invGeoMatrix},uTexture:function(){return e.textures[0]},uTexture0Width:function(){return e.textures[0].width},decodePositionMin:function(){return n.vertexPackage.minVerticesValue},decodePositionNormConstant:function(){return n.vertexPackage.vertCompressConstant}};return"MESHOPT"==t._vertexCompressionType&&(r.decodeTexCoord0vNormConstant=function(){return n.vertexPackage.texCoordCompressConstant[0]},r.decodeTexCoord1vNormConstant=function(){return n.vertexPackage.texCoordCompressConstant[1]},r.decodeTexCoord0Min=function(){return n.vertexPackage.minTexCoordValue[0]}),r}ot.prototype.updateBatchTableAttributes=function(){const e=this,t=this.idsColorMap;let n=[];for(let r=0,o=t.length;r<o;r++){const o=t.values[r];o.dirty&&(o.dirty=!1,n=o.color.toBytes(),pt.x=n[0],pt.y=n[1],pt.z=n[2],pt.w=n[3],Cesium.defined(o.batchId)?this.batchTable.setBatchedAttribute(o.batchId,0,pt):Array.isArray(o.instanceIds)&&o.instanceIds.map((function(t){e.batchTable.setBatchedAttribute(t,0,pt)})))}const r=this.idsOperationMap;for(let t=0,n=r.length;t<n;t++){const n=r.values[t];n.dirty&&(n.dirty=!1,this.instanceCount>0?Array.isArray(n.instanceIds)&&n.instanceIds.map((function(t){e.batchTable.setBatchedAttribute(t,1,n.operationValue)})):Cesium.defined(n.batchId)&&this.batchTable.setBatchedAttribute(n.batchId,1,n.operationValue))}},ot.prototype.createPickIds=function(){const e=this.layer,t=e.context,n=this.pickInfo;if(!Cesium.defined(n))return;for(const e in n)n.hasOwnProperty(e)&&this.selectionInfoMap.set(e,n[e]);const r=this.batchTable,o=this.selectionInfoMap,i=o._hash;for(const n in i)if(i.hasOwnProperty(n)){const i=o.get(n);let a;Cesium.defined(a)||(a=t.createPickId({primitive:e,id:n}));const s=a.color;pt.x=Cesium.Color.floatToByte(s.red),pt.y=Cesium.Color.floatToByte(s.green),pt.z=Cesium.Color.floatToByte(s.blue),pt.w=Cesium.Color.floatToByte(s.alpha);const u=i.instanceIds;if(this.instanceCount>0)u.map((function(e){r.setBatchedAttribute(e,2,pt)}));else{const e=i.batchId;r.setBatchedAttribute(e,2,pt)}}this.pickInfo=void 0},ot.prototype.initLayerSetting=function(e){Object.keys(e._objsOperationList).length>0&&this.updateObjsOperation(e._objsOperationList)},ot.prototype.updateObjsOperation=function(e){if(!this.ready||this.selectionInfoMap.length<1)return;const t=this.selectionInfoMap._hash;for(const n in t){if(!t.hasOwnProperty(n))continue;const r=e[n];if(!Cesium.defined(r))continue;const o=t[n],i=o.batchId,a=o.instanceIds;let s=this.idsOperationMap.get(n);Cesium.defined(s)||(s={batchId:i,instanceIds:a,operationValue:new Cesium.Cartesian4,dirty:!0}),s.dirty=!0,s.operationValue.x=1&s.operationValue.x|r,this.idsOperationMap.set(n,s),this.batchTableDirty=!0}},ot.prototype.transformResource=Cesium.DeveloperError.throwInstantiationError,ot.prototype.createCommand=Cesium.DeveloperError.throwInstantiationError,ot.prototype.update=Cesium.DeveloperError.throwInstantiationError,ot.prototype.isDestroyed=Cesium.DeveloperError.throwInstantiationError,ot.prototype.destroy=Cesium.DeveloperError.throwInstantiationError,_t.prototype=Object.create(ot.prototype),_t.prototype.constructor=ot,new Cesium.Cartesian4,new Cesium.Cartesian4,new Cesium.Cartesian4,_t.prototype.createCommand=function(){if(Cesium.defined(this.colorCommand)||0!==this.vertexBufferToCreate.length||0!==this.indexBufferToCreate.length||0!==this.shaderProgramToCreate.length)return;const e=this.layer,t=e.context,n=this.vertexPackage,r=this.arrIndexPackage,o=n.vertexAttributes;if(r.length<1)return;const i=r[0],a=this.material;this.vertexArray=new Cesium.VertexArray({context:t,attributes:o,indexBuffer:i.indexBuffer}),this.colorCommand=new Cesium.DrawCommand({primitiveType:i.primitiveType,modelMatrix:this.modelMatrix,boundingVolume:Cesium.BoundingSphere.clone(this.boundingVolume),vertexArray:this.vertexArray,shaderProgram:this.shaderProgram,pass:a.bTransparentSorting?Cesium.Pass.TRANSLUCENT:Cesium.Pass.CESIUM_3D_TILE,renderState:At(),instanceCount:n.instanceCount}),this.colorCommand.uniformMap=mt(a,e,this),this.vs=void 0,this.fs=void 0,this.ready=!0},_t.prototype.transformResource=function(e,t){this.ready||(this.createBuffers(e),this.createShaderProgram(e),this.createCommand(e),this.initLayerSetting(t))},_t.prototype.update=function(e,t){e.commandList.push(this.colorCommand)},_t.prototype.isDestroyed=function(){return!1},_t.prototype.destroy=function(){return this.shaderProgram=this.shaderProgram&&!this.shaderProgram.isDestroyed()&&this.shaderProgram.destroy(),this.vertexArray=this.vertexArray&&!this.vertexArray.isDestroyed()&&this.vertexArray.destroy(),this.material=this.material&&!this.material.isDestroyed()&&this.material.destroy(),this.colorCommand=void 0,this.vertexPackage=null,this.arrIndexPackage=null,this.modelMatrix=void 0,this.pickInfo=void 0,this.selectionInfoMap=void 0,this.vs=void 0,this.fs=void 0,Cesium.destroyObject(this)};var Ct="\n    attribute vec4 aPosition;\n#ifdef VertexColor\n    attribute vec4 aColor;\n#endif\n#ifdef USE_TextureCoordMatrix\n    attribute vec2 aTextureCoordMatrix;\n#endif\n#ifdef VertexNormal\n    attribute vec3 aNormal;\n#endif\n#ifdef Instance\n    attribute float instanceId;\n#else\n    attribute float batchId;\n#endif \n\n#ifdef TextureAtlas\n    attribute float aTextureBatchId0;\n#endif\n\n#ifdef TexCoord\n    attribute vec4 aTexCoord0;\n    varying vec4 vTexCoord;\n    uniform mat4 uTexMatrix;\n    uniform vec2 decodeTexCoord0Min;\n#ifdef COMPUTE_TEXCOORD\n#ifdef TextureAtlas\n    uniform vec4 uTexAtlasDim;\n    varying vec4 vTexAtlasTran;\n    varying vec4 vTexAtlasScale;\n    varying vec4 vTexAtlasSize;\n    varying vec2 vMaxMipLevel;\n#else\n    uniform float uTexture0Width;\n    varying vec4 vTexMatrix;\n    varying vec4 vTexCoordTransform;\n#endif    \n#endif\n#endif\n\n#ifdef TexCoord2\n    attribute vec4 aTexCoord1;\n    uniform float uTexture1Width;\n    varying vec4 vTexMatrix2;\n#endif\n#ifdef InstanceBim\n    attribute vec4 uv2;\n    attribute vec4 uv3;\n    attribute vec4 uv4;\n    attribute vec4 secondary_colour;\n    attribute vec4 uv6;   \n#endif\n\n#ifdef InstancePipe\n    attribute vec4 uv1;\n    attribute vec4 uv2;\n    attribute vec4 uv3;\n    attribute vec4 uv4;\n    attribute vec4 uv5;\n    attribute vec4 uv6;\n    attribute vec4 uv7;\n    attribute vec4 secondary_colour;\n    attribute vec4 uv9;\n#endif\n\n#ifdef COMPRESS_VERTEX\n    uniform vec4 decodePositionMin;\n    uniform float decodePositionNormConstant;\n#endif\n\n// meshopt判断\n#ifdef MeshOPT_Compress\n    uniform vec3 decodeTexCoord0vNormConstant;\n    uniform vec3 decode_texCoord1_vNormConstant;\n#else\n    uniform float decode_texCoord0_normConstant;\n    uniform float decode_texCoord1_normConstant;\n#endif\n    \n    uniform vec4 uSelectedColor;\n    uniform vec4 uFillForeColor;\n    \n    varying vec4 vSecondColor;\n    varying vec4 vPositionMC;\n    varying vec3 vPositionEC;\n#ifdef VertexNormal\n    varying vec3 vNormalEC;\n#endif\n    \n    varying vec4 vColor;\n    \n    const float SHIFT_LEFT8 = 256.0;\n    const float SHIFT_RIGHT8 = 1.0 / 256.0;\n    const float SHIFT_RIGHT4 = 1.0 / 16.0;\n    const float SHIFT_LEFT4 = 16.0;\n    void getTextureMatrixFromZValue(in float nZ, inout float XTran, inout float YTran, inout float scale)\n    {\n        if(nZ <= 0.0)\n        {\n            return;\n        }\n        float nDel8 = floor(nZ * SHIFT_RIGHT8);\n        float nDel16 = floor(nDel8 * SHIFT_RIGHT8);\n        float nDel20 = floor(nDel16 * SHIFT_RIGHT4);\n        YTran = nZ - nDel8 * SHIFT_LEFT8;\n        XTran = nDel8 - nDel16 * SHIFT_LEFT8;\n        float nLevel = nDel16 - nDel20 * SHIFT_LEFT4;\n        scale = 1.0 / pow(2.0, nLevel);\n    }\n    \n    void operation(vec4 operationType, vec4 color, vec4 selectedColor, inout vec4 vertexColor)\n    {\n        float right_2 = operationType.x * 0.5;\n        float right_4 = right_2 * 0.5;\n        float right_8 = right_4 * 0.5;\n        float right_16 = right_8 * 0.5;\n        float isSetColor = fract(right_2);\n        if(isSetColor > 0.1)\n        {\n            vertexColor *= color;\n        }\n        float isPicked = fract(floor(right_2)* 0.5);\n        if(isPicked > 0.1)\n        {\n            vertexColor *= selectedColor;\n        }\n        float isHide = fract(floor(right_4)* 0.5);\n        if(isHide > 0.1)\n        {\n            vertexColor.a = 0.0;\n        }\n    }\n    \n\n#ifdef TextureAtlas\n    uniform highp sampler2D batchTextureAtlas; \n    uniform vec4 batchTextureAtlasStep; \n#ifdef SecTextureAtlas\n    uniform highp sampler2D batchTextureAtlasSec; \n    uniform vec4 batchTextureAtlasStepSec; \n#endif\n    vec2 computeAtlasSt(float batchId, vec4 step) \n    { \n        float stepX = step.x; \n        float centerX = step.y; \n        float numberOfAttributes = float(1); \n        return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); \n    } \n    vec4 atlas_batchTable_xywh(float batchId, sampler2D texture, vec4 step) \n    { \n        vec2 st = computeAtlasSt(batchId, step); \n        st.x += step.x * float(0); \n        vec4 textureValue = texture2D(texture, st); \n        vec4 value = textureValue; \n        return value; \n    } \n    void getTexAtlasParameter(in vec4 xywh, in vec2 textureDim, inout vec2 translate, inout vec2 scale, inout vec2 texSize, inout float maxMipLevel)\n    {\n        float width = xywh.z;\n        float height  = xywh.w;\n        width *= 2.0 / 3.0;\n        maxMipLevel = log2(min(width, height));\n        scale.x = width / textureDim.x;\n        scale.y = height / textureDim.y;\n        translate.x = xywh.x;\n        translate.y  = xywh.y;\n        translate /= textureDim;\n        texSize.x = width;\n        texSize.y = height;\n    }\n#endif\n    void main()\n    {\n      \n\n    #ifdef TexCoord\n        vTexCoord.xy = aTexCoord0.xy;\n    #endif\n    #ifdef COMPUTE_TEXCOORD\n    #ifdef TextureAtlas\n        if(aTextureBatchId0 < 0.0)\n        {\n            vMaxMipLevel.x = -1.0;\n        }\n        else\n        {\n            vec4 xywh = atlas_batchTable_xywh(aTextureBatchId0, batchTextureAtlas, batchTextureAtlasStep);\n            getTexAtlasParameter(xywh, uTexAtlasDim.xy, vTexAtlasTran.xy, vTexAtlasScale.xy, vTexAtlasSize.xy, vMaxMipLevel.x);\n        }\n    #else\n        vTexMatrix = vec4(0.0,0.0,1.0,0.0);\n        vTexCoordTransform.x = aTexCoord0.z;\n            #ifdef USE_TextureCoordMatrix\n                vTexCoordTransform.x = aTextureCoordMatrix.x;\n            #endif\n        if(vTexCoordTransform.x < -90000.0)\n        {\n            vTexMatrix.z = -1.0;\n        }\n        getTextureMatrixFromZValue(floor(vTexCoordTransform.x), vTexMatrix.x, vTexMatrix.y, vTexMatrix.z);\n        vTexMatrix.w = log2(uTexture0Width * vTexMatrix.z);\n    #endif\n    #ifdef TexCoord2\n    #ifdef TextureAtlas\n        if(aTextureBatchIdSec < 0.0)\n        {\n            vMaxMipLevel.y = -1.0;\n        }\n        else\n        {\n            vec4 xywh2 = atlas_batchTable_xywh(aTextureBatchIdSec, batchTextureAtlasSec, batchTextureAtlasStepSec);\n            getTexAtlasParameter(xywh2, uTexAtlasDim.zw, vTexAtlasTran.zw, vTexAtlasScale.zw, vTexAtlasSize.zw, vMaxMipLevel.y);\n        }\n    #else\n        vTexCoord.zw = aTexCoord1.xy;\n        vTexMatrix2 = vec4(0.0,0.0,1.0,0.0);\n        vTexCoordTransform.y = aTexCoord1.z;\n            #ifdef USE_TextureCoordMatrix\n                vTexCoordTransform.y = aTextureCoordMatrix.y;\n            #endif\n        if(vTexCoordTransform.y < -90000.0)\n        {\n            vTexMatrix2.z = -1.0;\n        }\n        getTextureMatrixFromZValue(floor(vTexCoordTransform.y), vTexMatrix2.x, vTexMatrix2.y, vTexMatrix2.z);\n        vTexMatrix2.w = log2(uTexture1Width * vTexMatrix.z);\n    #endif\n    #endif\n    #endif\n    \n    #ifdef COMPRESS_VERTEX\n        vec4 vertexPos = vec4(1.0);\n        vertexPos = decodePositionMin + vec4(aPosition.xyz, 1.0) * decodePositionNormConstant;\n    #else\n        vec4 vertexPos = aPosition;\n    #endif\n\n    // meshopt压缩 这里对照主版本的  主版本命名的都是通过下划线，但是插件获取uniform是通过函数，所以需要大写\n    #ifdef MeshOPT_Compress\n        vec2 texCoord0;\n        texCoord0.x = aTexCoord0.x * decodeTexCoord0vNormConstant.x;\n        texCoord0.y = aTexCoord0.y * decodeTexCoord0vNormConstant.y;\n        vTexCoord.xy = decodeTexCoord0Min + texCoord0.xy;\n    #endif\n\n\n    vec4 vertexColor = uFillForeColor;\n#ifdef VertexColor\n    vertexColor *= aColor;\n#endif\n#ifdef VertexNormal\n    vec3 normal = aNormal;\n#endif\n#ifdef InstanceBim\n    mat4 worldMatrix;\n    worldMatrix[0] = uv2;\n    worldMatrix[1] = uv3;\n    worldMatrix[2] = uv4;\n    worldMatrix[3] = vec4(0, 0, 0, 1);\n    vertexPos = vec4(vertexPos.xyz,1.0) * worldMatrix;\n    vertexColor *= secondary_colour; \n#endif\n#ifdef InstancePipe\n    mat4 worldMatrix;\n    mat4 worldMatrix0;\n    mat4 worldMatrix1;\n    vec4 worldPos0;\n    vec4 worldPos1;\n    worldMatrix0[0] = uv1;\n    worldMatrix0[1] = uv2;\n    worldMatrix0[2] = uv3;\n    worldMatrix0[3] = vec4( 0.0, 0.0, 0.0, 1.0 );\n    worldMatrix1[0] = uv4;\n    worldMatrix1[1] = uv5;\n    worldMatrix1[2] = uv6;\n    worldMatrix1[3] = vec4( 0.0, 0.0, 0.0, 1.0 );\n    vec4 realVertex = vec4(vertexPos.xyz, 1.0);\n    realVertex.x = realVertex.x * uv7.z;\n    worldPos0 = realVertex * worldMatrix0;\n    worldPos1 = realVertex * worldMatrix1;\n    vertexColor *= secondary_colour; \n#ifdef TexCoord\n    if(aTexCoord0.y > 0.5)\n    {\n        vec4 tex4Vec = uTexMatrix * vec4(uv7.y, aTexCoord0.x, 0.0, 1.0);\n        vTexCoord.xy = tex4Vec.xy;\n        vertexPos = worldPos1;\n        worldMatrix = worldMatrix1;\n    }\n    else\n    {\n        vec4 tex4Vec = uTexMatrix * vec4(uv7.x, aTexCoord0.x, 0.0, 1.0);\n        vTexCoord.xy = tex4Vec.xy;\n        vertexPos = worldPos0;\n        worldMatrix = worldMatrix0;\n    }\n#endif\n#ifdef VertexNormal\n    normal.x = normal.x * uv7.z;\n#endif\n#endif\n    #ifdef Instance  \n        float index = instanceId;\n    #else\n        float index = batchId;\n    #endif  \n        vec4 operationType = s3m_batchTable_operation(index);\n        vec4 objsColor = s3m_batchTable_color(index);\n        operation(operationType, objsColor, uSelectedColor, vertexColor);\n        vSecondColor = s3m_batchTable_pickColor(index);\n        vec4 positionMC = vec4(vertexPos.xyz, 1.0);\n        vColor = vertexColor;\n        vPositionMC = positionMC;\n        vPositionEC = (czm_modelView * positionMC).xyz;\n    #ifdef VertexNormal\n        vNormalEC = czm_normal * normal;\n    #endif\n        gl_Position = czm_modelViewProjection * vec4(vertexPos.xyz, 1.0);\n    }\n",yt="\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n    uniform vec4 uDiffuseColor;\n    uniform vec4 uAmbientColor;\n#ifdef TexCoord\n    varying vec4 vTexCoord;\n#ifdef COMPUTE_TEXCOORD\n    uniform sampler2D uTexture;\n#ifdef TextureAtlas\n    uniform vec4 uTexAtlasDim;\n    varying vec4 vTexAtlasTran;\n    varying vec4 vTexAtlasScale;\n    varying vec4 vTexAtlasSize;\n    varying vec2 vMaxMipLevel;\n#else\n    uniform float uTexture0Width;\n    varying vec4 vTexCoordTransform;\n    varying vec4 vTexMatrix;\n#endif\n#endif\n#endif\n#ifdef NO_TEXCOORD\n    uniform sampler2D uTexture;\n#endif\n    varying vec4 vColor;\n    varying vec4 vSecondColor;\n    varying vec4 vPositionMC;\n    varying vec3 vPositionEC;\n#ifdef VertexNormal\n    varying vec3 vNormalEC;\n#endif\n#ifdef TexCoord2\n    uniform sampler2D uTexture2;\n    uniform float uTexture1Width;\n    varying vec4 vTexMatrix2;\n#endif \n    void calculateMipLevel(in vec2 inTexCoord, in float vecTile, in float fMaxMip, inout float mipLevel)\n    {\n        vec2 dx = dFdx(inTexCoord * vecTile);\n        vec2 dy = dFdy(inTexCoord * vecTile);\n        float dotX = dot(dx, dx);\n        float dotY = dot(dy, dy);\n        float dMax = max(dotX, dotY);\n        float dMin = min(dotX, dotY);\n        float offset = (dMax - dMin) / (dMax + dMin);\n        offset = clamp(offset, 0.0, 1.0);\n        float d = dMax * (1.0 - offset) + dMin * offset;\n        mipLevel = 0.5 * log2(d);\n        mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);\n    }\n\n    void calculateMipLevel(in vec2 inTexCoord, in vec2 vecTile, in float fMaxMip, inout float mipLevel)\n    {\n        vec2 dx = dFdx(inTexCoord * vecTile.x);\n        vec2 dy = dFdy(inTexCoord * vecTile.y);\n        float dotX = dot(dx, dx);\n        float dotY = dot(dy, dy);\n        float dMax = max(dotX, dotY);\n        float dMin = min(dotX, dotY);\n        float offset = (dMax - dMin) / (dMax + dMin);\n        offset = clamp(offset, 0.0, 1.0);\n        float d = dMax * (1.0 - offset) + dMin * offset;\n        mipLevel = 0.5 * log2(d);\n        mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);\n    }\n    \n    void calculateTexCoord(in vec3 inTexCoord, in float scale, in float XTran, in float YTran, in float fTile, in float mipLevel, inout vec2 outTexCoord)\n    {\n        if(inTexCoord.z < -9000.0)\n        {\n            outTexCoord = inTexCoord.xy;\n        }\n        else\n        {\n            vec2 fTexCoord = fract(inTexCoord.xy);\n            float offset = 1.0 * pow(2.0, mipLevel) / fTile;\n            fTexCoord = clamp(fTexCoord, offset, 1.0 - offset);\n            outTexCoord.x = (fTexCoord.x + XTran) * scale;\n            outTexCoord.y = (fTexCoord.y + YTran) * scale;\n        }\n    }\n    \n    vec4 getTexColorForS3M(sampler2D curTexture, vec3 oriTexCoord, float texTileWidth, float fMaxMipLev, float fTexCoordScale, vec2 vecTexCoordTranslate)\n    {\n        vec4 color = vec4(1.0);\n        float mipLevel = 0.0;\n    #if defined(GL_OES_standard_derivatives) || defined(WEBGL2)\n        calculateMipLevel(oriTexCoord.xy, texTileWidth, fMaxMipLev, mipLevel);\n    #endif\n        vec2 realTexCoord;\n        calculateTexCoord(oriTexCoord, fTexCoordScale, vecTexCoordTranslate.x, vecTexCoordTranslate.y, texTileWidth, mipLevel, realTexCoord);\n        if(oriTexCoord.z < -9000.0)\n        {\n            color = texture2D(curTexture, realTexCoord.xy);\n        }\n        else\n        {\n            #ifdef GL_EXT_shader_texture_lod\n                color = texture2DLodEXT(curTexture, realTexCoord.xy, mipLevel);\n            #else\n                #ifdef WEBGL2\n                    color = textureLod(curTexture, realTexCoord.xy, mipLevel);\n                #else\n                    color = texture2D(curTexture, realTexCoord.xy, mipLevel);\n                #endif\n            #endif\n        }\n        #ifdef RGBTOBGR\n            color = color.bgra;\n        #endif\n        return color;\n    }\n#ifdef COMPUTE_TEXCOORD\n#ifdef TextureAtlas\n    vec4 getTextureAtlasColor(sampler2D texture, vec2 uv, vec2 texDim, vec2 texTran, vec2 texScale, float maxMipLevel)\n    {\n        if(maxMipLevel < 0.0)\n        {\n            return vec4(1.0);\n        }\n        vec4 colorCeil = vec4(1.0);\n        float mipLevel = 0.0;\n    #if defined(GL_OES_standard_derivatives) || defined(WEBGL2)\n        calculateMipLevel(uv, texDim, maxMipLevel, mipLevel);\n    #endif\n        float ceilMipLevel = ceil(mipLevel);\n        vec2 translate = vec2(texTran.x, texTran.y);\n        float temp;\n        if(ceilMipLevel > 0.0)\n        {\n            translate.x = texTran.x + texScale.x;\n            temp = pow(2.0, ceilMipLevel - 1.0);\n            translate.y = texTran.y + texScale.y * (temp - 1.0) / temp;\n        }\n        float scale = 1.0 / pow(2.0, ceilMipLevel);\n        vec2 texcoord = fract(uv);\n        float offsetX = pow(2.0, ceilMipLevel) / texDim.x;\n        float offsetY = pow(2.0, ceilMipLevel) / texDim.y;\n        texcoord.x = clamp(texcoord.x, 0.0 + offsetX, 1.0 - offsetX);\n        texcoord.y = clamp(texcoord.y, 0.0 + offsetY, 1.0 - offsetY);\n        texcoord.x = texcoord.x * texScale.x * scale + translate.x;\n        texcoord.y = texcoord.y * texScale.y * scale + translate.y;\n    #ifdef GL_EXT_shader_texture_lod\n        colorCeil = texture2DLodEXT(texture, texcoord.xy, 0.0);\n    #else\n        colorCeil = texture2D(texture, texcoord.xy, 0.0);\n    #endif\n        vec4 colorFloor = vec4(1.0);\n        float floorMipLevel = floor(mipLevel);\n        translate = vec2(texTran.x, texTran.y);\n        if(floorMipLevel > 0.0)\n        {\n            translate.x = texTran.x + texScale.x;\n            temp = pow(2.0, floorMipLevel - 1.0);\n            translate.y = texTran.y + texScale.y * (temp - 1.0) / temp;\n        }\n        scale = 1.0 / pow(2.0, floorMipLevel);\n        texcoord = fract(uv);\n        offsetX = pow(2.0, floorMipLevel) / texDim.x;\n        offsetY = pow(2.0, floorMipLevel) / texDim.y;\n        texcoord.x = clamp(texcoord.x, 0.0 + offsetX, 1.0 - offsetX);\n        texcoord.y = clamp(texcoord.y, 0.0 + offsetY, 1.0 - offsetY);\n        texcoord.x = texcoord.x * texScale.x * scale + translate.x;\n        texcoord.y = texcoord.y * texScale.y * scale + translate.y;\n    #ifdef GL_EXT_shader_texture_lod\n        colorFloor = texture2DLodEXT(texture, texcoord.xy, 0.0);\n    #else\n        colorFloor = texture2D(texture, texcoord.xy, 0.0);\n    #endif\n        vec4 color = colorCeil * 0.5 + colorFloor * 0.5;\n        return color;\n    }\n#else\n    vec4 getTextureColor()\n    {\n        if(vTexMatrix.z < 0.0)\n        {\n            return vec4(1.0);\n        }\n        float texTileWidth0 = vTexMatrix.z * uTexture0Width;\n        vec3 realTexCoord = vec3(vTexCoord.xy, vTexCoordTransform.x);\n        vec4 FColor = getTexColorForS3M(uTexture, realTexCoord, texTileWidth0, vTexMatrix.w, vTexMatrix.z, vTexMatrix.xy);\n    #ifdef TexCoord2\n        float texTileWidth1 = vTexMatrix2.z * uTexture1Width;\n        realTexCoord = vec3(vTexCoord.zw, vTexCoordTransform.y);\n        vec4 SColor = getTexColorForS3M(uTexture2, realTexCoord, texTileWidth1, vTexMatrix2.w, vTexMatrix2.z, vTexMatrix2.xy);\n        SColor.r = clamp(SColor.r, 0.0, 1.0);\n        SColor.g = clamp(SColor.g, 0.0, 1.0);\n        SColor.b = clamp(SColor.b, 0.0, 1.0);\n        // return FColor * SColor;\n        return FColor;\n    #else\n        return FColor;\n    #endif\n    }\n#endif\n#endif\n    \n    const float M_PI = 3.141592653589793;\n    vec3 SRGBtoLINEAR3(vec3 srgbIn) \n    {\n        return pow(srgbIn, vec3(2.2));\n    }\n    \n    vec4 SRGBtoLINEAR4(vec4 srgbIn)\n    {\n        srgbIn = srgbIn ;\n        vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));\n        return vec4(linearOut, srgbIn.a);\n    }\n    vec3 LINEARtoSRGB(vec3 linearIn)\n    {\n    #ifndef HDR \n        return pow(linearIn, vec3(1.0/2.2));\n    #else\n        return linearIn;\n    #endif\n    }\n    \n    vec3 fresnelSchlick2(vec3 f0, vec3 f90, float VdotH) \n    {\n        return f0 + (f90 - f0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);\n    }\n    \n    float smithVisibilityG1(float NdotV, float roughness) \n    {\n        float k = (roughness + 1.0) * (roughness + 1.0) / 8.0;\n        return NdotV / (NdotV * (1.0 - k) + k);\n    }\n    \n    float smithVisibilityGGX(float roughness, float NdotL, float NdotV) \n    {\n        return smithVisibilityG1(NdotL, roughness) * smithVisibilityG1(NdotV, roughness);\n    }\n    \n    float GGX(float roughness, float NdotH) \n    {\n        float roughnessSquared = roughness * roughness;\n        float f = (NdotH * roughnessSquared - NdotH) * NdotH + 1.0;\n        return roughnessSquared / (M_PI * f * f);\n    }\n\n    vec3 computeNormal(in vec3 oriVertex)\n    {\n        vec3 normal = cross(vec3(dFdx(oriVertex.x), dFdx(oriVertex.y), dFdx(oriVertex.z)), vec3(dFdy(oriVertex.x), dFdy(oriVertex.y), dFdy(oriVertex.z)));\n        normal = normalize(normal);\n        return normal;\n    }\n    \n    vec3 directionLight(vec3 normalEC) \n    {\n        const vec3 SunLightColor = vec3(0.8);\n        const vec3 AmbientLightColor = vec3(0.7);\n        vec3 totalDiffuseLight = vec3(0.0);\n        vec3 totalSpecularLight = vec3(0.0);\n        float sunLightDiffuseWeight = max( dot( normalEC, czm_lightDirectionEC ), 0.0 );\n        totalDiffuseLight = SunLightColor * sunLightDiffuseWeight;\n        return uDiffuseColor.rgb * (totalDiffuseLight + AmbientLightColor * uAmbientColor.rgb) + totalSpecularLight;\n    }\n    #ifdef ADJUST_COLOR\n        uniform float uBrightness;\n        uniform float uContrast;\n        uniform float uHue;\n        uniform float uSaturation;\n        uniform float uOneOverGamma;\n        vec3 adjustColor(vec3 inputColor)\n        {\n            vec3 outputColor = inputColor;\n            outputColor.rgb = mix(vec3(0.0), outputColor.rgb, uBrightness);\n            outputColor.rgb = mix(vec3(0.5), outputColor.rgb, uContrast);\n            outputColor.rgb = czm_hue(outputColor.rgb, uHue);\n            outputColor.rgb = clamp(outputColor.rgb, 0.0, 1.0);\n            outputColor.rgb = czm_saturation(outputColor.rgb, uSaturation);\n            outputColor.rgb = pow(outputColor.rgb, vec3(uOneOverGamma));\n            return outputColor;\n        }\n    #endif\n\n\n    void main()\n    {\n        if(vColor.a < 0.1)\n        {\n            discard;\n        } \n    #ifdef APPLY_SWIPE\n        rollerShutter(gl_FragCoord.xy, uSwipeRegion);\n    #endif\n        vec4 baseColorWithAlpha = vColor;\n    #ifdef COMPUTE_TEXCOORD\n    #ifdef TextureAtlas\n        baseColorWithAlpha *= getTextureAtlasColor(uTexture, vTexCoord.xy, vTexAtlasSize.xy, vTexAtlasTran.xy, vTexAtlasScale.xy, vMaxMipLevel.x);\n    #else\n        baseColorWithAlpha *= getTextureColor();\n    #endif\n    #endif\n    #ifdef NO_TEXCOORD\n        #ifndef REPLACE_COLOR_TYPE\n            baseColorWithAlpha *= texture2D(uTexture, vec2(0.5));\n        #endif\n    #endif\n        if(baseColorWithAlpha.a < 0.1)\n        {\n            discard;\n        }\n        vec4 outColor = baseColorWithAlpha;\n    #ifndef USE_LINECOLOR    \n        vec3 ng = vec3(0.0);\n    #ifdef VertexNormal\n        ng = normalize(vNormalEC);\n    #endif\n        ng = length(ng) > 0.1 ? ng : computeNormal(vPositionMC.xyz);\n    #ifdef HAS_NORMAL_TEXTURE\n        vec3 pos_dx = dFdx(vPositionEC);\n        vec3 pos_dy = dFdy(vPositionEC);\n        vec3 tex_dx = dFdx(vec3(vTexCoord.xy, 0.0));\n        vec3 tex_dy = dFdy(vec3(vTexCoord.xy, 0.0));\n        vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n        t = normalize(t - ng * dot(ng, t));\n        vec3 b = normalize(cross(ng, t));\n        mat3 tbn = mat3(t, b, ng);\n        vec3 n = texture2D(uNormalTexture, vTexCoord.xy).rgb;\n        n = normalize(tbn * (2.0 * n - 1.0));\n    #else\n        vec3 n = ng;\n    #endif\n    vec3 baseColor = baseColorWithAlpha.rgb;\n    outColor.rgb = baseColor * directionLight(n);\n    #else\n    outColor = baseColorWithAlpha * uDiffuseColor;\n    #endif\n    #ifdef ADJUST_COLOR\n        outColor.rgb = adjustColor(outColor.rgb);\n    #endif\n        gl_FragColor = outColor;\n    }\n";const Et={Fill:0,WireFrame:1,Fill_And_WireFrame:2};var ht=Object.freeze(Et);const Bt={OPAQUE:"opaque",BLEND:"blend",MASK:"mask"};var Tt=Object.freeze(Bt);function xt(e){ot.call(this,e),this.vs=Ct,this.fs=yt,this.edgeVA=void 0,this.edgeSP=void 0,this.regularEdgeCommand=void 0,this.silhouetteEdgeCommand=void 0,this.useLineColor=!1}function bt(){return Cesium.RenderState.fromCache({cull:{enabled:!1},depthTest:{enabled:!0,func:Cesium.DepthFunction.LESS_OR_EQUAL},blending:Cesium.BlendingState.ALPHA_BLEND,stencilTest:{backFunction:Cesium.StencilFunction.ALWAYS,backOperation:{fail:Cesium.StencilOperation.KEEP,zFail:Cesium.StencilOperation.KEEP,zPass:Cesium.StencilOperation.REPLACE},enabled:!0,frontFunction:Cesium.StencilFunction.ALWAYS,frontOperation:{fail:Cesium.StencilOperation.KEEP,zFail:Cesium.StencilOperation.KEEP,zPass:Cesium.StencilOperation.REPLACE},mask:Cesium.StencilConstants.CESIUM_3D_TILE_MASK,reference:Cesium.StencilConstants.CESIUM_3D_TILE_MASK}})}function gt(){return Cesium.RenderState.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:Cesium.DepthFunction.LESS_OR_EQUAL},blending:Cesium.BlendingState.ALPHA_BLEND})}Cesium.defined,xt.prototype=Object.create(ot.prototype),xt.prototype.constructor=ot;const Dt=new Cesium.Cartesian4;function Pt(e,t,n){n.materialPass;const r={uGeoMatrix:function(){return n.geoMatrix},uTexMatrix:function(){return e.texMatrix},uFillForeColor:function(){return n.useLineColor?t.style3D.lineColor:t.style3D.fillForeColor},uDiffuseColor:function(){return e.diffuseColor},uAmbientColor:function(){return e.ambientColor},uInverseGeoMatrix:function(){return n.invGeoMatrix},uTexture:function(){const t=e.textures[0];return t.isTexBlock?t.renderable&&t.ready?t:e.ancestorTexture?e.ancestorTexture:t:e.textures[0]},uTexture2:function(){return e.textures[1]},uTexAtlasDim:function(){const t=e.textures[0].renderable?e.textures[0]:e.ancestorTexture?e.ancestorTexture:e.textures[0];if(Dt.x=t.width,Dt.y=t.height,e.textures[1]){const t=e.textures[1].renderable?e.textures[1]:e.ancestorTextureBake?e.ancestorTextureBake:e.textures[1];Dt.z=t.width,Dt.w=t.height}return Dt},uTexture0Width:function(){return e.textures[0].width},uTexture1Width:function(){return e.textures[1].width},uSelectedColor:function(){return t.selectedColor},uBrightness:function(){return t._brightness},uContrast:function(){return t._contrast},uHue:function(){return t._hue},uSaturation:function(){return t._saturation},uOneOverGamma:function(){return 1/t._gamma},decodePositionMin:function(){return n.vertexPackage.minVerticesValue},decodePositionNormConstant:function(){return n.vertexPackage.vertCompressConstant}},o=n.vertexPackage.minTexCoordValue;return o&&o.length>0&&(r.decodeTexCoord0vNormConstant=function(){return n.vertexPackage.texCoordCompressConstant[0]},r.decodeTexCoord1vNormConstant=function(){return n.vertexPackage.texCoordCompressConstant[1]},r.decodeTexCoord0Min=function(){return n.vertexPackage.minTexCoordValue[0]}),r}xt.prototype.createCommand=function(){if(Cesium.defined(this.colorCommand)||0!==this.vertexBufferToCreate.length||0!==this.indexBufferToCreate.length||0!==this.shaderProgramToCreate.length)return;const e=this.layer,t=e.context,n=this.vertexPackage,r=this.arrIndexPackage,o=n.vertexAttributes;if(r.length<1)return;const i=r[0],a=this.material;this.vertexArray=new Cesium.VertexArray({context:t,attributes:o,indexBuffer:i.indexBuffer});let s=Cesium.PrimitiveType.TRIANGLES;switch(i.primitiveType){case 1:s=Cesium.PrimitiveType.POINTS;break;case 2:s=Cesium.PrimitiveType.LINES;break;case 4:s=Cesium.PrimitiveType.TRIANGLES}this.useLineColor=s===Cesium.PrimitiveType.LINES;let u=!1;(a.alphaMode===Tt.MASK||a.alphaMode===Tt.BLEND||e._isTransparencyOptimization&&a.bTransparentSorting)&&(u=!0),this.colorCommand=new Cesium.DrawCommand({primitiveType:s,modelMatrix:this.modelMatrix,boundingVolume:Cesium.BoundingSphere.clone(this.boundingVolume),pickId:this.pickColorIdentifier,vertexArray:this.vertexArray,shaderProgram:this.shaderProgram,pass:u?Cesium.Pass.TRANSLUCENT:Cesium.Pass.CESIUM_3D_TILE,renderState:a.bTransparentSorting?gt():bt(),instanceCount:n.instanceCount});let c=Pt(a,e,this);this.batchTable&&(c=this.batchTable.getUniformMapCallback()(c)),a.batchTable&&(c=a.batchTable.getUniformMapCallback()(c)),this.colorCommand.uniformMap=c,this.vs=void 0,this.fs=void 0,this.ready=!0},xt.prototype.transformResource=function(e,t){this.ready||(this.createBatchTable(e),this.createPickIds(),this.createBuffers(e),this.createShaderProgram(e),this.createCommand(e),this.initLayerSetting(t))},xt.prototype.update=function(e,t){this.batchTableDirty&&(this.updateBatchTableAttributes(),this.batchTableDirty=!1),this.batchTable&&this.batchTable.update(e),t.style3D.fillStyle!==ht.WireFrame&&e.commandList.push(this.colorCommand),t.style3D.fillStyle!==ht.Fill&&(this.regularEdgeCommand&&(e.commandList.push(this.regularEdgeCommand),t._addRenderedEdge(this.regularEdgeCommand.edgeTotalLength,this.regularEdgeCommand.edgeCount)),this.silhouetteEdgeCommand&&(e.commandList.push(this.silhouetteEdgeCommand),t._addRenderedEdge(this.silhouetteEdgeCommand.edgeTotalLength,this.silhouetteEdgeCommand.edgeCount)))},xt.prototype.isDestroyed=function(){return!1},xt.prototype.destroy=function(){return this.shaderProgram=this.shaderProgram&&!this.shaderProgram.isDestroyed()&&this.shaderProgram.destroy(),this.vertexArray=this.vertexArray&&!this.vertexArray.isDestroyed()&&this.vertexArray.destroy(),this.material=this.material&&!this.material.isDestroyed()&&this.material.destroy(),this.batchTable=this.batchTable&&!this.batchTable.isDestroyed()&&this.batchTable.destroy(),this.edgeVA=this.edgeVA&&!this.edgeVA.isDestroyed()&&this.edgeVA.destroy(),this.edgeSP=this.edgeSP&&!this.edgeSP.isDestroyed()&&this.edgeSP.destroy(),this.colorCommand=void 0,this.vertexPackage=null,this.arrIndexPackage=null,this.modelMatrix=void 0,this.pickInfo=void 0,this.selectionInfoMap=void 0,this.vs=void 0,this.fs=void 0,Cesium.destroyObject(this)};const vt={OSGBFile:function(e){return new _t(e)},OSGBCacheFile:function(e){return new xt(e)}};function Mt(){}Mt.wasmReady=!1,Mt.crunch=void 0,Mt.loading=!1,Mt.init=function(){Mt.loading||(Promise.resolve().then((function(){return nr})).then((e=>{Mt.loading=!1,Mt.crunch=e.default,Object.keys(Mt.crunch.asm).length>0&&(Mt.wasmReady=!0),Mt.crunch.onRuntimeInitialized=function(){Mt.wasmReady=!0}})),Mt.loading=!0)};const It={cCRNFmtInvalid:-1,cCRNFmtDXT1:0,cCRNFmtDXT3:1,cCRNFmtDXT5:2},Lt={};let St,Ft;Lt[It.cCRNFmtDXT1]=Cesium.PixelFormat.RGB_DXT1,Lt[It.cCRNFmtDXT3]=Cesium.PixelFormat.RGBA_DXT3,Lt[It.cCRNFmtDXT5]=Cesium.PixelFormat.RGBA_DXT5;let Nt=0;function Rt(e,t,n,r){let o;const i=n/4,a=r%4,s=new Uint32Array(e.buffer,0,(r-a)/4),u=new Uint32Array(t.buffer);for(o=0;o<s.length;o++)u[i+o]=s[o];for(o=r-a;o<r;o++)t[n+o]=e[o]}Mt.transcode=function(e){const t=Mt.crunch,n=e.data,r=n.byteLength,o=new Uint8Array(n),i=t._malloc(r);Rt(o,t.HEAPU8,i,r);const a=t._crn_get_dxt_format(i,r),s=Lt[a];if(!Cesium.defined(s))throw new Cesium.RuntimeError("Unsupported compressed format.");const u=t._crn_get_levels(i,r),c=t._crn_get_width(i,r),l=t._crn_get_height(i,r);let d,f=0;for(d=0;d<u;++d)f+=Cesium.PixelFormat.compressedTextureSizeInBytes(s,c>>d,l>>d);Nt<f&&(Cesium.defined(St)&&t._free(St),St=t._malloc(f),Ft=new Uint8Array(t.HEAPU8.buffer,St,f),Nt=f),t._crn_decompress(i,r,St,f,0,u),t._free(i);if(Cesium.defaultValue(e.bMipMap,!1)){const e=Ft.slice(0,f);return 4===Cesium.CompressedTextureBuffer.length?new Cesium.CompressedTextureBuffer(s,c,l,e):new Cesium.CompressedTextureBuffer(s,Cesium.PixelDatatype.UNSIGNED_BYTE,c,l,e)}{const e=Cesium.PixelFormat.compressedTextureSizeInBytes(s,c,l),t=Ft.subarray(0,e),n=new Uint8Array(e);return n.set(t,0),4===Cesium.CompressedTextureBuffer.length?new Cesium.CompressedTextureBuffer(s,c,l,n):new Cesium.CompressedTextureBuffer(s,Cesium.PixelDatatype.UNSIGNED_BYTE,c,l,n)}};const Ot={LUMINANCE_8:1,LUMINANCE_16:2,ALPHA:3,ALPHA_4_LUMINANCE_4:4,LUMINANCE_ALPHA:5,RGB_565:6,BGR565:7,RGB:10,BGR:11,ARGB:12,ABGR:13,BGRA:14,WEBP:25,RGBA:28,DXT1:17,DXT2:18,DXT3:19,DXT4:20,DXT5:21,CRN_DXT5:26,STANDARD_CRN:27};var Gt=Object.freeze(Ot);function wt(){}async function Ut(e,t,n){const r={},o=[],i=Cesium.defaultValue(t.materials.material,t.materials.materials);for(let a=0,s=i.length;a<s;a++){const s=i[a].material,u=Cesium.defaultValue(s.id,s.name),c=new Ke;r[u]=c;const l=Cesium.defaultValue(s.ambient,Cesium.Color.WHITE);c.ambientColor=new Cesium.Color(l.r,l.g,l.b,l.a);const d=Cesium.defaultValue(s.diffuse,Cesium.Color.WHITE);c.diffuseColor=new Cesium.Color(d.r,d.g,d.b,d.a);const f=Cesium.defaultValue(s.specular,Cesium.Color.WHITE);c.specularColor=new Cesium.Color(f.r,f.g,f.b,f.a),c.shininess=s.shininess,c.bTransparentSorting=s.transparentsorting,c.alphaMode=s.alphaMode;const p=Cesium.defaultValue(s.textureunitstates,s.textureStates),_=p.length;for(let r=0;r<_;r++){const i=Cesium.defaultValue(p[r].textureunitstate,p[r].textureUnitState),a=Cesium.defaultValue(i.id,i.textureName),s=Cesium.defaultValue(i.addressmode,i.uAddressMode),u=0===s.u?Cesium.TextureWrap.REPEAT:Cesium.TextureWrap.CLAMP_TO_EDGE,l=0===s.v?Cesium.TextureWrap.REPEAT:Cesium.TextureWrap.CLAMP_TO_EDGE;c.texMatrix=Cesium.Matrix4.unpack(Cesium.defaultValue(i.texmodmatrix,i.matrix));const d=t.texturePackage[a];if(Cesium.defined(d)&&d.arrayBufferView.byteLength>0){d.wrapS=u,d.wrapT=l;const t=n.fileName+a;let r=e.textureCache.getTexture(t);if(c._RGBTOBGR=d.nFormat===Gt.ABGR,!Cesium.defined(r))switch(d.isTexBlock=!1,d.compressType){case Gt.CRN_DXT5:const n=Mt.transcode({data:d.arrayBufferView,bMipMap:!0});d.arrayBufferView=n.bufferView,r=new Ve(e,a,d),e.textureCache.addTexture(t,r);break;case Gt.WEBP:o.push(c.createWebp(t,e,d));break;default:r=new Ve(e,a,d),e.textureCache.addTexture(t,r)}r&&c.textures.push(r)}}}return Promise.all(o).then((()=>r))}function Vt(e,t){const n=new Cesium.BoundingSphere;let r=new Cesium.Cartesian3;const o=e.vertexAttributes[0],i=o.componentsPerAttribute,a=Cesium.defined(e.compressOptions)&&(e.compressOptions&qe.SVC_Vertex)===qe.SVC_Vertex;let s,u,c=1;a?(c=e.vertCompressConstant,s=new Cesium.Cartesian3(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),u=new Uint16Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/2)):u=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);const l=[];for(let t=0;t<e.verticesCount;t++)Cesium.Cartesian3.fromArray(u,i*t,r),a&&(r=Cesium.Cartesian3.multiplyByScalar(r,c,r),r=Cesium.Cartesian3.add(r,s,r)),l.push(Cesium.Cartesian3.clone(r));return Cesium.BoundingSphere.fromPoints(l,n),Cesium.BoundingSphere.transform(n,t,n),l.length=0,n}const Ht=new Cesium.Cartesian3;function Kt(e){const t=new Cesium.BoundingSphere,n=e.instanceBounds;if(!Cesium.defined(n))return t;const r=new Cesium.Cartesian3(n[0],n[1],n[2]),o=new Cesium.Cartesian3(n[3],n[4],n[5]),i=new Cesium.Cartesian3.lerp(r,o,.5,Ht),a=new Cesium.Cartesian3.distance(i,r);return t.center=i,t.radius=a,t}function kt(e,t){return e.instanceIndex>-1?Kt(e):Vt(e,t)}function Yt(e,t){if(e.center){const n=new Cesium.Matrix3,r=new Cesium.Cartesian3(e.center.x,e.center.y,e.center.z);Cesium.Matrix4.multiplyByPoint(t,r,r);const o=new Cesium.Cartesian4(e.xExtent.x,e.xExtent.y,e.xExtent.z,0),i=new Cesium.Cartesian4(e.yExtent.x,e.yExtent.y,e.yExtent.z,0),a=new Cesium.Cartesian4(e.zExtent.x,e.zExtent.y,e.zExtent.z,0);return Cesium.Matrix4.multiplyByVector(t,o,o),Cesium.Matrix4.multiplyByVector(t,i,i),Cesium.Matrix4.multiplyByVector(t,a,a),Cesium.Matrix3.setColumn(n,0,o,n),Cesium.Matrix3.setColumn(n,1,i,n),Cesium.Matrix3.setColumn(n,2,a,n),new Cesium.TileOrientedBoundingBox(r,n)}const n=[];n.push(new Cesium.Cartesian3(e.min.x,e.min.y,e.min.z)),n.push(new Cesium.Cartesian3(e.min.x,e.min.y,e.max.z)),n.push(new Cesium.Cartesian3(e.min.x,e.max.y,e.min.z)),n.push(new Cesium.Cartesian3(e.min.x,e.max.y,e.max.z)),n.push(new Cesium.Cartesian3(e.max.x,e.min.y,e.min.z)),n.push(new Cesium.Cartesian3(e.max.x,e.min.y,e.max.z)),n.push(new Cesium.Cartesian3(e.max.x,e.max.y,e.min.z)),n.push(new Cesium.Cartesian3(e.max.x,e.max.y,e.max.z));for(let e=0;e<8;e++)n[e]=Cesium.Matrix4.multiplyByPoint(t,n[e],n[e]);const r=Cesium.OrientedBoundingBox.fromPoints(n);return new Cesium.TileOrientedBoundingBox(r.center,r.halfAxes)}function zt(e,t,n,r,o){const i=r.geodes;for(let r=0,a=i.length;r<a;r++){const a=i[r],s=a.matrix,u=Cesium.Matrix4.multiply(e.modelMatrix,s,new Cesium.Matrix4);let c;Cesium.defined(o.boundingVolume)&&(Cesium.defined(o.boundingVolume.obb)?c=Yt(o.boundingVolume.obb,e.modelMatrix)._boundingSphere:(c=new Cesium.BoundingSphere(o.boundingVolume.sphere.center,o.boundingVolume.sphere.radius),Cesium.BoundingSphere.transform(c,e.modelMatrix,c)));const l=a.skeletonNames;for(let r=0,i=l.length;r<i;r++){const i=l[r],a=t.geoPackage[i],d=a.vertexPackage,f=a.arrIndexPackage,p=a.pickInfo;let _;f.length>0&&(_=n[f[0].materialCode]);const A=Cesium.defined(c)?c:kt(d,u),m=vt[e.fileType]({layer:e,vertexPackage:d,arrIndexPackage:f,pickInfo:p,modelMatrix:u,geoMatrix:s,boundingVolume:A,material:_,edgeGeometry:a.edgeGeometry,geoName:i});o.renderEntities.push(m)}}if(!Cesium.defined(o.boundingVolume)&&o.renderEntities.length>0){const e=[];for(let t=0,n=o.renderEntities.length;t<n;t++)e.push(o.renderEntities[t].boundingVolume);o.boundingVolume={sphere:Cesium.BoundingSphere.fromBoundingSpheres(e),isCalc:!0}}}function Jt(e,t,n){const r=t.groupNode,o=[];for(let i=0,a=r.pageLods.length;i<a;i++){const a={},s=r.pageLods[i];if(a.rangeMode=s.rangeMode,a.childTile=s.childTile,a.rangeList=s.rangeList,a.isLeafTile=""===a.childTile,a.renderEntities=[],s.boundingSphere&&(!a.isLeafTile||e.dataVersion>2)){const e=s.boundingSphere.center,t=s.boundingSphere.radius;a.boundingVolume={sphere:{center:new Cesium.Cartesian3(e.x,e.y,e.z),radius:t},isCalc:!1}}s.obb&&(a.boundingVolume=a.boundingVolume||{},a.boundingVolume.obb=s.obb),zt(e,t,n,s,a),o.push(a)}return o}function Xt(){let e,t;const n=new Promise((function(n,r){e=n,t=r}));return{resolve:e,reject:t,promise:n}}wt.parse=async function(e,t,n){if(!Cesium.defined(t))return;e.dataVersion=t.version;return Jt(e,t,await Ut(e.context,t,n))};const jt={Distance:0,Pixel:1,GeometryError:2};var Wt=Object.freeze(jt);function qt(){this.fileName=void 0,this.rangeData=void 0,this.rangeMode=void 0,this.boundingVolume=void 0,this.isLeafTile=!1,this.renderEntities=[],this.childTile=void 0,this.canRefine=!1,this.ready=!1}function Zt(e,t,n,r){this.layer=e,this.parent=t;const o=r.replace(/\\/g,"/");this.fileExtension=Cesium.getExtensionFromUri(r),this.relativePath=en(o,e),this.fileName=r,this.isLeafTile=!1,this.isRootTile=!1,this.boundingVolume=this.createBoundingVolume(n,e.modelMatrix);const a=Cesium.Resource.createIfNeeded(e._baseResource);if(Cesium.defined(t))this.baseUri=t.baseUri;else{const e=new Cesium.Resource(o);this.baseUri=e.getBaseUri()}this.contentResource=a.getDerivedResource({url:this.relativePath}),this.serverKey=Cesium.RequestScheduler.getServerKey(this.contentResource.getUrlComponent()),this.request=void 0,this.cacheNode=void 0,this.distanceToCamera=0,this.centerZDepth=0,this.depth=t?t.depth+1:0,this.visibilityPlaneMask=0,this.visible=!1,this.pageLods=[],this.renderEntities=[],this.contentState=i.UNLOADED,this.touchedFrame=0,this.requestedFrame=0,this.processFrame=0,this.updatedVisibilityFrame=0,this.foveatedFactor=0,this.priority=0}qt.prototype.update=function(e,t){const n=e.context,r=this.boundingVolume,o=this.rangeMode,i=this.rangeData,a=t.lodRangeScale,s=r.distanceToCamera(e);if(o===Wt.Distance)this.canRefine=s*a<i;else if(o===Wt.Pixel){const t=r.radius;r.center;const n=e.context.drawingBufferHeight,o=.5*e.camera.frustum._fovy,u=.5*n/Math.tan(o)*t/s;this.canRefine=u>i*a}else if(o===Wt.GeometryError){const t=n.uniformState.pixelRatio,r=i*n.drawingBufferHeight/(s*e.camera.frustum.sseDenominator)/t;this.canRefine=r>16*a}},qt.prototype.createChildTile=function(e,t){const n=new Zt(e,t,this.boundingVolume,this.fileName);this.childTile=n},qt.prototype.isDestroyed=function(){return!1},qt.prototype.destroy=function(){for(let e=0,t=this.renderEntities.length;e<t;e++){this.renderEntities[e].destroy()}return this.renderEntities.length=0,this.childTile=void 0,Cesium.destroyObject(this)},Cesium.defined;const Qt=new Cesium.Cartesian3;function $t(e,t){let n=Cesium.Cartesian3.clone(e.center),r=e.radius;n=Cesium.Matrix4.multiplyByPoint(t,n,n);const o=Cesium.Matrix4.getScale(t,Qt);return r*=Cesium.Cartesian3.maximumComponent(o),new Cesium.TileBoundingSphere(n,r)}function en(e,t){e=e.replace(/\+/g,"%2B");const n=t._basePath;if(!(t._basePath.indexOf("realspace")>-1))return e;const r=n.replace(/(.*realspace)/,"");let o=n.replace(/\/rest\/realspace/g,"").replace(r,"");return o+="/rest/realspace"+r+"data/path/"+e.replace(/^\.*/,"").replace(/^\//,"").replace(/\/$/,""),o}function tn(e,t){if(e.center){const n=new Cesium.Matrix3,r=new Cesium.Cartesian3(e.center.x,e.center.y,e.center.z);Cesium.Matrix4.multiplyByPoint(t,r,r);const o=new Cesium.Cartesian4(e.xExtent.x,e.xExtent.y,e.xExtent.z,0),i=new Cesium.Cartesian4(e.yExtent.x,e.yExtent.y,e.yExtent.z,0),a=new Cesium.Cartesian4(e.zExtent.x,e.zExtent.y,e.zExtent.z,0);return Cesium.Matrix4.multiplyByVector(t,o,o),Cesium.Matrix4.multiplyByVector(t,i,i),Cesium.Matrix4.multiplyByVector(t,a,a),Cesium.Matrix3.setColumn(n,0,o,n),Cesium.Matrix3.setColumn(n,1,i,n),Cesium.Matrix3.setColumn(n,2,a,n),new Cesium.TileOrientedBoundingBox(r,n)}const n=[];n.push(new Cesium.Cartesian3(e.min.x,e.min.y,e.min.z)),n.push(new Cesium.Cartesian3(e.min.x,e.min.y,e.max.z)),n.push(new Cesium.Cartesian3(e.min.x,e.max.y,e.min.z)),n.push(new Cesium.Cartesian3(e.min.x,e.max.y,e.max.z)),n.push(new Cesium.Cartesian3(e.max.x,e.min.y,e.min.z)),n.push(new Cesium.Cartesian3(e.max.x,e.min.y,e.max.z)),n.push(new Cesium.Cartesian3(e.max.x,e.max.y,e.min.z)),n.push(new Cesium.Cartesian3(e.max.x,e.max.y,e.max.z));for(let e=0;e<8;e++)n[e]=Cesium.Matrix4.multiplyByPoint(t,n[e],n[e]);const r=Cesium.OrientedBoundingBox.fromPoints(n);return new Cesium.TileOrientedBoundingBox(r.center,r.halfAxes)}Zt.prototype.createBoundingVolume=function(e,t){return Cesium.defined(e.sphere)?$t(e.sphere,t):Cesium.defined(e.box)?tn(e.box,t):e.boundingVolume?e:void 0},Zt.prototype.distanceToTile=function(e){return this.boundingVolume.distanceToCamera(e)};const nn=new Cesium.Cartesian3;Zt.prototype.distanceToTileCenter=function(e){const t=this.boundingVolume.boundingVolume,n=Cesium.Cartesian3.subtract(t.center,e.camera.positionWC,nn);return Cesium.Cartesian3.dot(e.camera.directionWC,n)},Zt.prototype.visibility=function(e,t){const n=this.boundingVolume;return e.cullingVolume.computeVisibilityWithPlaneMask(n,t)};const rn=new Cesium.Cartesian3;function on(e,t){const n=t.camera,r=e.boundingVolume.boundingVolume,o=r.radius,i=Cesium.Cartesian3.multiplyByScalar(n.directionWC,e.centerZDepth,rn),a=Cesium.Cartesian3.add(n.positionWC,i,rn),s=Cesium.Cartesian3.subtract(a,r.center,rn);if(Cesium.Cartesian3.magnitude(s)>o){const t=Cesium.Cartesian3.normalize(s,rn),i=Cesium.Cartesian3.multiplyByScalar(t,o,rn),a=Cesium.Cartesian3.add(r.center,i,rn),u=Cesium.Cartesian3.subtract(a,n.positionWC,rn),c=Cesium.Cartesian3.normalize(u,rn);e.foveatedFactor=1-Math.abs(Cesium.Cartesian3.dot(n.directionWC,c))}else e.foveatedFactor=0}function an(e){return function(){return e.priority}}function sn(e){return function(t){e.contentState=i.FAILED,e.contentReadyPromise.reject(t)}}function un(e,t){const n=e.layer,r=t.length;for(let o=0;o<r;o++){const r=new qt,i=t[o],a=i.boundingVolume,s=i.childTile;r.fileName=e.baseUri+s,r.rangeData=i.rangeList,r.rangeMode=i.rangeMode,a.obb?r.boundingVolume=tn(a.obb,n.modelMatrix):a.box?r.boundingVolume=tn(a.box,n.modelMatrix):a.sphere&&(a.isCalc?r.boundingVolume=new Cesium.TileBoundingSphere(a.sphere.center,a.sphere.radius):r.boundingVolume=$t(a.sphere,n.modelMatrix)),r.renderEntities=i.renderEntities,r.isLeafTile=i.isLeafTile,e.pageLods.push(r)}}async function cn(e,t,n){let r;if(e._cache.add(t),"s3mb"===t.fileExtension&&(r=Q.parseBuffer(n)),!r)return t.contentState=i.FAILED,void t.contentReadyPromise.reject();un(t,await wt.parse(e,r,t)),t.contentState=i.LOADED,t.contentReadyPromise&&t.contentReadyPromise.resolve(r)}function ln(e,t,n){return Math.max(Cesium.Math.normalize(e,t,n)-Cesium.Math.EPSILON7,0)}function dn(e,t,n){const r=e*Math.pow(10,t);return parseInt(r)*Math.pow(10,n)}function fn(){this._stack=[],this._selectPageLods=[]}function pn(e,t,n){t.requestedFrame!==n.frameNumber&&t.contentState===i.UNLOADED&&(e._requestTiles.push(t),t.requestedFrame=n.frameNumber)}function _n(e,t,n){t.processFrame!==n.frameNumber&&(t.processFrame=n.frameNumber,e._processTiles.push(t))}function An(e,t,n){t.touchedFrame!==n.frameNumber&&(e._cache.touch(t),t.touchedFrame=n.frameNumber)}function mn(e,t){e._maximumPriority.distance=Math.max(t.distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t.distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t.depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t.depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t.foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t.foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.pixel=Math.max(t.pixel,e._maximumPriority.pixel),e._minimumPriority.pixel=Math.min(t.pixel,e._minimumPriority.pixel)}function Cn(e,t,n){n.updatedVisibilityFrame!==e.frameNumber&&(n.updatedVisibilityFrame=e.frameNumber,n.updateVisibility(e,t)),mn(t,n)}function yn(e,t){const n=e._requestTiles,r=n.length;for(let o=0;o<r;++o)n[o].updatePriority(e,t)}function En(){this._list=new Cesium.DoublyLinkedList,this._sentinel=this._list.add(),this._trimTiles=!1}function hn(){}function Bn(){this._fillForeColor=new Cesium.Color,this._lineColor=new Cesium.Color,this._lineWidth=1,this._bottomAltitude=0,this._pointSize=1,this._pointColor=new Cesium.Color}
/**
     * @license
     *
     * Grauw URI utilities
     *
     * See: http://hg.grauw.nl/grauw-lib/file/tip/src/uri.js
     *
     * @author Laurens Holst (http://www.grauw.nl/)
     *
     *   Copyright 2012 Laurens Holst
     *
     *   Licensed under the Apache License, Version 2.0 (the "License");
     *   you may not use this file except in compliance with the License.
     *   You may obtain a copy of the License at
     *
     *       http://www.apache.org/licenses/LICENSE-2.0
     *
     *   Unless required by applicable law or agreed to in writing, software
     *   distributed under the License is distributed on an "AS IS" BASIS,
     *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *   See the License for the specific language governing permissions and
     *   limitations under the License.
     *
     */
function Tn(e){if(e instanceof Tn)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){const t=xn.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}Zt.prototype.updateVisibility=function(e,t){const n=this.parent,r=Cesium.defined(n)?n.visibilityPlaneMask:Cesium.CullingVolume.MASK_INDETERMINATE;this.distanceToCamera=this.distanceToTile(e),this.centerZDepth=this.distanceToTileCenter(e),this.visibilityPlaneMask=this.visibility(e,r),this.visible=this.visibilityPlaneMask!==Cesium.CullingVolume.MASK_OUTSIDE&&this.distanceToCamera>=t.visibleDistanceMin&&this.distanceToCamera<=t.visibleDistanceMax,on(this,e)},Zt.prototype.requestContent=function(){const e=this,t=this.layer,n=this.contentResource.clone(),r=new Cesium.Request({throttle:!0,throttleByServer:!0,type:Cesium.RequestType.TILES3D,priorityFunction:an(this),serverKey:this.serverKey});this.request=r,n.request=r;const o=n.fetchArrayBuffer();if(!Cesium.defined(o))return!1;this.contentState=i.LOADING,this.contentReadyPromise=Xt();const a=sn(this);return o.then((function(n){e.isDestroyed()?a():cn(t,e,n)}),(t=>{r.state!==Cesium.RequestState.CANCELLED?a(t):e.contentState=i.UNLOADED})),!0},Zt.prototype.updatePriority=function(e,t){const n=e._minimumPriority,r=e._maximumPriority;let o=4;const i=dn(ln(this.foveatedFactor,n.foveatedFactor,r.foveatedFactor),4,o);o=8;const a=dn(1-ln(this.pixel,n.pixel,r.pixel),4,o);o=0;const s=dn(ln(this.distanceToCamera,n.distance,r.distance),4,o);this.priority=i+a+s},Zt.prototype.transformResource=function(e,t){e.context;let n=!0;for(let r=0,o=this.pageLods.length;r<o;r++){const o=this.pageLods[r];let i=!0;for(let r=0,a=o.renderEntities.length;r<a;r++){const a=o.renderEntities[r];if(!a.ready){n=!1,i=!1;try{a.transformResource(e,t)}catch(e){console.log(e)}}}o.ready=i}n&&(this.contentState=i.READY)},Zt.prototype.update=function(e,t){},Zt.prototype.free=function(){this.contentState=i.UNLOADED,this.request=void 0,this.cacheNode=void 0,this.contentReadyPromise=void 0;for(let e=0,t=this.pageLods.length;e<t;e++){this.pageLods[e].destroy()}this.pageLods.length=0},Zt.prototype.isDestroyed=function(){return!1},Zt.prototype.destroy=function(){return this.free(),Cesium.destroyObject(this)},fn.prototype.schedule=function(e,t){this._selectPageLods.length=0,this._stack.length=0;const n=this._selectPageLods,r=this._stack;for(let n=0,o=e._rootTiles.length;n<o;n++){const o=e._rootTiles[n];Cn(t,e,o),o.visible&&(An(e,o,t),o.contentState!==i.UNLOADED?o.contentState!==i.LOADED?o.contentState===i.READY&&r.push(o):_n(e,o,t):pn(e,o,t))}for(;r.length;){const o=r.pop();An(e,o,t);for(let a=0,s=o.pageLods.length;a<s;a++){const s=o.pageLods[a];if(s.isLeafTile){n.push(s);continue}if(s.update(t,e),!s.canRefine){n.push(s);continue}let u=s.childTile;void 0!==u?(Cn(t,e,u),u.visible&&(An(e,u,t),u.contentState!==i.LOADED?u.contentState!==i.READY?(pn(e,u,t),n.push(s)):r.push(u):(_n(e,u,t),n.push(s)))):(s.createChildTile(e,o),u=s.childTile,An(e,u,t),n.push(s))}}for(let t=0,r=n.length;t<r;t++){const r=n[t];e._renderQueue=e._renderQueue.concat(r.renderEntities)}yn(e,t)},En.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},En.prototype.touch=function(e){const t=e.cacheNode;Cesium.defined(t)&&this._list.splice(this._sentinel,t)},En.prototype.add=function(e){Cesium.defined(e.cacheNode)||(e.cacheNode=this._list.add(e))},En.prototype.unloadTile=function(e,t,n){const r=t.cacheNode;Cesium.defined(r)&&(this._list.remove(r),t.cacheNode=void 0,n(e,t))},En.prototype.unloadTiles=function(e,t){const n=this._trimTiles;this._trimTiles=!1;const r=this._list,o=1024*e.maximumMemoryUsage*1024,i=this._sentinel;let a=r.head;for(;a&&a!==i&&(e.totalMemoryUsageInBytes>o||n);){const n=a.item;a=a.next,this.unloadTile(e,n,t)}},En.prototype.trim=function(){this._trimTiles=!0},hn.read=function(e){const t=e.indexOf("<");return t>0&&(e=e.substring(t)),DOMParser?(hn.xmldom||(hn.xmldom=new DOMParser),hn.xmldom.parseFromString(e,"text/xml")):(hn.xmldom||(hn.xmldom=new ActiveXObject("Microsoft.XMLDOM")),hn.xmldom.loadXML(e))},hn.getElementsByTagNameNS=function(e,t,n){let r=[];if(e.getElementsByTagNameNS)r=e.getElementsByTagNameNS(t,n);else{const o=e.getElementsByTagName("*");let i,a;for(let e=0,s=o.length;e<s;++e)i=o[e],a=i.prefix?i.prefix+":"+n:n,"*"!==n&&a!==i.nodeName||"*"!==t&&t!==i.namespaceURI||r.push(i)}return r},hn.getAttributeNodeNS=function(e,t,n){let r=null;if(e.getAttributeNodeNS)r=e.getAttributeNodeNS(t,n);else{const o=e.attributes;let i,a;for(let e=0,s=o.length;e<s;++e)if(i=o[e],i.namespaceURI===t&&(a=i.prefix?i.prefix+":"+n:n,a===i.nodeName)){r=i;break}}return r},hn.getChildValue=function(e,t){let n=t||"";if(e)for(let t=e.firstChild;t;t=t.nextSibling)switch(t.nodeType){case 3:case 4:n+=t.nodeValue}return n},hn.queryNumericAttribute=function(e,t){if(!e)return;const n=e.getAttribute(t);if(null!==n){const e=parseFloat(n);return isNaN(e)?void 0:e}},hn.queryStringAttribute=function(e,t){if(!e)return;const n=e.getAttribute(t);return null!==n?n:void 0},hn.queryBooleanAttribute=function(e,t){if(!e)return;let n=e.getAttribute(t);return n=n.toLowerCase(),"false"!==n&&("true"===n||void 0)},hn.queryFirstNode=function(e,t,n){if(!e)return;const r=e.childNodes,o=r.length;for(let e=0;e<o;e++){const o=r[e];if(n){if(o.localName===t&&-1!==n.indexOf(o.namespaceURI))return o}else if(o.localName===t)return o}},hn.queryNodes=function(e,t,n){if(!e)return;const r=[],o=e.getElementsByTagNameNS("*",t),i=o.length;for(let e=0;e<i;e++){const i=o[e];n?i.localName===t&&-1!==n.indexOf(i.namespaceURI)&&r.push(i):i.localName===t&&r.push(i)}return r},hn.queryChildNodes=function(e,t,n){if(!e)return[];const r=[],o=e.childNodes,i=o.length;for(let e=0;e<i;e++){const i=o[e];n?i.localName===t&&-1!==n.indexOf(i.namespaceURI)&&r.push(i):i.localName===t&&r.push(i)}return r},hn.queryNumericValue=function(e,t,n){const r=hn.queryFirstNode(e,t,n);if(r){const e=parseFloat(r.textContent);return isNaN(e)?void 0:e}},hn.queryStringValue=function(e,t,n){const r=hn.queryFirstNode(e,t,n);if(r)return r.textContent.trim()},hn.queryBooleanValue=function(e,t,n){const r=hn.queryFirstNode(e,t,n);if(r){const e=r.textContent.trim();return"1"===e||/^true$/i.test(e)}},Object.defineProperties(Bn.prototype,{fillForeColor:{get:function(){return this._fillForeColor},set:function(e){Cesium.Check.typeOf.object("fillForeColor value",e),Cesium.Color.clone(e,this._fillForeColor)}},bottomAltitude:{get:function(){return this._bottomAltitude},set:function(e){Cesium.Check.typeOf.number("bottomAltitude value",e),this._bottomAltitude!==e&&(this._bottomAltitude=e,this._dirty=!0)}},altitudeMode:{get:function(){return this._altitudeMode},set:function(e){Cesium.Check.typeOf.number("altitudeMode value",e),this._altitudeMode=e}},lineColor:{get:function(){return this._lineColor},set:function(e){Cesium.Check.typeOf.object("line color",e),Cesium.Color.clone(e,this._lineColor)}},lineWidth:{get:function(){return this._lineWidth},set:function(e){Cesium.Check.typeOf.number("line width",e),this._lineWidth=e}},pointSize:{get:function(){return this._pointSize},set:function(e){Cesium.Check.typeOf.number("point size",e),this._pointSize=e}},pointColor:{get:function(){return this._pointColor},set:function(e){Cesium.Check.typeOf.object("point color",e),Cesium.Color.clone(e,this._pointColor)}}}),Tn.prototype.scheme=null,Tn.prototype.authority=null,Tn.prototype.path="",Tn.prototype.query=null,Tn.prototype.fragment=null;var xn=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");Tn.prototype.getScheme=function(){return this.scheme},Tn.prototype.getAuthority=function(){return this.authority},Tn.prototype.getPath=function(){return this.path},Tn.prototype.getQuery=function(){return this.query},Tn.prototype.getFragment=function(){return this.fragment},Tn.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},Tn.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},Tn.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},Tn.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(Dn,vn).replace(bn,Pn)),this.path&&(this.path=this.path.replace(bn,Pn)),this.query&&(this.query=this.query.replace(bn,Pn)),this.fragment&&(this.fragment=this.fragment.replace(bn,Pn))};var bn=/%[0-9a-z]{2}/gi;const gn=/[a-zA-Z0-9\-\._~]/;var Dn=/(.*@)?([^@:]*)(:.*)?/;function Pn(e){const t=unescape(e);return gn.test(t)?t:e.toUpperCase()}function vn(e,t,n,r){return(t||"")+n.toLowerCase()+(r||"")}Tn.prototype.resolve=function(e){const t=new Tn;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?(t.path=this.path,t.removeDotSegments()):(e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments()),t.query=this.query))),t.fragment=this.fragment,t},Tn.prototype.removeDotSegments=function(){const e=this.path.split("/"),t=[];let n;const r=""==e[0];for(r&&e.shift(),""==e[0]&&e.shift();e.length;)n=e.shift(),".."==n?t.pop():"."!=n&&t.push(n);"."!=n&&".."!=n||t.push(""),r&&t.unshift(""),this.path=t.join("/")},Tn.prototype.toString=function(){let e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e};const Mn={None:"None",CRN_DXT5:"CRN_DXT5"};var In=Object.freeze(Mn);const Ln=new Cesium.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1);function Sn(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),Cesium.Check.defined("options.context",e.context),this.id=Cesium.createGuid(),this.name=e.name,this.context=e.context,this._isS3MB=Cesium.defaultValue(e.isS3MB,!0),this._url=void 0,this._basePath=void 0,this._baseResource=void 0,this.modelMatrix=new Cesium.Matrix4,this.invModelMatrix=new Cesium.Matrix4,this.fileType=void 0,this.dataVersion=1,this._position=void 0,this._rectangle=void 0,this._rootTiles=[],this._schuduler=new fn,this._requestTiles=[],this._processTiles=[],this._renderQueue=[],this._cache=new En,this._vertexCompressionType=e.vertexCompressionType,this._textureCompressType=In.None,this._maximumMemoryUsage=-1,this._totalMemoryUsageInBytes=0,this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,pixel:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,pixel:Number.MAX_VALUE},this._readyPromise=Xt(),this._selectEnabled=Cesium.defaultValue(e.selectEnabled,!0),this._multiChoose=!1,this._sceneMode=Cesium.defaultValue(e.sceneMode,Cesium.SceneMode.SCENE3D),this._selections=[],this._objsOperationList={},this._selectedColor=new Cesium.Color(.7,.7,1,1),this._minCategory=0,this._maxCategory=0,this._minHeight=0,this._maxHeight=0,this._brightness=Cesium.defaultValue(e.brightness,1),this._contrast=Cesium.defaultValue(e.constrast,1),this._hue=Cesium.defaultValue(e.hue,0),this._saturation=Cesium.defaultValue(e.saturation,1),this._gamma=Cesium.defaultValue(e.gamma,1),this._visibleDistanceMax=Cesium.defaultValue(e.maxVisibleDistance,Number.MAX_VALUE),this._visibleDistanceMin=Cesium.defaultValue(e.minVisibleDistance,0),this._minVisibleAltitude=Cesium.defaultValue(e.minVisibleAltitude,0),this._maxVisibleAltitude=Cesium.defaultValue(e.maxVisibleAltitude,Number.MAX_VALUE),this._lodRangeScale=Cesium.defaultValue(e.lodRangeScale,1),this._visible=Cesium.defaultValue(e.isVisible,!0),this._style3D=Cesium.defaultValue(e.style3D,new Bn),this._isTransparencyOptimization=!1,this._polygonOffsetConfig=e.polygonOffset,this._visibleViewport=4095,this._waterParameters=void 0,this._waterPlanes=void 0,this._edgeDistanceFalloffFactor=0,this._edgeCurrentTotalLength=0,this._edgeCurrentCount=0,this._materialManager=void 0,this.loadConfig(e.url)}function Fn(e){const t={},n=e.firstChild;t.version=hn.queryStringValue(n,"Version"),t.fileType=hn.queryStringValue(n,"FileType");const r=hn.queryFirstNode(n,"WaterEffect");t.averageHeight=hn.queryNumericValue(r,"AverageHeight");const o=hn.queryNodes(r,"GpuProgramParameters");t.gpuProgramParameters=[];for(let e=0,n=o.length;e<n;e++){const n={gpuConstants:[],atuoConstants:[]},r=o[e],i=hn.queryFirstNode(r,"GpuConstants");if(i){const e=hn.queryNodes(i,"GpuConstantDefinition");for(let t=0,r=e.length;t<r;t++){const r={},o=e[t];r.constType=hn.queryNumericValue(o,"ConstType"),r.index=hn.queryNumericValue(o,"Index"),r.name=hn.queryStringValue(o,"Name"),r.arraySize=hn.queryNumericValue(o,"ArraySize"),r.multiple=hn.queryNumericValue(o,"Multiple");const i=hn.queryFirstNode(o,"ArrayFloat");if(r.arrayFloat=[],i){const e=hn.queryNodes(i,"Float");let t=0;for(;t<r.arraySize;){const n=parseFloat(e[t].textContent);r.arrayFloat.push(n),t++}}n.gpuConstants.push(r)}}const a=hn.queryFirstNode(r,"AutoConstants");if(a){const e=hn.queryNodes(a,"AutoConstantEntry");for(let t=0,r=e.length;t<r;t++){const r={},o=e[t];r.paramType=hn.queryNumericValue(o,"ParamType"),r.name=hn.queryStringValue(o,"Name"),r.physicalIndex=hn.queryNumericValue(o,"PhysicalIndex"),r.elementCount=hn.queryNumericValue(o,"ElementCount"),r.data=hn.queryNumericValue(o,"Data"),r.fData=hn.queryNumericValue(o,"FData"),r.isReal=hn.queryBooleanValue(o,"IsReal"),n.atuoConstants.push(r)}}t.gpuProgramParameters.push(n)}return t}function Nn(e,t){const n=t._basePath;if(!(t._basePath.indexOf("realspace")>-1))return e;const r=n.replace(/(.*realspace)/,"");return n.replace(/\/rest\/realspace/g,"").replace(r,"")+"/rest/realspace"+r+"data/path/"+e.replace(/^\.*/,"").replace(/^\//,"").replace(/\/$/,"")}function Rn(e,t){const n=t.extensions;if(!n||!n.attachFiles)return;const r=n.attachFiles,o=[];e._basePath;for(let t=0,n=r.length;t<n;t++){const n=r[t].attachFile;if(n.indexOf(".water")>0){const t=Nn(n,e),r=e._baseResource.getDerivedResource({url:t});o.push(r.fetchXML())}}o.length&&Promise.all(o).then((t=>{const n=[];for(let e=0,r=t.length;e<r;e++){const r=t[e];if(!r)break;const o=Fn(r);n.push(o)}e._waterPlanes=new Cesium.AssociativeArray,e._waterParameters={};const r=n[0];e._waterParameters.averageHeight=r.averageHeight;for(let t=0;t<r.gpuProgramParameters.length;t++){const n=r.gpuProgramParameters[t];for(let t=0;t<n.atuoConstants.length;t++){const r=n.atuoConstants[t];if("timeVal"===r.name){e._waterParameters[r.name]=r.fData;break}}for(let t=0;t<n.gpuConstants.length;t++){const r=n.gpuConstants[t];let o=null;switch(r.arraySize){case 1:o=r.arrayFloat[0];break;case 2:o=new Cesium.Cartesian2,Cesium.Cartesian2.unpack(r.arrayFloat,0,o);break;case 3:o=new Cesium.Cartesian3,Cesium.Cartesian3.unpack(r.arrayFloat,0,o);break;case 4:o=new Cesium.Cartesian4,Cesium.Cartesian4.unpack(r.arrayFloat,0,o)}o&&(e._waterParameters[r.name]=o)}}e.fileType+="_Water"})).catch((e=>{console.log(e)}))}function On(e,t){return e.priority-t.priority}function Gn(e){const t=e._requestTiles,n=t.length;t.sort(On);for(let e=0;e<n;++e){t[e].requestContent()}}function wn(e,t){const n=e._processTiles,r=n.length;for(let o=0;o<r;++o){n[o].transformResource(t,e)}}function Un(e,t){for(let n=0,r=e._renderQueue.length;n<r;n++){e._renderQueue[n].update(t,e)}}function Vn(e,t){t.free()}function Hn(e){e._cache.unloadTiles(e,Vn)}function Kn(e,t){e.updateObjsOperation(t.ids,t)}function kn(e,t){if(!e._waterPlanes)return;const n=e._waterPlanes;void 0===t.curDis&&(t.curDis=6378137),void 0===t.heightOffset&&(t.heightOffset=0);const r=t.camera.positionWC;for(const e in n._hash)if(n._hash.hasOwnProperty(e)){const o=n.get(e),i=o.boundingVolume;if(t.cullingVolume.computeVisibility(i)===Cesium.Intersect.OUTSIDE)continue;let a=Cesium.Cartesian3.distance(i.center,r)-i.radius;a=a<.01?.01:a,a<t.curDis&&(t.curDis=a,t.heightOffset=o.distance)}}function Yn(e,t){const n=t.camera;return!(n.positionCartographic.height<e._minVisibleAltitude||n.positionCartographic.height>e._maxVisibleAltitude)&&(!!e.getVisibleInViewport(t.multiViewportIndex)&&e.visible)}function zn(e){let t=0;Cesium.defined(e.style3D)&&(t=e.style3D.bottomAltitude);const n=e.height+t,r=e.lon,o=e.lat;if(e._sceneMode===Cesium.SceneMode.SCENE3D)e._position=Cesium.Cartesian3.fromDegrees(r,o,n),e.modelMatrix=Cesium.Transforms.eastNorthUpToFixedFrame(e._position),e.invModelMatrix=Cesium.Matrix4.inverse(e.modelMatrix,e.invModelMatrix);else{if(r>180||r<-180||o>180||o<-180){const t=r,i=o;e._position=new Cesium.Cartesian3(t,i,n)}else{const t=new Cesium.GeographicProjection,i=Cesium.Cartesian3.fromDegrees(r,o,n),a=t.ellipsoid.cartesianToCartographic(i);e._position=t.project(a)}Cesium.Matrix4.fromTranslation(e._position,e.modelMatrix),Cesium.Matrix4.multiply(Ln,e.modelMatrix,e.modelMatrix),e.invModelMatrix=Cesium.Matrix4.inverse(e.modelMatrix,e.invModelMatrix)}}Object.defineProperties(Sn.prototype,{ready:{get:function(){return"OSGBCacheFile_Water"===this.fileType?void 0!==this._waterParameters&&this._rootTiles.length>0:this._rootTiles.length>0}},readyPromise:{get:function(){return this._readyPromise.promise}},visible:{get:function(){return this._visible},set:function(e){this._visible=e}},show:{get:function(){return this._visible},set:function(e){this._visible=e}},style3D:{get:function(){return this._style3D}},rectangle:{get:function(){return this._rectangle}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes},set:function(e){this._totalMemoryUsageInBytes=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){this._maximumMemoryUsage=e}},lodRangeScale:{get:function(){return this._lodRangeScale},set:function(e){Cesium.Check.typeOf.number("set layer lod range scale",e),this._lodRangeScale=e}},selectedColor:{get:function(){return this._selectedColor},set:function(e){Cesium.Color.clone(e,this._selectedColor)}},dataMinValue:{get:function(){return Cesium.defaultValue(this._minCategory,this._minHeight)}},dataMaxValue:{get:function(){return Cesium.defaultValue(this._maxCategory,this._maxHeight)}},visibleDistanceMax:{get:function(){return this._visibleDistanceMax},set:function(e){Cesium.Check.typeOf.number("max visible distance",e),this._visibleDistanceMax=e}},visibleDistanceMin:{get:function(){return this._visibleDistanceMin},set:function(e){Cesium.Check.typeOf.number("min visible distance",e),this._visibleDistanceMin=e}},minVisibleAltitude:{get:function(){return this._minVisibleAltitude},set:function(e){Cesium.Check.typeOf.number("min visible altitude",e),this._minVisibleAltitude=e}},maxVisibleAltitude:{get:function(){return this._maxVisibleAltitude},set:function(e){Cesium.Check.typeOf.number("max visible altitude",e),this._maxVisibleAltitude=e}},selectEnabled:{get:function(){return this._selectEnabled},set:function(e){Cesium.Check.defined("value",e),Cesium.Check.typeOf.bool("value",e),this._selectEnabled=e}}}),Sn.prototype.loadConfig=function(e){const t=this;Promise.resolve(e).then((function(e){let n;const r=Cesium.Resource.createIfNeeded(e);n=r.getBaseUri(!0);const o=new Tn(n);return o.query=void 0,n=o.toString(),t._url=r.url,t._basePath=n,t._baseResource=r,t._isS3MB?r.fetchJson():r.fetchXML()})).then((function(e){if(t._isS3MB){const n=e.extensions;t.fileType=n["s3m:FileType"];const r=Cesium.defaultValue(e.position.point3D,e.position),o=r.x,i=r.y,a=r.z,s=e.position.units;if(t.lon=o,t.lat=i,t.height=a,t._sceneMode===Cesium.SceneMode.SCENE3D)t._position=Cesium.Cartesian3.fromDegrees(o,i,a),t.modelMatrix=Cesium.Transforms.eastNorthUpToFixedFrame(t._position),t.invModelMatrix=Cesium.Matrix4.inverse(t.modelMatrix,t.invModelMatrix);else{if(o>180||o<-180||i>180||i<-180||"Meter"===s){const e=o,n=i;t._position=new Cesium.Cartesian3(e,n,a)}else{const e=new Cesium.GeographicProjection,n=Cesium.Cartesian3.fromDegrees(o,i,a),r=e.ellipsoid.cartesianToCartographic(n);t._position=e.project(r)}Cesium.Matrix4.fromTranslation(t._position,t.modelMatrix),Cesium.Matrix4.multiply(Ln,t.modelMatrix,t.modelMatrix),t.invModelMatrix=Cesium.Matrix4.inverse(t.modelMatrix,t.invModelMatrix)}if(Cesium.defined(e.geoBounds)){let n=e.geoBounds.left,r=e.geoBounds.top,o=e.geoBounds.right,i=e.geoBounds.bottom;n>180||i>180||o>180||r>180?(n/=6378137,i/=6378137,o/=6378137,r/=6378137,t._rectangle=new Cesium.Rectangle(n,i,o,r)):t._rectangle=Cesium.Rectangle.fromDegrees(n,i,o,r)}if(e.heightRange&&(t._minHeight=e.heightRange.min,t._maxHeight=e.heightRange.max),e.wDescript){const n=e.wDescript.range;t._minWValue=n.min,t._maxWValue=n.max}n.hasOwnProperty("s3m:TransparencyOptimization")&&(t._isTransparencyOptimization="TRUE"===n["s3m:TransparencyOptimization"]),n.hasOwnProperty("s3m:VertexCompressionType")&&(t._vertexCompressionType=n["s3m:VertexCompressionType"]),n.hasOwnProperty("s3m:TextureCompressionType")&&(t._textureCompressType=n["s3m:TextureCompressionType"]);const u=e.tiles||e.rootTiles;u.length>0&&Cesium.getExtensionFromUri(u[0].url);for(let e=0,n=u.length;e<n;e++){const n=u[e].url,r={box:u[e].boundingbox||u[e].boundingBox},o=new Zt(t,void 0,r,n);o.isRootTile=!0,o.blockKey=n,t._cache.add(o),t._rootTiles.push(o)}Rn(t,e)}else{const n=e.firstChild,r=n.namespace;t.fileType=hn.queryStringValue(n,"FileType",r);const o=hn.queryFirstNode(n,"Position",r),i=hn.queryNumericValue(o,"X",r),a=hn.queryNumericValue(o,"Y",r),s=hn.queryNumericValue(o,"Z",r);t.lon=i,t.lat=a,t.height=s,t._position=Cesium.Cartesian3.fromDegrees(i,a,s),t.modelMatrix=Cesium.Transforms.eastNorthUpToFixedFrame(t._position),t.invModelMatrix=Cesium.Matrix4.inverse(t.modelMatrix,t.invModelMatrix);const u=hn.queryFirstNode(n,"Bounds",r),c=hn.queryFirstNode(n,"BoundingBox",r);if(u){const e=hn.queryNumericValue(u,"Left",r),n=hn.queryNumericValue(u,"Top",r),o=hn.queryNumericValue(u,"Right",r),i=hn.queryNumericValue(u,"Bottom",r);t._rectangle=Cesium.Rectangle.fromDegrees(e,i,o,n)}else if(c){let e=hn.queryNumericValue(c,"MinX",r),n=hn.queryNumericValue(c,"MinY",r);hn.queryNumericValue(c,"MinZ",r);let o=hn.queryNumericValue(c,"MaxX",r),s=hn.queryNumericValue(c,"MaxY",r);hn.queryNumericValue(c,"MaxZ",r),e=180*Math.abs(e)/(6378137*Math.PI),n=180*Math.abs(n)/(6378137*Math.PI),o=180*Math.abs(o)/(6378137*Math.PI),s=180*Math.abs(s)/(6378137*Math.PI),t._rectangle=Cesium.Rectangle.fromDegrees(i-e,a-n,i+o,a+s)}const l=hn.queryFirstNode(n,"HeightRange",r);l&&(t._minHeight=hn.queryNumericValue(l,"MinHeight",r),t._maxHeight=hn.queryNumericValue(l,"MaxHeight",r));const d=hn.queryFirstNode(n,"CategoryRange",r);d&&(t._maxWValue=hn.queryNumericValue(d,"MaxCategory",r),t._minWValue=hn.queryNumericValue(d,"MinCategory",r));const f=hn.queryFirstNode(n,"Extensions",r);t._isTransparencyOptimization=hn.queryBooleanValue(f,"TransparencyOptimization",r);const p=/\\+/g,_=hn.queryFirstNode(n,"OSGFiles",r),A=hn.queryNodes(_,"Files",r);if(A.length>0)for(let e=0,n=A.length;e<n;e++){const n=A[e];let o=hn.queryStringValue(n,"FileName",r);o=o.replace(p,"/"),o=o.replace(/(\.osgb)/gi,".s3m");const i=hn.queryFirstNode(n,"BoundingSphere",r);let a={sphere:{center:{x:0,y:0,z:0},radius:6378137}};if(i&&i.childNodes.length){a={sphere:{center:{x:hn.queryNumericValue(i,"CenterX",r),y:hn.queryNumericValue(i,"CenterY",r),z:hn.queryNumericValue(i,"CenterZ",r)},radius:hn.queryNumericValue(i,"Radius",r)}}}const s=new Zt(t,void 0,a,o);s.isRootTile=!0,t._cache.add(s),t._rootTiles.push(s)}else{const e=hn.queryNodes(_,"FileName",r);for(let n=0,r=e.length;n<r;n++){let r=e[n].textContent;r=r.replace(p,"/"),r=r.replace(/(\.osgb)/gi,".s3m");const o=new Zt(t,void 0,{sphere:{center:{x:0,y:0,z:0},radius:6378137}},r);o.isRootTile=!0,t._cache.add(o),t._rootTiles.push(o)}}}t._readyPromise.resolve(t)}),(e=>{t._readyPromise.reject(e)}))},Sn.prototype._tranverseRenderEntity=function(e,t){const n=[];for(let e=0,t=this._rootTiles.length;e<t;e++){const t=this._rootTiles[e];n.push(t)}for(;n.length;){const r=n.pop();for(let o=0,i=r.pageLods.length;o<i;o++){const i=r.pageLods[o],a=i.renderEntities;for(let n=0,r=a.length;n<r;n++){const r=a[n];r.ready&&t(r,e)}i.childTile&&n.push(i.childTile)}}},Sn.prototype._updateObjsOperation=function(e){this._tranverseRenderEntity({ids:e},Kn)},Sn.prototype._setObjsOperationType=function(e,t){Cesium.Check.defined("set Objs Operation ids",e),Cesium.Check.defined("set Objs Operation operationType",t),Array.isArray(e)||(e=[e]);const n=new Cesium.AssociativeArray;let r;for(let o=0,i=e.length;o<i;o++){if(r=e[o],!Cesium.defined(r))continue;let i=Cesium.defaultValue(this._objsOperationList[r],0);i!==t&&(i|=t,this._objsOperationList[r]=i,n.set(r,i))}n.length>0&&this._updateObjsOperation(n._hash)},Sn.prototype._removeObjsOperationType=function(e,t){Cesium.Check.defined("set Objs Operation ids",e),Array.isArray(e)||(e=[e]);const n=rt.ALL^t,r=new Cesium.AssociativeArray;let o;for(let t=0,i=e.length;t<i;t++){o=e[t];let i=this._objsOperationList[o];Cesium.defined(i)&&(i&=n,i===rt.RESET?delete this._objsOperationList[o]:this._objsOperationList[o]=i,r.set(o,i))}r.length>0&&this._updateObjsOperation(r._hash)},Sn.prototype.setSelection=function(e){Cesium.Check.defined("setSelection ids",e),Array.isArray(e)||(e=[e]),this.releaseSelection(),this._selections=this._selections.concat(e),this._setObjsOperationType(e,rt.SELECTED)},Sn.prototype.releaseSelection=function(){this._selections.length<1||(this._removeObjsOperationType(this._selections,rt.SELECTED),this._selections.length=0)},Sn.prototype.setLodRangeScale=function(e){this._lodRangeScale=e},Sn.prototype.setVisibleInViewport=function(e,t){if(e>8)throw new Cesium.DeveloperError("the index is 0~8");this._visibleViewport=t?1<<e|this._visibleViewport:~(1<<e)&this._visibleViewport},Sn.prototype.getVisibleInViewport=function(e){if(e>8)throw new Cesium.DeveloperError("the index is 0~3");return 1<<e&this._visibleViewport},Sn.prototype._updateEdgeDistanceFalloffFactor=function(){0!==this._edgeCurrentCount?(this._edgeDistanceFalloffFactor=this._edgeCurrentTotalLength/this._edgeCurrentCount*40,this._edgeCurrentTotalLength=0,this._edgeCurrentCount=0):this._edgeCurrentTotalLength=0},Sn.prototype._addRenderedEdge=function(e,t){this._edgeCurrentTotalLength+=e,this._edgeCurrentCount+=t},Sn.prototype.addWaterPlane=function(e){const t=this._waterPlanes.length;return this._waterPlanes.set(t,e),t},Sn.prototype.removeWaterPlane=function(e){this._waterPlanes.remove(e)},Sn.prototype.prePassesUpdate=function(e){this.ready&&e.newFrame&&(this._cache.reset(),this._requestTiles.length=0,this._processTiles.length=0,this._renderQueue.length=0,Cesium.defined(e.brdfLutGenerator)&&e.brdfLutGenerator.update(e),kn(this,e))},new Cesium.Matrix4,Sn.prototype.postPassesUpdate=function(e){this.ready&&(Hn(this),this._updateEdgeDistanceFalloffFactor(),this._subTextureManager&&this._subTextureManager.processRequests(this.id))},Sn.prototype.update=function(e){this.ready&&Yn(this,e)&&(!e.passes.pick||this._selectEnabled)&&(this._textureCompressType!==In.CRN_DXT5||Mt.wasmReady?(this._schuduler.schedule(this,e),Gn(this),wn(this,e),Un(this,e),this._style3D._dirty&&(zn(this),this._style3D._dirty=!1),this._frameState=e):Mt.init())},Sn.prototype.isDestroyed=function(){return!1},Sn.prototype.destroy=function(){return this._cache.reset(),Hn(this),this._rootTiles.length=0,this._requestTiles.length=0,this._processTiles.length=0,this._renderQueue.length=0,Cesium.destroyObject(this)},Cesium.Scene.prototype.hookPickFunc=Cesium.Scene.prototype.pick,Cesium.Scene.prototype.pick=function(e,t,n){const r=this.hookPickFunc(e,t,n);if(r){r.primitive&&r.primitive instanceof Sn&&r.primitive.setSelection(r.id)}else for(let e=0,t=this.primitives.length;e<t;e++){const t=this.primitives.get(e);t instanceof Sn&&t.releaseSelection()}return r};const Jn=r.Cesium,Xn=r.layer.BaseGraphicLayer;class jn extends Xn{constructor(e={}){super(e),this._id=Jn.createGuid(),this._name=this.options.name,this._isS3MB=Jn.defaultValue(this.options.isS3MB,!0),this._url=this.options.url}_addedHook(){const e=this._url,t=this._name,n=this._isS3MB;this._context=Jn.defaultValue(this.options.context,this._map.scene.context),this._layer=new Sn({context:this._context,url:e,name:t,isS3MB:n}),this._map.scene.primitives.add(this._layer)}_removedHook(){super._removedHook(),this._layer&&(this._map.scene.primitives.remove(this._layer),delete this._layer)}}let Wn;r.LayerUtil.register("s3m",jn),r.layer.S3MLayer=jn;const qn=function(e){return"undefined"==typeof document?e:(Wn||(Wn=document.createElement("a")),Wn.href=e,Wn.href=Wn.href,Wn.href)};if("undefined"!=typeof WebAssembly){var Zn=void 0!==Zn?Zn:{};let rr,or={};for(rr in Zn)Zn.hasOwnProperty(rr)&&(or[rr]=Zn[rr]);let ir=!1,ar=!1,sr=!1,ur=!1,cr=!1;ir="object"==typeof window,ar="function"==typeof importScripts,ur="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,sr=ur&&!ir&&!ar,cr=!ir&&!sr&&!ar;let lr,dr,fr,pr,_r="";sr?(_r=__dirname+"/",lr=function(e,t){return fr||(fr=require("fs")),pr||(pr=require("path")),e=pr.normalize(e),fr.readFileSync(e,t?null:"utf8")},dr=function(e){let t=lr(e,!0);return t.buffer||(t=new Uint8Array(t)),Br(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),"undefined"!=typeof module&&(module.exports=Zn),process.on("uncaughtException",(function(e){if(!(e instanceof no))throw e})),process.on("unhandledRejection",Yr),Zn.inspect=function(){return"[Emscripten Module object]"}):cr?("undefined"!=typeof read&&(lr=function(e){return read(e)}),dr=function(e){let t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),Br("object"==typeof t),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(ir||ar)&&(ar?_r=self.location.href:document.currentScript&&(_r=document.currentScript.src),_r=0!==_r.indexOf("blob:")?_r.substr(0,_r.lastIndexOf("/")+1):"",lr=function(e){const t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ar&&(dr=function(e){const t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));const Ar=Zn.print||console.log.bind(console),mr=Zn.printErr||console.warn.bind(console);for(rr in or)or.hasOwnProperty(rr)&&(Zn[rr]=or[rr]);let Cr,yr;or=null,Zn.arguments&&Zn.arguments,Zn.thisProgram&&Zn.thisProgram,Zn.quit&&Zn.quit,Zn.wasmBinary&&(Cr=Zn.wasmBinary),Zn.noExitRuntime&&Zn.noExitRuntime,"object"!=typeof WebAssembly&&mr("no native wasm support detected");const Er=new WebAssembly.Table({initial:6,maximum:6,element:"anyfunc"});let hr=!1;function Br(e,t){e||Yr("Assertion failed: "+t)}const Tr="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function xr(e,t,n){const r=t+n;let o=t;for(;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&Tr)return Tr.decode(e.subarray(t,o));for(var i="";t<o;){let n=e[t++];if(!(128&n)){i+=String.fromCharCode(n);continue}const r=63&e[t++];if(192==(224&n)){i+=String.fromCharCode((31&n)<<6|r);continue}const o=63&e[t++];if(n=224==(240&n)?(15&n)<<12|r<<6|o:(7&n)<<18|r<<12|o<<6|63&e[t++],n<65536)i+=String.fromCharCode(n);else{const e=n-65536;i+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return i}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");const br=65536;function gr(e,t){return e%t>0&&(e+=t-e%t),e}let Dr,Pr,vr,Mr;function Ir(e){Dr=e,Zn.HEAP8=Pr=new Int8Array(e),Zn.HEAP16=new Int16Array(e),Zn.HEAP32=Mr=new Int32Array(e),Zn.HEAPU8=vr=new Uint8Array(e),Zn.HEAPU16=new Uint16Array(e),Zn.HEAPU32=new Uint32Array(e),Zn.HEAPF32=new Float32Array(e),Zn.HEAPF64=new Float64Array(e)}const Lr=5247584,Sr=4544;let Fr=Zn.TOTAL_MEMORY||16777216;function Nr(e){for(;e.length>0;){const t=e.shift();if("function"==typeof t){t();continue}const n=t.func;"number"==typeof n?void 0===t.arg?Zn.dynCall_v(n):Zn.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}}yr=Zn.wasmMemory?Zn.wasmMemory:new WebAssembly.Memory({initial:Fr/br}),yr&&(Dr=yr.buffer),Fr=Dr.byteLength,Ir(Dr),Mr[Sr>>2]=Lr;const Rr=[],Or=[],Gr=[],wr=[];function Ur(){if(Zn.preRun)for("function"==typeof Zn.preRun&&(Zn.preRun=[Zn.preRun]);Zn.preRun.length;)e=Zn.preRun.shift(),Rr.unshift(e);var e;Nr(Rr)}function Vr(){if(Zn.postRun)for("function"==typeof Zn.postRun&&(Zn.postRun=[Zn.postRun]);Zn.postRun.length;)e=Zn.postRun.shift(),wr.unshift(e);var e;Nr(wr)}let Hr=0,Kr=null;function kr(e){if(Hr--,Zn.monitorRunDependencies&&Zn.monitorRunDependencies(Hr),0==Hr&&Kr){const e=Kr;Kr=null,e()}}function Yr(e){throw Zn.onAbort&&Zn.onAbort(e),Ar(e+=""),mr(e),hr=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}Zn.preloadedImages={},Zn.preloadedAudios={};const zr="data:application/octet-stream;base64,";function Jr(e){return String.prototype.startsWith?e.startsWith(zr):0===e.indexOf(zr)}let Xr="crunch.wasm";function jr(){try{if(Cr)return new Uint8Array(Cr);if(dr)return dr(Xr);throw"both async and sync fetching of the wasm failed"}catch(e){Yr(e)}}function Wr(){const e={env:$n,wasi_unstable:$n};function t(e,t){const n=e.exports;Zn.asm=n,kr()}function n(e){t(e.instance)}function r(t){return(Cr||!ir&&!ar||"function"!=typeof fetch?new Promise((function(e,t){e(jr())})):fetch(Xr,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Xr+"'";return e.arrayBuffer()})).catch((function(){return jr()}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){mr("failed to asynchronously prepare wasm: "+e),Yr(e)}))}if(Hr++,Zn.monitorRunDependencies&&Zn.monitorRunDependencies(Hr),Zn.instantiateWasm)try{return Zn.instantiateWasm(e,t)}catch(e){return mr("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(Cr||"function"!=typeof WebAssembly.instantiateStreaming||Jr(Xr)||"function"!=typeof fetch)return r(n);fetch(Xr,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){mr("wasm streaming compile failed: "+e),mr("falling back to ArrayBuffer instantiation"),r(n)}))}))}(),{}}function qr(e,t,n){vr.set(vr.subarray(t,t+n),e)}function Zr(e){try{return yr.grow(e-Dr.byteLength+65535>>16),Ir(yr.buffer),1}catch(e){}}function Qr(e){const t=Pr.length,n=65536,r=2147418112;if(e>r)return!1;let o=Math.max(t,16777216);for(;o<e;)o=o<=536870912?gr(2*o,n):Math.min(gr((3*o+2147483648)/4,n),r);return!!Zr(o)}Jr(Xr)||(Xr=qn("./S3M_module/S3MTiles/ThirdParty/crunch.wasm")),Or.push({func:function(){er()}});var Qn={buffers:[null,[],[]],printChar:function(e,t){const n=Qn.buffers[e];0===t||10===t?((1===e?Ar:mr)(xr(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){Qn.varargs+=4;return Mr[Qn.varargs-4>>2]},getStr:function(){var e,t;return(e=Qn.get())?xr(vr,e,t):""},get64:function(){const e=Qn.get();return Qn.get(),e},getZero:function(){Qn.get()}};function $r(e,t,n,r){try{let o=0;for(let r=0;r<n;r++){const n=Mr[t+8*r>>2],i=Mr[t+(8*r+4)>>2];for(let t=0;t<i;t++)Qn.printChar(e,vr[n+t]);o+=i}return Mr[r>>2]=o,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Yr(e),e.errno}}var $n={a:qr,b:Qr,c:$r,memory:yr,table:Er};const eo=Wr();Zn.asm=eo;var er=Zn.___wasm_call_ctors=function(){return Zn.asm.d.apply(null,arguments)};let to;function no(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ro(e){function t(){to||(to=!0,hr||(Nr(Or),Nr(Gr),Zn.onRuntimeInitialized&&Zn.onRuntimeInitialized(),Vr()))}Hr>0||(Ur(),Hr>0||(Zn.setStatus?(Zn.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Zn.setStatus("")}),1),t()}),1)):t()))}if(Zn._malloc=function(){return Zn.asm.e.apply(null,arguments)},Zn._free=function(){return Zn.asm.f.apply(null,arguments)},Zn._crn_get_width=function(){return Zn.asm.g.apply(null,arguments)},Zn._crn_get_height=function(){return Zn.asm.h.apply(null,arguments)},Zn._crn_get_levels=function(){return Zn.asm.i.apply(null,arguments)},Zn._crn_get_dxt_format=function(){return Zn.asm.j.apply(null,arguments)},Zn._crn_get_bytes_per_block=function(){return Zn.asm.k.apply(null,arguments)},Zn._crn_get_uncompressed_size=function(){return Zn.asm.l.apply(null,arguments)},Zn._crn_decompress=function(){return Zn.asm.m.apply(null,arguments)},Zn.asm=eo,Kr=function e(){to||ro(),to||(Kr=e)},Zn.run=ro,Zn.preInit)for("function"==typeof Zn.preInit&&(Zn.preInit=[Zn.preInit]);Zn.preInit.length>0;)Zn.preInit.pop()();ro()}var tr=Zn,nr={__proto__:null,default:tr};e.S3MLayer=jn,Object.defineProperty(e,"__esModule",{value:!0})}));
